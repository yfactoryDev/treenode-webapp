window.__require=function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({API:[function(e,t,n){"use strict";cc._RF.push(t,"8230a4Y2rVM/Z9oN5w2LZjn","API"),Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;var o=function(){function e(){}return e.HOST="https://aprvxk56c5.execute-api.us-east-2.amazonaws.com/dev/",e.PATH_CREATE_USER="users/create",e.PATH_UPLOAD_LEVEL="levels/upload",e.PATH_GET_LEVEL="levels/%s",e.PATH_UPLOAD_QRCODE="qrcode/upload",e.PATH_ADMIN_LOGIN="admin/login",e.PATH_GET_ALL_USERS="users/all",e.PATH_DELETE_USER="users/%s",e.GAME_URL="https://yfactorydev.github.io/treenode-webapp/",e}();n.API=o,cc._RF.pop()},{}],AdminAccountManager:[function(e,t,n){"use strict";cc._RF.push(t,"f94caTlULxIUL60N9fDgr9g","AdminAccountManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountPermission=void 0;var i=cc._decorator,a=i.ccclass;i.property;(function(e){e.Administrator="Administrator",e.Supervisor="Supervisor"})(n.AccountPermission||(n.AccountPermission={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._current=null,t}var n;return o(t,e),n=t,Object.defineProperty(t.prototype,"current",{get:function(){return this._current},set:function(e){this._current=e,cc.log("admin account: ",this._current)},enumerable:!1,configurable:!0}),t.getInstance=function(){return this.instance},t.prototype.start=function(){n.instance=this},t.instance=null,t=n=r([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],AdminLoginPanel:[function(e,t,n){"use strict";cc._RF.push(t,"8e181E3iwlCNbcgWndx8bRc","AdminLoginPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/API"),a=e("../../Scripts/Manager/EventManager"),c=e("../AdminScene"),s=e("../AdminAccountManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idBox=null,t.passwordBox=null,t}return o(t,e),t.prototype.onSubmitClicked=function(){this.login(this.idBox.string,this.passwordBox.string,this.handleLoginResponse.bind(this))},t.prototype.login=function(e,t,n){var o={body:{id:e,password:t}},r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&r.status>=200&&r.status<400){var e=JSON.parse(r.responseText);n(e)}};var a=cc.js.formatStr("%s%s",i.API.HOST,i.API.PATH_ADMIN_LOGIN);r.open("POST",a),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(o))},t.prototype.handleLoginResponse=function(e){if(console.log("admin login: ",e),null===e||void 0===e||null===e.item||void 0===e.item);else{var t={id:e.item.id,permission:s.AccountPermission[e.item.permission]};a.default.getInstance().emitEvent(c.AdminEvent.LoggedInEvent,t)}},r([p(cc.EditBox)],t.prototype,"idBox",void 0),r([p(cc.EditBox)],t.prototype,"passwordBox",void 0),t=r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Scripts/API":"API","../../Scripts/Manager/EventManager":"EventManager","../AdminAccountManager":"AdminAccountManager","../AdminScene":"AdminScene"}],AdminPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4ff25BDlhJFfJBWssfTQuAR","AdminPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../Scripts/API"),s=e("../../Scripts/Manager/EventManager"),l=e("../AdminAccountManager"),u=e("../AdminScene"),p=e("./AdminQRCodePopup"),f=e("./CertificationPopup"),d=e("./DeleteUserConfirmPopup"),h=e("./UserTableRow"),y=cc._decorator,g=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.welcomeLabel=null,t.tableLayoutNode=null,t.userRowPrefab=null,t.prePage10Arrow=null,t.prePage1Arrow=null,t.nextPage10Arrow=null,t.nextPage1Arrow=null,t.pageNavigators=[],t.deleUserConfirmPopup=null,t.certificationPopup=null,t.qrCodePopup=null,t._currentPageRows=[],t._startPageIndex=0,t._pageIndex=0,t._limitPerPage=20,t._itemDatas=null,t}return o(t,e),t.prototype.onEnable=function(){this._startPageIndex=0,this._pageIndex=0,this._initWelcome(),this._getAllUsers(this.handleAllUsersDataUpdated.bind(this)),this._calculateLimitPerPage()},t.prototype._calculateLimitPerPage=function(){},t.prototype._initWelcome=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return l.default.getInstance().current?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return t.sent(),[3,0];case 2:return e="",e=l.default.getInstance().current.permission===l.AccountPermission.Administrator?"\uad00\ub9ac\uc790":"\uc288\ud37c \ubc14\uc774\uc800",this.welcomeLabel.string=cc.js.formatStr("<color=#F7F69C>%s</c><color=#FFFFFF>\ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4.</color>",e),[2]}})})},t.prototype._getAllUsers=function(e,t){return void 0===t&&(t=20),i(this,void 0,void 0,function(){var n,o;return a(this,function(r){return(n=new XMLHttpRequest).onreadystatechange=function(){if(4===n.readyState&&n.status>=200&&n.status<400){var t=JSON.parse(n.responseText);e(t)}else e(null)},o=cc.js.formatStr("%s%s?limit=%s",c.API.HOST,c.API.PATH_GET_ALL_USERS,t),n.open("GET",o),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(),[2]})})},t.prototype.handleAllUsersDataUpdated=function(e){this._itemDatas=null===e?[]:e.items,this._itemDatas.sort(function(e,t){return t.submittedAt-e.submittedAt}),cc.log(this._itemDatas),this._updatePage(),this._updateNavigator()},t.prototype.onPageNavigatorClicked=function(e,t){var n=this._startPageIndex+parseInt(t);this._pageIndex=n,this._updatePage(),this._updateNavigator()},t.prototype.onPageSideButtonClicked=function(e,t){switch(t){case"pre_10":this._changePageTo(this._startPageIndex-10,this._startPageIndex-10);break;case"pre_1":this._changePageTo(this._startPageIndex,this._pageIndex-1);break;case"next_10":this._changePageTo(this._startPageIndex+10,this._startPageIndex+10);break;case"next_1":this._changePageTo(this._startPageIndex,this._pageIndex+1)}},t.prototype._changePageTo=function(e,t){var n=this._getPageCounts();t-e>=10?e+=1:t<e&&(e-=1),e<0&&(e=0,t=0),e>=n||(t<0&&(e=0,t=0),t>=n||(this._pageIndex=t,this._startPageIndex=e,this._updatePage(),this._updateNavigator()))},t.prototype._updatePage=function(){var e=this._pageIndex*this._limitPerPage;0===this._currentPageRows.length&&this._initializeRows();for(var t=0;t<this._limitPerPage;t++){var n=e+t;if(n>=this._itemDatas.length)this._currentPageRows[t].node.active=!1;else{var o=this._itemDatas[n];this._currentPageRows[t].setItemData(e+1+t,o.id,o.submittedAt,o.usrName,this.handleUserCertificationClicked.bind(this),this.handleUserQrCodeClicked.bind(this),this.handleUserDeleteClicked.bind(this)),this._currentPageRows[t].indexOnPage=t,this._currentPageRows[t].node.active=!0}}},t.prototype._updateNavigator=function(){var e=this._getPageCounts();this.prePage1Arrow.active=0!==this._startPageIndex,this.prePage10Arrow.active=this._startPageIndex>=10,this.nextPage1Arrow.active=this._pageIndex<e-1,this.nextPage10Arrow.active=this._startPageIndex+10<=e-1;for(var t=0;t<this.pageNavigators.length;t++){var n=this._startPageIndex+t;if(n>=e)this.pageNavigators[t].active=!1;else{this.pageNavigators[t].active=!0;var o=this.pageNavigators[t].getComponentInChildren(cc.Label);o.string=(n+1).toString(),o.node.color=n===this._pageIndex?new cc.Color(239,151,65,255):new cc.Color(174,174,174,255)}}},t.prototype._initializeRows=function(){for(var e=0;e<this._limitPerPage;e++){var t=cc.instantiate(this.userRowPrefab);t.active=!1,t.parent=this.tableLayoutNode,t.scale=1,this._currentPageRows.push(t.getComponent(h.default))}},t.prototype.handleUserCertificationClicked=function(e){this.certificationPopup.set(e,this.handleUserQrCodeClicked.bind(this),this.handleUserDeleteClicked.bind(this)),this.certificationPopup.node.active=!0,this.qrCodePopup.node.active=!1,this.deleUserConfirmPopup.node.active=!1},t.prototype.handleUserQrCodeClicked=function(e){var t=this._itemDatas.find(function(t){return t.id===e.uid});null!==t&&void 0!==t&&(e.qrcode=t.qrcode),this.qrCodePopup.set(e,this.handleUserCertificationClicked.bind(this),this.handleUserDeleteClicked.bind(this)),this.qrCodePopup.node.active=!0,this.certificationPopup.node.active=!1,this.deleUserConfirmPopup.node.active=!1},t.prototype.handleUserDeleteClicked=function(e){var t=this;this.deleUserConfirmPopup.set(e.uid,e.name,function(){t.certificationPopup.node.active=!1,t.qrCodePopup.node.active=!1,t._itemDatas=t._itemDatas.filter(function(t){return t.id!==e.uid}),1==t._getCurrentPageItemCounts()?t._changePageTo(t._startPageIndex,t._pageIndex-1):(t._updatePage(),t._updateNavigator())}),this.deleUserConfirmPopup.node.active=!0},t.prototype._getPageCounts=function(){return Math.ceil(this._itemDatas.length/this._limitPerPage)},t.prototype._getCurrentPageItemCounts=function(){var e=0;return this._currentPageRows.forEach(function(t){return e+=t.node.active?1:0}),e},t.prototype.onLogoutClicked=function(){s.default.getInstance().emit(u.AdminEvent.LogoutEvent)},r([_(cc.RichText)],t.prototype,"welcomeLabel",void 0),r([_(cc.Node)],t.prototype,"tableLayoutNode",void 0),r([_(cc.Prefab)],t.prototype,"userRowPrefab",void 0),r([_(cc.Node)],t.prototype,"prePage10Arrow",void 0),r([_(cc.Node)],t.prototype,"prePage1Arrow",void 0),r([_(cc.Node)],t.prototype,"nextPage10Arrow",void 0),r([_(cc.Node)],t.prototype,"nextPage1Arrow",void 0),r([_(cc.Node)],t.prototype,"pageNavigators",void 0),r([_(d.default)],t.prototype,"deleUserConfirmPopup",void 0),r([_(f.default)],t.prototype,"certificationPopup",void 0),r([_(p.default)],t.prototype,"qrCodePopup",void 0),t=r([g],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Scripts/API":"API","../../Scripts/Manager/EventManager":"EventManager","../AdminAccountManager":"AdminAccountManager","../AdminScene":"AdminScene","./AdminQRCodePopup":"AdminQRCodePopup","./CertificationPopup":"CertificationPopup","./DeleteUserConfirmPopup":"DeleteUserConfirmPopup","./UserTableRow":"UserTableRow"}],AdminQRCodePopup:[function(e,t,n){"use strict";cc._RF.push(t,"ae26aNgLEpHK4v0hn6KDmYm","AdminQRCodePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./UserTableRow"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.row=null,t.qrCodeSprite=null,t}return o(t,e),t.prototype.onEnable=function(){this.node.setSiblingIndex(-1)},t.prototype.set=function(e,t,n){cc.log("AdminQRCodePopup::set",e),this.row.setItemData(e.order,e.uid,e.date,e.name,t,function(){},n),null!==e.qrcode&&void 0!==e.qrcode&&this._loadQRImage(e.qrcode)},t.prototype._loadQRImage=function(e){var t=this;""!==e&&cc.assetManager.loadRemote(e,function(e,n){if(e)cc.log("GameQRPanel::_loadQRImage",e.message||e);else{var o=new cc.SpriteFrame(n);t.qrCodeSprite.spriteFrame=o,t.qrCodeSprite.node.color=cc.Color.WHITE}})},t.prototype.onPrintClicked=function(){window.onbeforeprint=function(){},window.onafterprint=function(){},window.print()},t.prototype.onCloseClicked=function(){this.node.active=!1},r([s(i.default)],t.prototype,"row",void 0),r([s(cc.Sprite)],t.prototype,"qrCodeSprite",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./UserTableRow":"UserTableRow"}],AdminScene:[function(e,t,n){"use strict";cc._RF.push(t,"89328L8uXtOO4J6syRCXwY5","AdminScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.AdminEvent=void 0;var i,a=e("../Scripts/Base/SceneComponent"),c=e("../Scripts/Manager/EventManager"),s=e("./AdminAccountManager"),l=cc._decorator,u=l.ccclass;l.property;(function(e){e.LoggedInEvent="logged_in",e.LogoutEvent="logout"})(i=n.AdminEvent||(n.AdminEvent={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("login",!0),c.default.getInstance().addEventListener(i.LoggedInEvent,this.handleAdminLoggedIn,this),c.default.getInstance().addEventListener(i.LogoutEvent,this.handleLoggedout,this)},t.prototype.onDestroy=function(){c.default.getInstance().offEventListener(i.LoggedInEvent,this.handleAdminLoggedIn,this),c.default.getInstance().addEventListener(i.LogoutEvent,this.handleLoggedout,this)},t.prototype.handleAdminLoggedIn=function(e){s.default.getInstance().current=e,this.setPanelVisible("login",!1),this.setPanelVisible("admin",!0)},t.prototype.handleLoggedout=function(){s.default.getInstance().current=null,this.setPanelVisible("login",!0),this.setPanelVisible("admin",!1)},t=r([u],t)}(a.default);n.default=p,cc._RF.pop()},{"../Scripts/Base/SceneComponent":"SceneComponent","../Scripts/Manager/EventManager":"EventManager","./AdminAccountManager":"AdminAccountManager"}],AnimationEffect:[function(e,t,n){"use strict";cc._RF.push(t,"72c2aqdu09OIL5v3TLHw7YD","AnimationEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./BaseEffect"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animator=null,t.destroyOnDelay=!1,t.duration=0,t}return o(t,e),t.prototype.onLoad=function(){this.animator.playOnLoad=this.playOnAwake},t.prototype.play=function(){var e=this;this.animator.play();this.destroyOnFinish&&this.animator.on("stop",function(t){return e.node.destroy()},this),this.destroyOnDelay&&this.scheduleOnce(function(){e.node.destroy()},1e3*this.duration)},t.prototype.playEffectSound=function(){cc.audioEngine.playEffect(this.awakeAudio,!1)},r([s(cc.Animation)],t.prototype,"animator",void 0),r([s],t.prototype,"destroyOnDelay",void 0),r([s],t.prototype,"duration",void 0),t=r([c],t)}(i.BaseEffect);n.default=l,cc._RF.pop()},{"./BaseEffect":"BaseEffect"}],AppManager:[function(e,t,n){"use strict";cc._RF.push(t,"f80d30YOVBOSJjmYOEugPyf","AppManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this)||this;return t.name="AppManager",cc.game.addPersistRootNode(t),t}return o(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t}(cc.Node);n.default=r,cc._RF.pop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"1e25bgx9ilDULdLyGmx6azI","AudioManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.AudioClipData=void 0;var i=cc._decorator,a=i.ccclass,c=i.property,s=function(){function e(){this.name="",this.clip=null}return r([c()],e.prototype,"name",void 0),r([c({displayName:"clip",type:cc.AudioClip})],e.prototype,"clip",void 0),e=r([a("AudioClipData")],e)}();n.AudioClipData=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t}var n;return o(t,e),n=t,t.getInstance=function(){return n.instance||n.isLoaded||(n.isLoaded=!0,cc.loader.loadRes("prefabs/AudioManager",function(e,t){var n=cc.instantiate(t);cc.director.getScene().addChild(n)})),n.instance},t.prototype.onLoad=function(){cc.log("AudioManager was initialized"),n.instance=this,cc.game.addPersistRootNode(this.node)},t.prototype.playEffect=function(e,t){var n=this.data.find(function(t){return t.name===e});return null!==n&&void 0!==n?cc.audioEngine.playEffect(n.clip,t):0},t.prototype.playMusic=function(e){var t=this.data.find(function(t){return t.name===e});null!==t&&void 0!==t&&cc.audioEngine.playMusic(t.clip,!0)},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.isLoaded=!1,t.instance=null,r([c({displayName:"Audio Clips",type:s})],t.prototype,"data",void 0),t=n=r([a],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],BackgroundSelection:[function(e,t,n){"use strict";cc._RF.push(t,"6a8d0wlrhZCuLbIhya+DUr7","BackgroundSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isOn=!1,t.checkNode=null,t._index=1,t}return o(t,e),Object.defineProperty(t.prototype,"isOn",{get:function(){return this._isOn},set:function(e){this._isOn=e,this._notify()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e},enumerable:!1,configurable:!0}),t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.MapBackgroundSelect,this)},t.prototype.setBackground=function(e,t){this.index=e,this.target.getComponent(cc.Sprite).spriteFrame=t},t.prototype._notify=function(){this.checkNode.active=this.isOn,this.interactable=!this.isOn},r([l],t.prototype,"_isOn",void 0),r([l],t.prototype,"isOn",null),r([l(cc.Node)],t.prototype,"checkNode",void 0),r([l],t.prototype,"_index",void 0),r([l],t.prototype,"index",null),t=r([s],t)}(cc.Button);n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],BackgroundSettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"af18fTLViRNnYYqJ6sMonXR","BackgroundSettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Prefabs/Tile/TilePreview/TilePreview"),s=e("../../../Scripts/Base/PanelComponent"),l=e("../../../Scripts/Base/SwitchButton"),u=e("../../../Scripts/Enum"),p=e("../../../Scripts/Manager/AudioManager"),f=e("../../../Scripts/Manager/EventManager"),d=e("../../../Scripts/Manager/ResManager"),h=e("../../../Scripts/Manager/UserManager"),y=e("../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview"),g=e("./BackgroundSelection"),_=cc._decorator,v=_.ccclass,b=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.miniBackgrounds=[],t.selections=[],t.backgroundSprite=null,t.okBtn=null,t.initialMapFrame=null,t.mapFrame=null,t.mapPreview=null,t.titleLabelOutline=null,t._isTutorialShowing=!1,t}return o(t,e),t.prototype.onLoad=function(){this._init(),f.default.getInstance().addEventListener(u.LevelDesignEvent.MapBackgroundSelect,this.handleBackgroundClicked,this)},t.prototype.onDestroy=function(){f.default.getInstance().offEventListener(u.LevelDesignEvent.MapBackgroundSelect,this.handleBackgroundClicked,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:this.okBtn.isOn=!1,this.initialMapFrame.active=!0,this.mapFrame.active=!1,this.titleLabelOutline.color=new cc.Color(49,132,16,255),this._initializeSelections(),t.label=1;case 1:return null!==d.default.getInstance()?[3,3]:[4,new Promise(function(e){return setTimeout(e,100)})];case 2:return t.sent(),[3,1];case 3:for(h.default.getInstance().isCurrentValid()||h.default.getInstance().loadTestUser(),h.default.getInstance().current.design.backgroundSettings||(f.default.getInstance().emitEvent(u.TutorialEvent.TutorialShown),this._isTutorialShowing=!0),this._initializeMap(),e=0;e<this.selections.length;e++)this.selections[e].interactable=!0;return this._checkModifyStatus(),[2]}})})},t.prototype._initializeMap=function(){var e=h.default.getInstance().current.design;this.mapPreview.mapSize=e.mapSettings.size;for(var t=e.initialMapTileTypeSettings.settings,n=this.mapPreview.slotSize,o=function(o){var i=t[o];if(i.x<e.mapSettings.size&&i.y<e.mapSettings.size){var a=e.blockDesignSettings.settings.find(function(e){return e.tileType===i.type});if(null!==a&&void 0!==a){var s=d.default.getInstance().tilePreviewPrefab,l=cc.instantiate(s);l.parent=r.mapPreview.node,l.active=!0,l.position=new cc.Vec3(i.x*n+n/2,-(i.y*n+n/2),0);var u=l.getComponent(c.default);u.setType(i.type),u.setCoord(i.coord,!1)}}},r=this,i=0;i<t.length;i++)o(i)},t.prototype._initializeSelections=function(){var e=[1,2,3,4,5,6];e=e.sort(function(){return.5-Math.random()});for(var t=function(t){var o=e[t];n.selections[t].setBackground(o,n.miniBackgrounds.find(function(e){return e.index===o}).frame),n.selections[t].isOn=!1,n.selections[t].interactable=!1},n=this,o=0;o<this.selections.length;o++)t(o)},t.prototype.handleBackgroundClicked=function(e){p.default.getInstance().playEffect("UI_BUTTON",!1),this.selections.forEach(function(t){return t.isOn=t===e}),this._updatePreview(e.index),this._checkModifyStatus(),this._isTutorialShowing&&(this._isTutorialShowing=!1,f.default.getInstance().emitEvent(u.TutorialEvent.TutorialClosed))},t.prototype.onOkClicked=function(){p.default.getInstance().playEffect("UI_BUTTON",!1);var e=this.selections.find(function(e){return!0===e.isOn});if(null!==e&&void 0!==e){var t={background:e.index};h.default.getInstance().current.design.backgroundSettings=t,h.default.getInstance().current.save(),f.default.getInstance().emitEvent(u.LevelDesignEvent.BackgroundDesignFinished)}},t.prototype._updatePreview=function(e){this.backgroundSprite.spriteFrame=d.default.getInstance().backgroundSources.find(function(t){return t.index===e}).frame,this.titleLabelOutline.color=this._getTitleOutlineColor(e)},t.prototype._checkModifyStatus=function(){var e=this.selections.find(function(e){return!0===e.isOn});null===e||void 0===e?this.okBtn.isOn=!1:(this.okBtn.isOn=!0,this.initialMapFrame.active=!1,this.mapFrame.active=!0)},t.prototype._getTitleOutlineColor=function(e){var t=cc.Color.WHITE;switch(e){case 1:t=new cc.Color(62,52,50,255);break;case 2:t=new cc.Color(56,42,103,255);break;case 3:t=new cc.Color(77,66,51,255);break;case 4:t=new cc.Color(47,131,163,255);break;case 5:t=new cc.Color(56,42,103,255);break;case 6:t=new cc.Color(47,131,163,255);break;default:t=new cc.Color(62,52,50,255)}return t},r([b(d.BackgroundSource)],t.prototype,"miniBackgrounds",void 0),r([b(g.default)],t.prototype,"selections",void 0),r([b(cc.Sprite)],t.prototype,"backgroundSprite",void 0),r([b(l.default)],t.prototype,"okBtn",void 0),r([b(cc.Node)],t.prototype,"initialMapFrame",void 0),r([b(cc.Node)],t.prototype,"mapFrame",void 0),r([b(y.default)],t.prototype,"mapPreview",void 0),r([b(cc.LabelOutline)],t.prototype,"titleLabelOutline",void 0),t=r([v],t)}(s.default);n.default=m,cc._RF.pop()},{"../../../Prefabs/Tile/TilePreview/TilePreview":"TilePreview","../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview":"MapBoxPreview","./BackgroundSelection":"BackgroundSelection"}],BackgroundSettingScene:[function(e,t,n){"use strict";cc._RF.push(t,"bd1b7lnEdRBTLmh55EoNtjU","BackgroundSettingScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Enum"),c=e("../../Scripts/Manager/AudioManager"),s=e("../../Scripts/Manager/EventManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),s.default.getInstance().addEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.BackgroundDesignFinished,this.handleDesignEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialClosed,this.handleTutorialClosed,this)},t.prototype.onDestroy=function(){s.default.getInstance().offEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.BackgroundDesignFinished,this.handleDesignEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().offEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this),s.default.getInstance().offEventListener(a.TutorialEvent.TutorialClosed,this.handleTutorialClosed,this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleDesignEnded=function(){c.default.getInstance().playEffect("STEP_COMPLETE",!1),this.setPanelVisible("complete",!0)},t.prototype.handleNextButtonClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t.prototype.handleTutorialClosed=function(){this.setPanelVisible("tutorial",!1)},t=r([u],t)}(i.default));n.default=p,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager"}],BaseClearEffect:[function(e,t,n){"use strict";cc._RF.push(t,"a94f6q6ywJKyIwexIJ/NTD+","BaseClearEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseClearEffect=void 0;var i=e("./BaseEffect"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._audioId=0,t}return o(t,e),t.prototype.onDisable=function(){0!==this._audioId&&cc.audioEngine.stopEffect(this._audioId)},t.prototype.play=function(){},t.prototype.playEffectSound=function(){this._audioId=cc.audioEngine.playEffect(this.awakeAudio,!0)},t=r([c],t)}(i.BaseEffect));n.BaseClearEffect=s,cc._RF.pop()},{"./BaseEffect":"BaseEffect"}],BaseEffect:[function(e,t,n){"use strict";cc._RF.push(t,"3a3f4MmmGpOH7DSjYkVrNue","BaseEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseEffect=void 0;var i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playOnAwake=!0,t.destroyOnFinish=!1,t.awakeAudio=null,t}return o(t,e),r([c],t.prototype,"playOnAwake",void 0),r([c],t.prototype,"destroyOnFinish",void 0),r([c(cc.AudioClip)],t.prototype,"awakeAudio",void 0),t=r([a],t)}(cc.Component);n.BaseEffect=s,cc._RF.pop()},{}],BigBlockPreview:[function(e,t,n){"use strict";cc._RF.push(t,"5bd6ccEIcVDDrXgeQLDnUaD","BigBlockPreview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/GameUtil"),c=e("../../../../Scripts/Manager/EventManager"),s=e("./BigBlockTouchLayer"),l=cc._decorator,u=l.ccclass,p=l.property,f=(l.requireComponent,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockType=i.BlockType.Rabbit,t.backgroundLayer=null,t.mainLayer=null,t.subLayer=null,t._selectedLayer=i.BlockLayerType.Background,t}return o(t,e),Object.defineProperty(t.prototype,"selectedLayer",{get:function(){return this._selectedLayer},set:function(e){this._selectedLayer=e,this._updateLayerSelected()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.initialize=function(e){cc.log("BigBlockPreview::initialize ",e),this.backgroundLayer.setColor(a.ColorUtil.getColor(e.backgroundColor)),this.mainLayer.setColor(a.ColorUtil.getColor(e.characterMainColor)),this.subLayer.setColor(a.ColorUtil.getColor(e.characterSubColor)),this.selectedLayer=null,this._updateLayerSelected()},t.prototype.setSelectedLayerColor=function(e){switch(this._selectedLayer){case i.BlockLayerType.Background:this.backgroundLayer.setColor(e);break;case i.BlockLayerType.CharacterMain:this.mainLayer.setColor(e);break;case i.BlockLayerType.CharacterSub:this.subLayer.setColor(e)}},t.prototype.isReady=function(){return!(this.backgroundLayer.color.equals(cc.Color.WHITE)||this.mainLayer.color.equals(cc.Color.WHITE)||this.subLayer.color.equals(cc.Color.WHITE))},t.prototype.handleTouchStart=function(e){var t=e.getLocation();this.subLayer.isContainPoint(t)?(this.selectedLayer=i.BlockLayerType.CharacterSub,c.default.getInstance().emitEvent(i.LevelDesignEvent.BlockLayerClick)):this.mainLayer.isContainPoint(t)?(this.selectedLayer=i.BlockLayerType.CharacterMain,c.default.getInstance().emitEvent(i.LevelDesignEvent.BlockLayerClick)):this.backgroundLayer.isContainPoint(t)&&(this.selectedLayer=i.BlockLayerType.Background,c.default.getInstance().emitEvent(i.LevelDesignEvent.BlockLayerClick))},t.prototype._updateLayerSelected=function(){null!==this._selectedLayer&&void 0!==this._selectedLayer&&(this.backgroundLayer.setSelected(this._selectedLayer===i.BlockLayerType.Background),this.mainLayer.setSelected(this._selectedLayer===i.BlockLayerType.CharacterMain),this.subLayer.setSelected(this._selectedLayer===i.BlockLayerType.CharacterSub))},r([p({displayName:"Type",type:cc.Enum(i.BlockType)})],t.prototype,"blockType",void 0),r([p(s.default)],t.prototype,"backgroundLayer",void 0),r([p(s.default)],t.prototype,"mainLayer",void 0),r([p(s.default)],t.prototype,"subLayer",void 0),t=r([u],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/GameUtil":"GameUtil","../../../../Scripts/Manager/EventManager":"EventManager","./BigBlockTouchLayer":"BigBlockTouchLayer"}],BigBlockTouchLayer:[function(e,t,n){"use strict";cc._RF.push(t,"6d228qcpulAgJ1eV3ltfauH","BigBlockTouchLayer");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./BlockLayer"),a=cc._decorator,c=a.ccclass,s=a.property,l=(a.requireComponent,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayLine=null,t.greeLine=null,t.colliders=[],t._color=cc.Color.WHITE,t}return o(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.color=this.color,null!==this.grayLine&&(this.grayLine.color=new cc.Color(255,255,255,255)),null!==this.greeLine&&(this.greeLine.color=new cc.Color(255,255,255,255))},t.prototype.setColor=function(e){e.equals(cc.Color.WHITE)?(this.setGrayVisible(!0),this.setGreenVisible(!1)):(this.setGrayVisible(!1),this.setGreenVisible(!1)),this.color=e,this.node.color=e},t.prototype.isContainPoint=function(e){for(var t=0;t<this.colliders.length;t++){var n=this.colliders[t],o=n.node.convertToNodeSpaceAR(e);if(cc.Intersection.pointInPolygon(o,n.world.points))return!0}return!1},t.prototype.setGrayVisible=function(e){null!==this.grayLine&&(this.grayLine.active=e)},t.prototype.setGreenVisible=function(e){null!==this.greeLine&&(this.greeLine.active=e)},t.prototype.setSelected=function(e){var t=this.color.equals(cc.Color.WHITE),n=new cc.Color(219,253,190,255);e?t?(this.grayLine.active=!0,this.grayLine.color=n,this.greeLine.active=!0):(this.grayLine.active=!1,this.grayLine.color=this.color,this.greeLine.active=!0):(this.node.color=this.color,t?(this.grayLine.color=cc.Color.WHITE,this.grayLine.active=!0):this.grayLine.active=!1,this.greeLine.active=!1)},r([s(cc.Node)],t.prototype,"grayLine",void 0),r([s(cc.Node)],t.prototype,"greeLine",void 0),r([s(cc.PolygonCollider)],t.prototype,"colliders",void 0),t=r([c],t)}(i.default));n.default=l,cc._RF.pop()},{"./BlockLayer":"BlockLayer"}],BlockDesignPanel:[function(e,t,n){"use strict";cc._RF.push(t,"28b59ztyj1CoYpnqaWHMzJo","BlockDesignPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./SlotSelection"),s=e("./Palette"),l=e("./MiniBlock"),u=e("./BigBlockPreview"),p=e("../../../../Scripts/Enum"),f=e("../../../../Scripts/Manager/EventManager"),d=e("../../../../Scripts/Base/PanelComponent"),h=e("../../../../Scripts/LevelDesign"),y=e("../../../../Scripts/GameUtil"),g=e("../../../../Scripts/Base/SwitchButton"),_=e("../../../../Scripts/Popups/Toast"),v=e("../../../../Scripts/Manager/UserManager"),b=e("../../../../Scripts/Manager/ResManager"),m=e("../../../../Scripts/Manager/AudioManager"),E=cc._decorator,S=E.ccclass,P=E.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slotSelections=[],t.miniBlocks=[],t.miniBlockLayout=null,t.miniBlockArrow=null,t.bigBlockLayout=null,t.palette=null,t.backgroundColors=[],t.mainColors=[],t.subColors=[],t.okBtn=null,t.cancelBtn=null,t._currentBigBlock=null,t._map=new Map,t._tileType=null,t._design=null,t}return o(t,e),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),t.prototype.start=function(){this._init(),f.default.getInstance().addEventListener(p.LevelDesignEvent.SlotSelect,this.handleSlotClicked,this),f.default.getInstance().addEventListener(p.LevelDesignEvent.IconSelect,this.handleMiniBlockClicked,this),f.default.getInstance().addEventListener(p.LevelDesignEvent.ColorSelect,this.handleColorClicked,this),f.default.getInstance().addEventListener(p.LevelDesignEvent.BlockLayerClick,this.handleLayerClicked,this),f.default.getInstance().addEventListener(p.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDestroy=function(){f.default.getInstance().offEventListener(p.LevelDesignEvent.SlotSelect,this.handleSlotClicked,this),f.default.getInstance().offEventListener(p.LevelDesignEvent.IconSelect,this.handleMiniBlockClicked,this),f.default.getInstance().offEventListener(p.LevelDesignEvent.ColorSelect,this.handleColorClicked,this),f.default.getInstance().offEventListener(p.LevelDesignEvent.BlockLayerClick,this.handleLayerClicked,this),f.default.getInstance().offEventListener(p.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:this._map.set(p.TileType.A,null),this._map.set(p.TileType.B,null),this._map.set(p.TileType.C,null),this._map.set(p.TileType.D,null),this.miniBlockLayout.active=!1,this.bigBlockLayout.active=!1,t.label=1;case 1:return b.default.getInstance()?[3,3]:[4,new Promise(function(e){return setTimeout(e,100)})];case 2:return t.sent(),[3,1];case 3:return v.default.getInstance().isCurrentValid()||v.default.getInstance().loadTestUser(),v.default.getInstance().current.design.blockDesignSettings?(cc.log("load blockDesignSettings"),v.default.getInstance().current.design.blockDesignSettings.settings.forEach(function(t){var n=JSON.parse(JSON.stringify(t));if(e._map.set(t.tileType,n),null!==n&&void 0!==n){var o=e.slotSelections.find(function(e){return e.type===t.tileType}),r=b.default.getInstance().getMiddleBlockPrefab(n.blockType);o&&r&&o.initializeBlock(n,r)}})):(cc.log("show tutorial"),f.default.getInstance().emitEvent(p.TutorialEvent.TutorialShown)),this.cancelBtn.node.active=!1,this.okBtn.node.active=!0,this._notifyDesign(),this._updateMiniBlockStatus(),[2]}})})},t.prototype.onOkClicked=function(){var e=this;if(!this.okBtn.isOn){var t=cc.instantiate(b.default.getInstance().toastPrefab);t.parent=this.node.parent;var n=t.getComponent(_.default);return n.destroyWhenHide=!0,n.setMessage("\ube14\ub85d\uc774 \ub2e4 \ub9cc\ub4e4\uc5b4 \uc9c0\uc9c0 \uc54a\uc558\uc5b4\uc694!\n\ube14\ub85d\uc744 \ubaa8\ub450 \uc0c9\uce60\ud574 \uc8fc\uc138\uc694!"),void n.show()}if(m.default.getInstance().playEffect("UI_BUTTON",!1),null!==this._tileType&&void 0!==this._tileType){var o=JSON.parse(JSON.stringify(this._design));o.tileType=this._tileType,this._map.set(this._tileType,o),cc.log("save map > ",this._map);var r=this.slotSelections.find(function(t){return t.type===e._tileType}),i=b.default.getInstance().getMiddleBlockPrefab(this._design.blockType);r&&i&&r.initializeBlock(this._design,i)}this._design=null,this._tileType=null,this._notifyDesign();var a=!0;this._map.forEach(function(e,t){null!==e&&void 0!==e||(a=!1)}),a&&(this.slotSelections.forEach(function(e){return e.isChecking=!0}),f.default.getInstance().emitEvent(p.LevelDesignEvent.BlockDesignFinished,this),this.okBtn.node.active=!1,this.cancelBtn.node.active=!1)},t.prototype.onCancelClicked=function(){var e=this,t=this.slotSelections.find(function(t){return t.type===e._tileType});t&&(t.isChecking=!1),this._design=null,this._tileType=null,this._notifyDesign(),m.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.handleSlotClicked=function(e){var t=this;this._tileType=e.type,this.slotSelections.forEach(function(e){e.isChecking=e.type===t._tileType}),this._map.has(this._tileType)&&(this._design=JSON.parse(JSON.stringify(this._map.get(this._tileType)))),cc.log("load block design > ",this._design),null===this._design||void 0===this._design?(this._design=h.getBlockDesign(),cc.log("...create empty block design")):this.showBlockPreview(),cc.log("design: ",this._design),this._notifyDesign(),m.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.showBlockPreview=function(){this._hideBigBlock(),this.bigBlockLayout.active=!0;var e=b.default.getInstance().getBigBlockPrefab(this._design.blockType);if(null!==e&&void 0!==e){var t=cc.instantiate(e);t.active=!0,t.parent=this.bigBlockLayout;var n=t.getComponent(u.default);this._currentBigBlock=n}this._currentBigBlock.node.position=new cc.Vec3(0,0,0),this._currentBigBlock.initialize(this._design)},t.prototype.handleMiniBlockClicked=function(e){this._design.blockType=e.blockType,this.showBlockPreview(),this._notifyDesign(),m.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.handleLayerClicked=function(){switch(this._currentBigBlock.selectedLayer){case p.BlockLayerType.Background:this.palette.initialize(this.backgroundColors);break;case p.BlockLayerType.CharacterMain:this.palette.initialize(this.mainColors);break;case p.BlockLayerType.CharacterSub:this.palette.initialize(this.subColors)}this.palette.node.active=!0,this._updatePalette(),m.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.handleColorClicked=function(e){switch(this.palette.setSelectedColorButton(e),this._currentBigBlock.selectedLayer){case p.BlockLayerType.Background:this._design.backgroundColor=y.ColorUtil.getHex(e.color);break;case p.BlockLayerType.CharacterMain:this._design.characterMainColor=y.ColorUtil.getHex(e.color);break;case p.BlockLayerType.CharacterSub:this._design.characterSubColor=y.ColorUtil.getHex(e.color)}this._currentBigBlock.setSelectedLayerColor(e.color),this._notifyDesign(),m.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype._updatePalette=function(){var e=this;if(this._currentBigBlock){var t=[];this._map.forEach(function(n,o){if(o!==e._tileType&&null!==n&&void 0!==n)switch(e._currentBigBlock.selectedLayer){case p.BlockLayerType.Background:t.push(y.ColorUtil.getColor(n.backgroundColor));break;case p.BlockLayerType.CharacterMain:t.push(y.ColorUtil.getColor(n.characterMainColor));break;case p.BlockLayerType.CharacterSub:t.push(y.ColorUtil.getColor(n.characterSubColor))}}),this.palette.setUsedColors(t)}},t.prototype._updateMiniBlockStatus=function(){var e=this;if(this._design&&(null!==this._design.blockType&&void 0!==this._design.blockType||(this.miniBlockArrow.active=!1)),this.miniBlocks.forEach(function(t){e._design&&e._design.blockType===t.blockType?(t.blockStatus=1,e.miniBlockArrow.active=!0,e.miniBlockArrow.parent=t.node,e.miniBlockArrow.position=new cc.Vec3(0,120,0)):t.blockStatus=0}),this._map.forEach(function(t,n){if(null!==t&&void 0!==t){var o=e.miniBlocks.find(function(e){return e.blockType===t.blockType});null!==o&&void 0!==o&&(o.blockStatus=2)}}),null!==this._design&&void 0!==this._design&&null!==this._design.blockType&&void 0!==this._design.blockType){var t=this.miniBlocks.find(function(t){return t.blockType===e._design.blockType});null!==t&&void 0!==t&&(t.blockStatus=1)}},t.prototype._notifyDesign=function(){null===this._design||void 0===this._design?(this.miniBlockLayout.active=!1,this._hideBigBlock(),this.palette.node.active=!1,this._checkDesignStatus(),this._updateMiniBlockStatus()):(this.miniBlockLayout.active||(this.miniBlockLayout.active=!0),this._updateMiniBlockStatus(),null===this._design.blockType||void 0===this._design.blockType?(this._hideBigBlock(),this.palette.node.active=!1,this.okBtn.isOn=!1,this.cancelBtn.node.active=!1):(this.bigBlockLayout.active||(this.bigBlockLayout.active=!0),this._updatePalette(),this._checkDesignStatus()))},t.prototype._hideBigBlock=function(){this.bigBlockLayout.active=!1,this._currentBigBlock&&(this._currentBigBlock.node.destroy(),this._currentBigBlock=null)},t.prototype._checkDesignStatus=function(){this.cancelBtn.node.active=!1;var e=!0;this._map.forEach(function(t,n){null!==t&&void 0!==t||(e=!1)}),!e&&this._currentBigBlock&&(e=this._currentBigBlock.isReady()),this.okBtn.isOn=e,null!==this._map.get(this._tileType)&&void 0!==this._map.get(this._tileType)&&(this.cancelBtn.node.active=!0)},t.prototype.handleTutorialCompleted=function(e,t){if(0===e)this.handleSlotClicked(this.slotSelections[0]);else if(1===e){var n=p.BlockType[t],o=this.miniBlocks.find(function(e){return e.blockType===n});this.handleMiniBlockClicked(o)}else 2===e?(this._currentBigBlock.selectedLayer=p.BlockLayerType.Background,this.handleLayerClicked()):3===e?this.handleColorClicked(this.palette.getColorButton(this.backgroundColors[parseInt(t)])):4===e?(this._currentBigBlock.selectedLayer=p.BlockLayerType.CharacterMain,this.handleLayerClicked()):5===e?this.handleColorClicked(this.palette.getColorButton(this.mainColors[parseInt(t)])):6===e?(this._currentBigBlock.selectedLayer=p.BlockLayerType.CharacterSub,this.handleLayerClicked()):7===e?this.handleColorClicked(this.palette.getColorButton(this.subColors[parseInt(t)])):8===e?this.onOkClicked():9===e&&this.handleSlotClicked(this.slotSelections[parseInt(t)-1])},r([P(c.default)],t.prototype,"slotSelections",void 0),r([P(l.default)],t.prototype,"miniBlocks",void 0),r([P(cc.Node)],t.prototype,"miniBlockLayout",void 0),r([P(cc.Node)],t.prototype,"miniBlockArrow",void 0),r([P(cc.Node)],t.prototype,"bigBlockLayout",void 0),r([P(s.default)],t.prototype,"palette",void 0),r([P(cc.Color)],t.prototype,"backgroundColors",void 0),r([P(cc.Color)],t.prototype,"mainColors",void 0),r([P(cc.Color)],t.prototype,"subColors",void 0),r([P(g.default)],t.prototype,"okBtn",void 0),r([P(g.default)],t.prototype,"cancelBtn",void 0),t=r([S],t)}(d.default);n.default=C,cc._RF.pop()},{"../../../../Scripts/Base/PanelComponent":"PanelComponent","../../../../Scripts/Base/SwitchButton":"SwitchButton","../../../../Scripts/Enum":"Enum","../../../../Scripts/GameUtil":"GameUtil","../../../../Scripts/LevelDesign":"LevelDesign","../../../../Scripts/Manager/AudioManager":"AudioManager","../../../../Scripts/Manager/EventManager":"EventManager","../../../../Scripts/Manager/ResManager":"ResManager","../../../../Scripts/Manager/UserManager":"UserManager","../../../../Scripts/Popups/Toast":"Toast","./BigBlockPreview":"BigBlockPreview","./MiniBlock":"MiniBlock","./Palette":"Palette","./SlotSelection":"SlotSelection"}],BlockLayer:[function(e,t,n){"use strict";cc._RF.push(t,"3b18bdZQpNFl4QutmbNq2vx","BlockLayer");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/GameUtil"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.setColor=function(e){if("string"==typeof e){var t=i.ColorUtil.getColor(e);this.node.color=t}else this.node.color=e},t=r([c],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../../Scripts/GameUtil":"GameUtil"}],Block:[function(e,t,n){"use strict";cc._RF.push(t,"7ba8afK4EJLXZTZMl5XfuRi","Block");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/GameUtil"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockType=i.BlockType.Bear,t.backgroundLayer=null,t.mainLayer=null,t.subLayer=null,t}return o(t,e),t.prototype.initialize=function(e){this.backgroundLayer.node.color=a.ColorUtil.getColor(e.backgroundColor),this.mainLayer.node.color=a.ColorUtil.getColor(e.characterMainColor),this.subLayer.node.color=a.ColorUtil.getColor(e.characterSubColor)},r([l({displayName:"Type",type:cc.Enum(i.BlockType)})],t.prototype,"blockType",void 0),r([l(cc.Sprite)],t.prototype,"backgroundLayer",void 0),r([l(cc.Sprite)],t.prototype,"mainLayer",void 0),r([l(cc.Sprite)],t.prototype,"subLayer",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/GameUtil":"GameUtil"}],CertificationPopup:[function(e,t,n){"use strict";cc._RF.push(t,"fc702ZDi6ZEA6mrp62jPu2f","CertificationPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./UserTableRow"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.certificateNameLabel=null,t.certificateDateLabel=null,t.row=null,t}return o(t,e),t.prototype.onEnable=function(){this.node.setSiblingIndex(-1)},t.prototype.set=function(e,t,n){this.row.setItemData(e.order,e.uid,e.date,e.name,function(){},t,n),this.certificateNameLabel.string=e.name;var o=new Date(e.createdOnDate),r=o.getFullYear(),i=o.getMonth()+1,a=o.getDate();this.certificateDateLabel.string=cc.js.formatStr("%s\ub144 %s\uc6d4 %s\uc77c",r,i<10?"0"+i:i,a)},t.prototype.onPrintClicked=function(){window.onbeforeprint=function(){},window.onafterprint=function(){},window.print()},t.prototype.onCloseClicked=function(){this.node.active=!1},r([s(cc.Label)],t.prototype,"certificateNameLabel",void 0),r([s(cc.Label)],t.prototype,"certificateDateLabel",void 0),r([s(i.default)],t.prototype,"row",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./UserTableRow":"UserTableRow"}],ClearCharacterSelection:[function(e,t,n){"use strict";cc._RF.push(t,"40515+NDQhP67XQX0ZgS+OQ","ClearCharacterSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Manager/EventManager"),a=e("../../../Scripts/Enum"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.requireComponent,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isOn=!1,t.targetSprite=null,t.onFrame=null,t.offFrame=null,t.type=a.ClearCharacterType.Rabbit,t}return o(t,e),Object.defineProperty(t.prototype,"isOn",{get:function(){return this._isOn},set:function(e){this._isOn=e,this._notifyButton()},enumerable:!1,configurable:!0}),t.prototype.setSelected=function(e){this.getComponent(cc.Button).interactable=!e},t.prototype.onClicked=function(){i.default.getInstance().emitEvent(a.LevelDesignEvent.ClearCharacterAnimSelect,this)},t.prototype._notifyButton=function(){this.targetSprite.spriteFrame=this.isOn?this.onFrame:this.offFrame,this.getComponent(cc.Button).interactable=!this.isOn},r([l],t.prototype,"_isOn",void 0),r([l],t.prototype,"isOn",null),r([l(cc.Sprite)],t.prototype,"targetSprite",void 0),r([l(cc.SpriteFrame)],t.prototype,"onFrame",void 0),r([l(cc.SpriteFrame)],t.prototype,"offFrame",void 0),r([l({displayName:"Character",type:cc.Enum(a.ClearCharacterType)})],t.prototype,"type",void 0),t=r([s,u(cc.Button)],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],ClearEffectPreivew:[function(e,t,n){"use strict";cc._RF.push(t,"71cbblhqoNKjZRfXrjgYAbR","ClearEffectPreivew");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Prefabs/Effects/Scripts/BaseClearEffect"),a=e("../../../Prefabs/Effects/Scripts/ClearEffect_CharacterAnimation"),c=e("../../../Scripts/Enum"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(){function e(){this.type=c.ClearEffectType.ClearEffect_Ballon,this.node=null}return r([u({type:cc.Enum(c.ClearEffectType)})],e.prototype,"type",void 0),r([u(cc.Node)],e.prototype,"node",void 0),e=r([l("Effect")],e)}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effectObjects=[],t.characterAnimas=[],t.dimNode=null,t.playNode=null,t.previewStaticSprite=null,t.rabbitFrame=null,t.sheepFrame=null,t.bearFrame=null,t._characterType=null,t._effectType=null,t}return o(t,e),t.prototype.onLoad=function(){this.characterAnimas.forEach(function(e){return e.node.active=!1}),this.effectObjects.forEach(function(e){return e.node.active=!1})},t.prototype.setCharacter=function(e){this.stopPlay(),this._characterType=e,this.setStaticPreview(this._characterType)},t.prototype.setEffect=function(e){this.stopPlay(),this._effectType=e},t.prototype.play=function(){var e=this;if(null!==this._characterType&&void 0!==this._characterType&&null!==this._effectType&&void 0!==this._effectType){this.dimNode.active=!1,this.playNode.active=!1,this.setStaticPreview(-1);var t=this.characterAnimas.find(function(t){return t.type===e._characterType});t&&(t.node.active=!0,t.play(this.handlePlayCompleted.bind(this)));var n=this.effectObjects.find(function(t){return t.type===e._effectType});if(n){n.node.active=!0;var o=n.node.getComponent(i.BaseClearEffect);null===o||void 0===o||o.play(),null===o||void 0===o||o.playEffectSound()}}},t.prototype.stopPlay=function(){this.handlePlayCompleted()},t.prototype.handlePlayCompleted=function(){this.characterAnimas.forEach(function(e){e.stopAnimation(),e.node.active=!1}),this.effectObjects.forEach(function(e){return e.node.active=!1}),this.dimNode.active=!0,this.playNode.active=!0,this.setStaticPreview(this._characterType)},t.prototype.setStaticPreview=function(e){switch(e){case c.ClearCharacterType.Rabbit:this.previewStaticSprite.node.opacity=255,this.previewStaticSprite.spriteFrame=this.rabbitFrame;break;case c.ClearCharacterType.Sheep:this.previewStaticSprite.node.opacity=255,this.previewStaticSprite.spriteFrame=this.sheepFrame;break;case c.ClearCharacterType.Bear:this.previewStaticSprite.node.opacity=255,this.previewStaticSprite.spriteFrame=this.bearFrame;break;default:this.previewStaticSprite.node.opacity=0}},r([u(p)],t.prototype,"effectObjects",void 0),r([u(a.ClearEffect_CharacterAnimation)],t.prototype,"characterAnimas",void 0),r([u(cc.Node)],t.prototype,"dimNode",void 0),r([u(cc.Node)],t.prototype,"playNode",void 0),r([u(cc.Sprite)],t.prototype,"previewStaticSprite",void 0),r([u(cc.SpriteFrame)],t.prototype,"rabbitFrame",void 0),r([u(cc.SpriteFrame)],t.prototype,"sheepFrame",void 0),r([u(cc.SpriteFrame)],t.prototype,"bearFrame",void 0),t=r([l],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Prefabs/Effects/Scripts/BaseClearEffect":"BaseClearEffect","../../../Prefabs/Effects/Scripts/ClearEffect_CharacterAnimation":"ClearEffect_CharacterAnimation","../../../Scripts/Enum":"Enum"}],ClearEffectSelection:[function(e,t,n){"use strict";cc._RF.push(t,"188614CyWRB14qbP29zVrtW","ClearEffectSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.requireComponent,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ClearEffectType.ClearEffect_Ballon,t._isOn=!1,t.checkNode=null,t.button=null,t}return o(t,e),Object.defineProperty(t.prototype,"isOn",{get:function(){return this._isOn},set:function(e){this._isOn=e,this._notify()},enumerable:!1,configurable:!0}),t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.ClearEffectSelect,this)},t.prototype._notify=function(){this.checkNode.active=this.isOn,this.button.interactable=!this.isOn},r([l({displayName:"Clear Effect",type:cc.Enum(i.ClearEffectType)})],t.prototype,"type",void 0),r([l],t.prototype,"_isOn",void 0),r([l],t.prototype,"isOn",null),r([l(cc.Node)],t.prototype,"checkNode",void 0),r([l(cc.Button)],t.prototype,"button",void 0),t=r([s,u(cc.Button)],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],ClearEffect_CharacterAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"86dc4nEm59BWrr2WoC5IuiM","ClearEffect_CharacterAnimation");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ClearEffect_CharacterAnimation=void 0;var i=e("../../../Scripts/Enum"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ClearCharacterType.Rabbit,t.animationName="",t.onCompleteEvent=[],t._skeleton=null,t}return o(t,e),Object.defineProperty(t.prototype,"Skeleton",{get:function(){return null!==this._skeleton&&void 0!==this._skeleton||(this._skeleton=this.getComponent(sp.Skeleton)),this._skeleton},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.Skeleton.clearTracks()},t.prototype.play=function(e){this.Skeleton.setAnimation(0,this.animationName,!1),this.Skeleton.setCompleteListener(e)},t.prototype.stopAnimation=function(){this.Skeleton.clearTracks()},r([s({type:cc.Enum(i.ClearCharacterType)})],t.prototype,"type",void 0),r([s],t.prototype,"animationName",void 0),r([s(cc.Component.EventHandler)],t.prototype,"onCompleteEvent",void 0),t=r([c],t)}(cc.Component);n.ClearEffect_CharacterAnimation=l,cc._RF.pop()},{"../../../Scripts/Enum":"Enum"}],ClearEffect_Firework:[function(e,t,n){"use strict";cc._RF.push(t,"ba2c17HQE9On5jYdIisWJc8","ClearEffect_Firework");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ClearEffect_Firework=void 0;var i=e("../ClearEffect/Firework/FireworkEmiter"),a=e("./BaseClearEffect"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emitters=[],t}return o(t,e),t.prototype.play=function(){for(var e=0;e<this.emitters.length;e++)this.emitters[e].emit()},r([l(i.FireworkEmitter)],t.prototype,"emitters",void 0),t=r([s],t)}(a.BaseClearEffect);n.ClearEffect_Firework=u,cc._RF.pop()},{"../ClearEffect/Firework/FireworkEmiter":"FireworkEmiter","./BaseClearEffect":"BaseClearEffect"}],ClearEffect:[function(e,t,n){"use strict";cc._RF.push(t,"bb2a1BSJHNK844RwHokEB6e","ClearEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Prefabs/Effects/Scripts/BaseClearEffect"),a=e("../../../Prefabs/Effects/Scripts/ClearEffect_CharacterAnimation"),c=e("../../../Scripts/Enum"),s=e("../../../Scripts/Manager/UserManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(){function e(){this.type=c.ClearEffectType.ClearEffect_Ballon,this.prefab=null}return r([p({type:cc.Enum(c.ClearEffectType)})],e.prototype,"type",void 0),r([p(cc.Prefab)],e.prototype,"prefab",void 0),e=r([u("Effect Prefab")],e)}(),d=function(){function e(){this.type=c.ClearCharacterType.Rabbit,this.prefab=null}return r([p({type:cc.Enum(c.ClearCharacterType)})],e.prototype,"type",void 0),r([p(cc.Prefab)],e.prototype,"prefab",void 0),e=r([u("Character Prefab")],e)}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.characterPrefabs=[],t.effectPrefabs=[],t.characterContainer=null,t.particleContainer=null,t._characterAnim=null,t._effectNode=null,t}return o(t,e),t.prototype.onEnable=function(){var e=s.default.getInstance().current.design.clearEffectSettings.characterType,t=s.default.getInstance().current.design.clearEffectSettings.effectType;this._initializeCharacterAnim(e),this._initializeClearEffect(t)},t.prototype._initializeCharacterAnim=function(e){this._characterAnim&&(this._characterAnim.node.destroy(),this._characterAnim=null);var t=this.characterPrefabs.find(function(t){return t.type===e});if(t){var n=cc.instantiate(t.prefab);n.parent=this.characterContainer,e===c.ClearCharacterType.Rabbit?(n.scale=.9,n.position=new cc.Vec3(0,-431.405,0)):(n.scale=1,n.position=new cc.Vec3(0,-260,0)),this._characterAnim=n.getComponent(a.ClearEffect_CharacterAnimation)}},t.prototype._initializeClearEffect=function(e){this._effectNode&&(this._effectNode.destroy(),this._effectNode=null);var t=this.effectPrefabs.find(function(t){return t.type===e});if(t){var n=cc.instantiate(t.prefab);n.parent=this.particleContainer,n.position=new cc.Vec3(0,0,0),this._effectNode=n;var o=n.getComponent(i.BaseClearEffect);o.play(),o.playEffectSound()}},t.prototype.show=function(e){this._characterAnim.play(e)},r([p(d)],t.prototype,"characterPrefabs",void 0),r([p(f)],t.prototype,"effectPrefabs",void 0),r([p(cc.Node)],t.prototype,"characterContainer",void 0),r([p(cc.Node)],t.prototype,"particleContainer",void 0),t=r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Prefabs/Effects/Scripts/BaseClearEffect":"BaseClearEffect","../../../Prefabs/Effects/Scripts/ClearEffect_CharacterAnimation":"ClearEffect_CharacterAnimation","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/UserManager":"UserManager"}],ClearPlaySettingScene:[function(e,t,n){"use strict";cc._RF.push(t,"5b7bdYX7JNI245v1ahQklmA","ClearPlaySettingScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Enum"),c=e("../../Scripts/Manager/AudioManager"),s=e("../../Scripts/Manager/EventManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),s.default.getInstance().addEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.ClearEffectDesignFinished,this.handleDesignEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.onDestroy=function(){s.default.getInstance().offEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.MatchEffectDesignFinished,this.handleDesignEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().offEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleDesignEnded=function(){c.default.getInstance().playEffect("STEP_COMPLETE",!1),this.setPanelVisible("complete",!0)},t.prototype.handleNextButtonClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t=r([u],t)}(i.default));n.default=p,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager"}],ClearPopup:[function(e,t,n){"use strict";cc._RF.push(t,"bda35sDOudBQKu9qFqQzU2p","ClearPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Game/GameManager"),a=e("../../../Scripts/Manager/AudioManager"),c=e("./ClearEffect"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupNode=null,t.clearEffect=null,t.scoreLabel=null,t.onRetryClickedEvent=[],t.onCompleteClickedEvent=[],t}return o(t,e),t.prototype.show=function(){var e=this;this.node.active=!0,this.scoreLabel.string=i.default.instance.score.toString(),this.popupNode.active=!1,this.clearEffect.node.active=!0,this.clearEffect.show(function(){e.clearEffect.node.active=!1,e.popupNode.active=!0})},t.prototype.hide=function(){this.node.active=!1},t.prototype.onRetryClicked=function(){a.default.getInstance().playEffect("UI_BUTTON",!1),this.onRetryClickedEvent.forEach(function(e){return e.emit([])}),this.hide()},t.prototype.onCompleteClicked=function(){a.default.getInstance().playEffect("UI_BUTTON",!1),this.onCompleteClickedEvent.forEach(function(e){return e.emit([])}),this.hide()},r([u(cc.Node)],t.prototype,"popupNode",void 0),r([u(c.default)],t.prototype,"clearEffect",void 0),r([u(cc.Label)],t.prototype,"scoreLabel",void 0),r([u(cc.Component.EventHandler)],t.prototype,"onRetryClickedEvent",void 0),r([u(cc.Component.EventHandler)],t.prototype,"onCompleteClickedEvent",void 0),t=r([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scripts/Game/GameManager":"GameManager","../../../Scripts/Manager/AudioManager":"AudioManager","./ClearEffect":"ClearEffect"}],ClearSettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"ebca8wPRARPdYBXusqchgg0","ClearSettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Manager/EventManager"),s=e("../../../Scripts/Base/PanelComponent"),l=e("../../../Scripts/Enum"),u=e("./ClearCharacterSelection"),p=e("./ClearEffectSelection"),f=e("../../../Scripts/Base/SwitchButton"),d=e("../../../Scripts/Manager/ResManager"),h=e("../../../Scripts/Manager/UserManager"),y=e("./ClearEffectPreivew"),g=e("../../../Scripts/Manager/AudioManager"),_=cc._decorator,v=_.ccclass,b=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.characterSelections=[],t.effectSelections=[],t.okBtn=null,t.preview=null,t._settings={},t}return o(t,e),t.prototype.onLoad=function(){this._init(),c.default.getInstance().addEventListener(l.LevelDesignEvent.ClearCharacterAnimSelect,this.handleCharacterClicked,this),c.default.getInstance().addEventListener(l.LevelDesignEvent.ClearEffectSelect,this.handleEffectClicked,this),c.default.getInstance().addEventListener(l.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDestroy=function(){c.default.getInstance().offEventListener(l.LevelDesignEvent.ClearCharacterAnimSelect,this.handleCharacterClicked,this),c.default.getInstance().offEventListener(l.LevelDesignEvent.ClearEffectSelect,this.handleEffectClicked,this),c.default.getInstance().offEventListener(l.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:this.okBtn.isOn=!1,this.characterSelections.forEach(function(e){return e.isOn=!1}),this.effectSelections.forEach(function(e){return e.isOn=!1}),e.label=1;case 1:return null!==d.default.getInstance()?[3,3]:[4,new Promise(function(e){return setTimeout(e,100)})];case 2:return e.sent(),[3,1];case 3:return h.default.getInstance().isCurrentValid()||h.default.getInstance().loadTestUser(),null!==h.default.getInstance().current.design.clearEffectSettings?(this._settings=JSON.parse(JSON.stringify(h.default.getInstance().current.design.clearEffectSettings)),null!==this._settings.characterType&&void 0!==this._settings.characterType&&this._selectedCharacter(this._settings.characterType)):c.default.getInstance().emitEvent(l.TutorialEvent.TutorialShown),this._checkModifyStatus(),[2]}})})},t.prototype.onOkClicked=function(){h.default.getInstance().current.design.clearEffectSettings=JSON.parse(JSON.stringify(this._settings)),h.default.getInstance().current.save(),c.default.getInstance().emitEvent(l.LevelDesignEvent.ClearEffectDesignFinished,this)},t.prototype.handleCharacterClicked=function(e){g.default.getInstance().playEffect("UI_BUTTON",!1),this._selectedCharacter(e.type),this._checkModifyStatus()},t.prototype._selectedCharacter=function(e){var t=this;this._settings.characterType=e,this.characterSelections.forEach(function(e){e.type===t._settings.characterType?e.isOn=!0:e.isOn=!1}),this.preview.setCharacter(e)},t.prototype.handleEffectClicked=function(e){var t=this;g.default.getInstance().playEffect("UI_BUTTON",!1),this._settings.effectType=e.type,this.effectSelections.forEach(function(e){e.type===t._settings.effectType?e.isOn=!0:e.isOn=!1}),this._checkModifyStatus(),this.preview.setEffect(e.type)},t.prototype._updatePreview=function(){},t.prototype._checkModifyStatus=function(){null===this._settings||void 0===this._settings?this.okBtn.isOn=!1:null===this._settings.characterType||void 0===this._settings.characterType?this.okBtn.isOn=!1:null===this._settings.effectType||void 0===this._settings.effectType?this.okBtn.isOn=!1:this.okBtn.isOn=!0},t.prototype.handleTutorialCompleted=function(e){switch(cc.log("handleTutorialCompleted: ",e),e){case"rabbit":this._clickedCharacterOnTutorial(l.ClearCharacterType.Rabbit);break;case"bear":this._clickedCharacterOnTutorial(l.ClearCharacterType.Bear);break;case"sheep":this._clickedCharacterOnTutorial(l.ClearCharacterType.Sheep);break;case"effect_ballon":this._clickEffectOnTutorial(l.ClearEffectType.ClearEffect_Ballon);break;case"effect_bubble":this._clickEffectOnTutorial(l.ClearEffectType.ClearEffect_Bubble);break;case"effect_firework":this._clickEffectOnTutorial(l.ClearEffectType.ClearEffect_Fireworks);break;case"effect_flower":this._clickEffectOnTutorial(l.ClearEffectType.ClearEffect_Flower);break;case"play_preview":this.preview.play()}},t.prototype._clickEffectOnTutorial=function(e){var t=this.effectSelections.find(function(t){return t.type===e});t&&this.handleEffectClicked(t)},t.prototype._clickedCharacterOnTutorial=function(e){var t=this.characterSelections.find(function(t){return t.type==e});t&&this.handleCharacterClicked(t)},r([b(u.default)],t.prototype,"characterSelections",void 0),r([b(p.default)],t.prototype,"effectSelections",void 0),r([b(f.default)],t.prototype,"okBtn",void 0),r([b(y.default)],t.prototype,"preview",void 0),t=r([v],t)}(s.default);n.default=m,cc._RF.pop()},{"../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","./ClearCharacterSelection":"ClearCharacterSelection","./ClearEffectPreivew":"ClearEffectPreivew","./ClearEffectSelection":"ClearEffectSelection"}],ColorButton:[function(e,t,n){"use strict";cc._RF.push(t,"eaf60w2nG5OJrXUZeOVC5xI","ColorButton");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._color=cc.Color.WHITE,t.normalFrame=null,t.inactiveFrame=null,t.checkIcon=null,t._isCheck=!1,t._hasUsed=!1,t}return o(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this._notifyColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCheck",{get:function(){return this._isCheck},set:function(e){this._isCheck=e,this._notifyCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasUsed",{get:function(){return this._hasUsed},set:function(e){this._hasUsed=e,this._notifyHasUsed()},enumerable:!1,configurable:!0}),t.prototype._notifyCheck=function(){this.checkIcon.active=this.isCheck,this.interactable=!this.isCheck},t.prototype._notifyHasUsed=function(){this.target.getComponent(cc.Sprite).spriteFrame=this.hasUsed?this.inactiveFrame:this.normalFrame,this.color=this.hasUsed?cc.Color.WHITE:this.color,this.interactable=!this.hasUsed},t.prototype._notifyColor=function(){var e=new cc.Color(this._color.getR(),this._color.getG(),this._color.getB(),255);this.node.color=e,this.normalColor=e,this.disabledColor=e;var t=new cc.Color(e.r,e.g,e.b,e.a);t=t.multiply(new cc.Color(180,180,180,255)),this.pressedColor=t,this.hoverColor=t},t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.ColorSelect,this)},r([l(cc.Color)],t.prototype,"_color",void 0),r([l({displayName:"Color",type:cc.Color})],t.prototype,"color",null),r([l(cc.SpriteFrame)],t.prototype,"normalFrame",void 0),r([l(cc.SpriteFrame)],t.prototype,"inactiveFrame",void 0),r([l(cc.Node)],t.prototype,"checkIcon",void 0),r([l],t.prototype,"_isCheck",void 0),r([l],t.prototype,"isCheck",null),r([l],t.prototype,"_hasUsed",void 0),r([l],t.prototype,"hasUsed",null),t=r([s],t)}(cc.Button);n.default=u,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/Manager/EventManager":"EventManager"}],Combination:[function(e,t,n){"use strict";cc._RF.push(t,"dc32dwcsGhCXIMI2IFONSQA","Combination"),Object.defineProperty(n,"__esModule",{value:!0}),n.Combination=void 0;var o=e("./Enum"),r=function(){function e(e){this.coords=e,this.updateType()}return e.prototype.updateType=function(){for(var e=0,t=0,n=0,r=0,i=this.commonCoord?this.commonCoord:this.coords[0],a=0;a<this.coords.length;a++){if(this.coords[a].compare(i))return;this.coords[a].x===i.x?this.coords[a].y>i.y?e++:t++:this.coords[a].x<i.x?n++:r++}0===e&&0===t?this.type=o.CombinationType.Horizontal:0===n&&0===r?this.type=o.CombinationType.Vertical:e>0&&t>0&&n>0&&r>0?this.type=o.CombinationType.Cross:e>0&&0===t&&0===n&&r>0||e>0&&0===t&&n>0&&0===r||0===e&&t>0&&0===n&&r>0||0===e&&t>0&&n>0&&0===r?this.type=o.CombinationType.LShape:(0===e&&t>0&&n>0&&r>0||e>0&&0===t&&n>0&&r>0||e>0&&t>0&&0===n&&r>0||e>0&&t>0&&n>0&&0===r)&&(this.type=o.CombinationType.TShape)},e.prototype.include=function(e){for(var t=0;t<this.coords.length;t++)for(var n=0;n<e.length;n++)if(this.coords[t].compare(e[n]))return e[n];return null},e.prototype.merge=function(e,t){for(var n=0;n<e.length;n++)e[n].compare(t)||this.coords.push(e[n]);this.commonCoord=t,this.updateType()},e}();n.Combination=r,cc._RF.pop()},{"./Enum":"Enum"}],CompletionPanel_Step6:[function(e,t,n){"use strict";cc._RF.push(t,"9cc54FX8zVP/r4EGMhhBAhy","CompletionPanel_Step6");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Manager/UserManager"),s=e("../../../Scripts/Panels/CompletionPanel"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stampAnim=null,t.label=null,t}return o(t,e),t.prototype.onEnable=function(){this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return this.stampAnim.node.active=!1,c.default.getInstance().isCurrentValid()||c.default.getInstance().loadTestUser(),this.label.string=cc.js.formatStr("%s\uc758 \ud3ec\ucf54\ud3ec\ucf54 \ub9cc\ub4e4\uae30",c.default.getInstance().current.name),[4,new Promise(function(e){return setTimeout(e,500)})];case 1:return t.sent(),this._playStampAppearAnimation(function(){return e.stampAnim.setAnimation(0,"idle",!0)}),[2]}})})},t.prototype._playStampAppearAnimation=function(e){this.stampAnim.node.active=!0,this.stampAnim.setAnimation(0,"appear",!1)&&this.stampAnim.setCompleteListener(function(t,n){"appear"===(t.animation?t.animation.name:"")&&e()})},r([p(sp.Skeleton)],t.prototype,"stampAnim",void 0),r([p(cc.Label)],t.prototype,"label",void 0),t=r([u],t)}(s.default);n.default=f,cc._RF.pop()},{"../../../Scripts/Manager/UserManager":"UserManager","../../../Scripts/Panels/CompletionPanel":"CompletionPanel"}],CompletionPanel:[function(e,t,n){"use strict";cc._RF.push(t,"d6098GyRd1J+amGhsruNDCA","CompletionPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Enum"),a=e("../Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onNextClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.NextClick)},t=r([s],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../Enum":"Enum","../Manager/EventManager":"EventManager"}],ConfirmPopup:[function(e,t,n){"use strict";cc._RF.push(t,"48c171hGM5NxYmEvOsQtx9Z","ConfirmPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Manager/AudioManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onYesEvents=[],t.onNoEvents=[],t}return o(t,e),t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.onYesClicked=function(){i.default.getInstance().playEffect("UI_BUTTON",!1),this.onYesEvents.forEach(function(e){return e.emit([])})},t.prototype.onNoClicked=function(){i.default.getInstance().playEffect("UI_BUTTON",!1),this.onNoEvents.forEach(function(e){return e.emit([])})},r([s(cc.Component.EventHandler)],t.prototype,"onYesEvents",void 0),r([s(cc.Component.EventHandler)],t.prototype,"onNoEvents",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../Manager/AudioManager":"AudioManager"}],DeleteUserConfirmPopup:[function(e,t,n){"use strict";cc._RF.push(t,"e553awlLEJIkLfBO0PcCzA3","DeleteUserConfirmPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/API"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uidLabel=null,t._uid=null,t._deleteUserEvent=null,t}return o(t,e),t.prototype.onEnable=function(){this.node.setSiblingIndex(-1)},t.prototype.set=function(e,t,n){this.uidLabel.string=cc.js.formatStr("%s | %s",e,t),this._uid=e,this._deleteUserEvent=n},t.prototype.onOkClicked=function(){this._requestDeleteUser(this._handleUserDeleted.bind(this))},t.prototype.onCancelClicked=function(){this.node.active=!1},t.prototype._requestDeleteUser=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&t.status>=200&&t.status<400){var n=JSON.parse(t.responseText);e(n)}};var n=cc.js.formatStr(i.API.PATH_DELETE_USER,this._uid),o=cc.js.formatStr("%s%s",i.API.HOST,n);t.open("DELETE",o),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send()},t.prototype._handleUserDeleted=function(e){null!==e&&void 0!==e&&(this._deleteUserEvent(),this.node.active=!1)},r([s(cc.Label)],t.prototype,"uidLabel",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../Scripts/API":"API"}],EffectEditPanel:[function(e,t,n){"use strict";cc._RF.push(t,"2e83619kfdCGrsVZvZlY6mT","EffectEditPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Base/PanelComponent"),a=e("../../../Scripts/Base/SwitchButton"),c=e("../../../Scripts/Enum"),s=e("../../../Scripts/Manager/AudioManager"),l=e("../../../Scripts/Manager/EventManager"),u=e("./EffectSelection"),p=e("./MatchEffectPreview"),f=cc._decorator,d=f.ccclass,h=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.match3Icon=null,t.match4orMoreIcon=null,t.nameLabel=null,t.preview=null,t.soundBtn=null,t.okBtn=null,t.effectSelections=[],t.videos=[],t._currentType=void 0,t._selectedEffect=void 0,t}return o(t,e),t.prototype.onEnable=function(){l.default.getInstance().addEventListener(c.LevelDesignEvent.MatchEffectSelect,this.handleEffectSelectionClicked,this),l.default.getInstance().addEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDisable=function(){this.videos.forEach(function(e){return e.setVisible(!1)}),l.default.getInstance().offEventListener(c.LevelDesignEvent.MatchEffectSelect,this.handleEffectSelectionClicked,this),l.default.getInstance().offEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.init=function(e,t){void 0===t&&(t=void 0),this.soundBtn.isOn=!1,this.effectSelections.forEach(function(e){return e.isOn=!1}),this._currentType=e,this._selectedEffect=t,this._setMatchType(),this._updateSelections(),this._checkModifyStatus()},t.prototype._updateSelections=function(){var e=this;this.effectSelections.forEach(function(t){t.matchEffectType===e._selectedEffect?t.isOn=!0:t.isOn=!1}),this._playVideo()},t.prototype._setMatchType=function(){this._currentType===c.MatchType.Match_3?(this.match3Icon.active=!0,this.match4orMoreIcon.active=!1,this.nameLabel.string="\ube14\ub85d 3\uac1c \ub9de\ucd94\uae30"):(this.match3Icon.active=!1,this.match4orMoreIcon.active=!0,this.nameLabel.string="\ube14\ub85d 4\uac1c \ub9de\ucd94\uae30")},t.prototype.handleEffectSelectionClicked=function(e){s.default.getInstance().playEffect("UI_BUTTON",!1),this._selectedEffect=e.matchEffectType,this._playVideo(),this._updateSelections(),this._checkModifyStatus()},t.prototype._checkModifyStatus=function(){var e=this.effectSelections.find(function(e){return!0===e.isOn});this.okBtn.isOn=null!==e&&void 0!==e},t.prototype.onOkClicked=function(){s.default.getInstance().playEffect("UI_BUTTON",!1),l.default.getInstance().emitEvent(c.LevelDesignEvent.EditMatchEffectEnded,{matchType:this._currentType,effectType:this._selectedEffect}),this.node.active=!1},t.prototype.onSoundClicked=function(){var e=this;this.soundBtn.isOn=!this.soundBtn.isOn,this.videos.forEach(function(t){t.videoPlayer.mute=!e.soundBtn.isOn})},t.prototype.handleTutorialCompleted=function(e,t){if(1===e){var n=c.MatchEffectType[t],o=this.effectSelections.find(function(e){return e.matchEffectType===n});this.handleEffectSelectionClicked(o)}else if(2===e)this.onSoundClicked();else if(3===e)this.onOkClicked();else if(5===e){var r=c.MatchEffectType[t];o=this.effectSelections.find(function(e){return e.matchEffectType===r});this.handleEffectSelectionClicked(o)}else 6===e?this.onSoundClicked():7===e&&this.onOkClicked()},t.prototype._playVideo=function(){var e=this;this.videos.forEach(function(t){t.setVisible(t.effectType===e._selectedEffect),t.videoPlayer.mute=!e.soundBtn.isOn})},r([h(cc.Node)],t.prototype,"match3Icon",void 0),r([h(cc.Node)],t.prototype,"match4orMoreIcon",void 0),r([h(cc.Label)],t.prototype,"nameLabel",void 0),r([h(cc.Node)],t.prototype,"preview",void 0),r([h(a.default)],t.prototype,"soundBtn",void 0),r([h(a.default)],t.prototype,"okBtn",void 0),r([h([u.default])],t.prototype,"effectSelections",void 0),r([h(p.default)],t.prototype,"videos",void 0),t=r([d],t)}(i.default);n.default=y,cc._RF.pop()},{"../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","./EffectSelection":"EffectSelection","./MatchEffectPreview":"MatchEffectPreview"}],EffectSelection:[function(e,t,n){"use strict";cc._RF.push(t,"5b39ayYBy1LM6r+XZXlr1Vb","EffectSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matchEffectType=i.MatchEffectType.Match_Effect_Bubble,t.checkNode=null,t._isOn=!1,t}return o(t,e),Object.defineProperty(t.prototype,"isOn",{get:function(){return this._isOn},set:function(e){this._isOn=e,this._notify()},enumerable:!1,configurable:!0}),t.prototype.onClicked=function(){this.isOn||a.default.getInstance().emitEvent(i.LevelDesignEvent.MatchEffectSelect,this)},t.prototype._notify=function(){this.checkNode.active=this.isOn},r([l({type:cc.Enum(i.MatchEffectType),displayName:"Match Effect Type"})],t.prototype,"matchEffectType",void 0),r([l(cc.Node)],t.prototype,"checkNode",void 0),r([l],t.prototype,"_isOn",void 0),r([l],t.prototype,"isOn",null),t=r([s],t)}(cc.Button);n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],EffectSettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"399767SnhFAHqR+V3VS1FuB","EffectSettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Base/PanelComponent"),s=e("../../../Scripts/Base/SwitchButton"),l=e("../../../Scripts/Enum"),u=e("../../../Scripts/Manager/AudioManager"),p=e("../../../Scripts/Manager/EventManager"),f=e("../../../Scripts/Manager/ResManager"),d=e("../../../Scripts/Manager/UserManager"),h=e("./EffectEditPanel"),y=e("./EffectSlot"),g=cc._decorator,_=g.ccclass,v=g.property,b=function(){function e(){this.type=l.MatchEffectType.Match_Effect_Bubble,this.icon=null}return r([v({type:cc.Enum(l.MatchEffectType)})],e.prototype,"type",void 0),r([v(cc.SpriteFrame)],e.prototype,"icon",void 0),e=r([_("Effect Icon")],e)}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.okBtn=null,t.effectSlots=[],t.editPanel=null,t.iconSources=[],t._settings={},t}return o(t,e),t.prototype.onLoad=function(){this._init(),p.default.getInstance().addEventListener(l.LevelDesignEvent.MatchTypeSlotClick,this.handleSlotClicked,this),p.default.getInstance().addEventListener(l.LevelDesignEvent.EditMatchEffectEnded,this.handleEffectChanged,this),p.default.getInstance().addEventListener(l.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDestroy=function(){p.default.getInstance().offEventListener(l.LevelDesignEvent.MatchTypeSlotClick,this.handleSlotClicked,this),p.default.getInstance().offEventListener(l.LevelDesignEvent.EditMatchEffectEnded,this.handleEffectChanged,this),p.default.getInstance().offEventListener(l.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:this.okBtn.isOn=!1,this.editPanel.node.active=!1,this._settings.settings=[],this.effectSlots.forEach(function(e){return e.hasEdited=!1}),e.label=1;case 1:return null!==f.default.getInstance()?[3,3]:[4,new Promise(function(e){return setTimeout(e,100)})];case 2:return e.sent(),[3,1];case 3:return d.default.getInstance().isCurrentValid()||d.default.getInstance().loadTestUser(),null!==d.default.getInstance().current.design.matchEffectSettings?this._settings=JSON.parse(JSON.stringify(d.default.getInstance().current.design.matchEffectSettings)):(this.effectSlots.forEach(function(e){e.hasEdited=!1}),p.default.getInstance().emitEvent(l.TutorialEvent.TutorialShown)),this._checkModifyStatus(),[2]}})})},t.prototype.handleSlotClicked=function(e){u.default.getInstance().playEffect("UI_BUTTON",!1),this.editPanel.node.active=!0,this.editPanel.init(e.matchType,e.effectType),this.effectSlots.forEach(function(e){return e.node.active=!1})},t.prototype.handleEffectChanged=function(e){this.effectSlots.forEach(function(e){return e.node.active=!0});var t=e.matchType,n=e.effectType,o={matchType:t,effectType:n},r=this._settings.settings.find(function(e){return e.matchType===o.matchType});null===r||void 0===r?this._settings.settings.push(o):r.effectType=o.effectType;var i=this.effectSlots.find(function(e){return e.matchType===t});i&&(i.hasEdited=!0,i.updatePreview(n,this.iconSources.find(function(e){return e.type===n}).icon)),this._checkModifyStatus()},t.prototype._checkModifyStatus=function(){var e=this.effectSlots.find(function(e){return!1===e.hasEdited});this.okBtn.isOn=null===e||void 0===e},t.prototype.onOkClicked=function(){this.effectSlots.forEach(function(e){return e.stopVideoAndShowStaticImage()}),u.default.getInstance().playEffect("UI_BUTTON",!1),d.default.getInstance().current.design.matchEffectSettings=JSON.parse(JSON.stringify(this._settings)),d.default.getInstance().current.save(),p.default.getInstance().emitEvent(l.LevelDesignEvent.MatchEffectDesignFinished)},t.prototype.handleTutorialCompleted=function(e,t){if("number"==typeof e)if(0===e)this.handleSlotClicked(this.effectSlots.find(function(e){return e.matchType===l.MatchType.Match_3}));else if(4===e)this.handleSlotClicked(this.effectSlots.find(function(e){return e.matchType===l.MatchType.Match_4_Or_More}));else if(8===e){var n=parseInt(t);1===n?this.handleSlotClicked(this.effectSlots.find(function(e){return e.matchType===l.MatchType.Match_3})):2===n?this.handleSlotClicked(this.effectSlots.find(function(e){return e.matchType===l.MatchType.Match_4_Or_More})):this.onOkClicked()}},r([v(s.default)],t.prototype,"okBtn",void 0),r([v([y.default])],t.prototype,"effectSlots",void 0),r([v(h.default)],t.prototype,"editPanel",void 0),r([v(b)],t.prototype,"iconSources",void 0),t=r([_],t)}(c.default);n.default=m,cc._RF.pop()},{"../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","./EffectEditPanel":"EffectEditPanel","./EffectSlot":"EffectSlot"}],EffectSlot:[function(e,t,n){"use strict";cc._RF.push(t,"62352q0ZRBJFI+GYkspwmvk","EffectSlot");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("./MatchEffectPreview"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._matchType=i.MatchType.Match_3,t._hasEdited=!1,t.editBtn=null,t.previewContainer=null,t.iconSprite=null,t.videos=[],t._preview=null,t._effectType=void 0,t}return o(t,e),Object.defineProperty(t.prototype,"matchType",{get:function(){return this._matchType},set:function(e){this._matchType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasEdited",{get:function(){return this._hasEdited},set:function(e){this._hasEdited=e,this._notify()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectType",{get:function(){return this._effectType},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this._playVideo()},t.prototype.onDisable=function(){this.videos.forEach(function(e){return e.setVisible(!1)})},t.prototype.onPlusBoxClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.MatchTypeSlotClick,this)},t.prototype.onMiniClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.MatchTypeSlotClick,this)},t.prototype.updatePreview=function(e,t){this._preview&&(this._preview.destroy(),this._preview=null),this._effectType=e,this._playVideo(),this.iconSprite.spriteFrame=t},t.prototype.stopVideoAndShowStaticImage=function(){this.videos.forEach(function(e){return e.setVisible(!1)})},t.prototype._playVideo=function(){var e=this;this.videos.forEach(function(t){t.setVisible(t.effectType===e._effectType)})},t.prototype._notify=function(){this.editBtn.active=this.hasEdited,this.iconSprite.node.active=this.hasEdited},r([u({type:cc.Enum(i.MatchType)})],t.prototype,"_matchType",void 0),r([u({displayName:"Match Type",type:cc.Enum(i.MatchType)})],t.prototype,"matchType",null),r([u],t.prototype,"_hasEdited",void 0),r([u],t.prototype,"hasEdited",null),r([u(cc.Node)],t.prototype,"editBtn",void 0),r([u(cc.Node)],t.prototype,"previewContainer",void 0),r([u(cc.Sprite)],t.prototype,"iconSprite",void 0),r([u(c.default)],t.prototype,"videos",void 0),t=r([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","./MatchEffectPreview":"MatchEffectPreview"}],EndTestScene:[function(e,t,n){"use strict";cc._RF.push(t,"90616j/u9ZKMYaotHWBCR/r","EndTestScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Enum"),c=e("../../Scripts/Manager/EventManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),c.default.getInstance().addEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),c.default.getInstance().addEventListener(a.LevelDesignEvent.TestEnded,this.handleTestEnded,this),c.default.getInstance().addEventListener(a.LevelDesignEvent.ReleaseEnded,this.handleReleaseEnded,this),c.default.getInstance().addEventListener(a.LevelDesignEvent.CertificateEnded,this.handleCertificateEnded,this)},t.prototype.onDestroy=function(){c.default.getInstance().offEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),c.default.getInstance().offEventListener(a.LevelDesignEvent.TestEnded,this.handleTestEnded,this),c.default.getInstance().offEventListener(a.LevelDesignEvent.ReleaseEnded,this.handleReleaseEnded,this),c.default.getInstance().offEventListener(a.LevelDesignEvent.CertificateEnded,this.handleCertificateEnded,this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("test",!0)},t.prototype.handleTestEnded=function(){this.setPanelVisible("test",!1),this.setPanelVisible("release",!0)},t.prototype.handleReleaseEnded=function(){this.setPanelVisible("release",!1),this.setPanelVisible("certificate",!0)},t.prototype.handleCertificateEnded=function(){this.setPanelVisible("certificate",!1),this.setPanelVisible("qr",!0)},t=r([l],t)}(i.default));n.default=u,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/EventManager":"EventManager"}],Enum:[function(e,t,n){"use strict";cc._RF.push(t,"39c886OnJVDEqaKbyY4112L","Enum"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameEvent=n.TutorialEvent=n.LevelDesignEvent=n.GameDesignProgress=n.CombinationType=n.SlidDirection=n.TileEvent=n.TileType=n.BlockType=n.BlockLayerType=n.MapBackgroundType=n.MapSizeType=n.MatchType=n.MatchEffectType=n.ClearCharacterType=n.ClearEffectType=void 0,function(e){e[e.ClearEffect_Ballon=1]="ClearEffect_Ballon",e[e.ClearEffect_Bubble=2]="ClearEffect_Bubble",e[e.ClearEffect_Fireworks=3]="ClearEffect_Fireworks",e[e.ClearEffect_Flower=4]="ClearEffect_Flower"}(n.ClearEffectType||(n.ClearEffectType={})),function(e){e[e.Rabbit=1]="Rabbit",e[e.Bear=2]="Bear",e[e.Sheep=3]="Sheep"}(n.ClearCharacterType||(n.ClearCharacterType={})),function(e){e[e.Match_Effect_Bubble=1]="Match_Effect_Bubble",e[e.Match_Effect_Circle=2]="Match_Effect_Circle",e[e.Match_Effect_Flower=3]="Match_Effect_Flower",e[e.Match_Effect_Heart=4]="Match_Effect_Heart",e[e.Match_Effect_Stone=5]="Match_Effect_Stone"}(n.MatchEffectType||(n.MatchEffectType={})),function(e){e[e.Match_3=3]="Match_3",e[e.Match_4_Or_More=4]="Match_4_Or_More"}(n.MatchType||(n.MatchType={})),function(e){e[e.Size_5=5]="Size_5",e[e.Size_6=6]="Size_6",e[e.Size_7=7]="Size_7"}(n.MapSizeType||(n.MapSizeType={})),function(e){e[e.Background_1=1]="Background_1",e[e.Background_2=2]="Background_2",e[e.Background_3=3]="Background_3"}(n.MapBackgroundType||(n.MapBackgroundType={})),function(e){e[e.Background=0]="Background",e[e.CharacterMain=1]="CharacterMain",e[e.CharacterSub=2]="CharacterSub"}(n.BlockLayerType||(n.BlockLayerType={})),function(e){e[e.Rabbit=1]="Rabbit",e[e.Bear=2]="Bear",e[e.Sheep=3]="Sheep",e[e.Wolf=4]="Wolf",e[e.Lion=5]="Lion",e[e.Tiger=6]="Tiger",e[e.Deer=7]="Deer",e[e.Squirrle=8]="Squirrle"}(n.BlockType||(n.BlockType={})),function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C",e[e.D=4]="D"}(n.TileType||(n.TileType={})),function(e){e.TouchStart="tile_touchstart",e.TouchMove="tile_touchmove",e.TouchCancel="tile_touchcancel",e.TouchEnd="tile_touchend",e.SlidBegan="tile_slidBegan",e.OnAwake="tile_onWake",e.OnLanding="tile_onLanding",e.OnDestroying="tile_onDestroying"}(n.TileEvent||(n.TileEvent={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Top=3]="Top",e[e.Bottom=4]="Bottom"}(n.SlidDirection||(n.SlidDirection={})),function(e){e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e[e.Cross=3]="Cross",e[e.TShape=4]="TShape",e[e.LShape=5]="LShape"}(n.CombinationType||(n.CombinationType={})),function(e){e[e.Step1_PuzzleBlockDesign=1]="Step1_PuzzleBlockDesign",e[e.Step2_PuzzleMapDesign=2]="Step2_PuzzleMapDesign",e[e.Step3_InitialMapDesign=3]="Step3_InitialMapDesign",e[e.Step4_MatchEffectDesign=4]="Step4_MatchEffectDesign",e[e.Step5_GameClearEffectDesign=5]="Step5_GameClearEffectDesign",e[e.Step6_BackgroundDesign=6]="Step6_BackgroundDesign",e[e.Step7_TestAndRelease=7]="Step7_TestAndRelease"}(n.GameDesignProgress||(n.GameDesignProgress={})),function(e){e.StepClick="step_click",e.MapSizeSelect="map_size_select",e.ColorSelect="color_select",e.IconSelect="icon_select",e.SlotSelect="slot_select",e.TileCountChange="tile_count_change",e.TileMenuClick="tile_menu_click",e.InitialMapChange="initial_map_change",e.InitialMapEnded="initial_map_ended",e.BlockLayerClick="block_layer_click",e.MatchTypeSlotClick="match_type_slot_click",e.MatchEffectSelect="match_effect_select",e.EditMatchEffectEnded="edit_match_effect_ended",e.MatchEffectDesignFinished="match_effect_design_finished",e.ClearCharacterAnimSelect="clear_character_select",e.ClearEffectSelect="clear_effect_select",e.ClearEffectDesignFinished="clear_effect_ended",e.MapBackgroundSelect="map_background_select",e.BackgroundDesignFinished="background_ended",e.TestEnded="test_ended",e.ReleaseEnded="release_ended",e.QRCodeImageUploaded="qrcode_image_uploaded",e.CertificateEnded="certificate_ended",e.NextClick="next_click",e.BlockDesignFinished="block_design_finished",e.MapSizeDesignFinished="map_size_finished",e.TitlePanelEnded="title_panel_ended"}(n.LevelDesignEvent||(n.LevelDesignEvent={})),function(e){e.TutorialShown="tutorial_shown",e.TutorialCircleClicked="tutorial_circle_clicked",e.TutorialCompleted="tutorial_completed",e.TutorialClosed="tutorial_close"}(n.TutorialEvent||(n.TutorialEvent={})),function(e){e.ResourcesLoaded="resources_loaded",e.LevelLoaded="level_loaded",e.TimerBegan="timer_began",e.TimerEnded="timer_ended",e.TimerWarned="timer_warned",e.TileMatched="tile_matched",e.GameStarted="game_started",e.GameEnded="game_ended"}(n.GameEvent||(n.GameEvent={})),cc._RF.pop()},{}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"3812dEDCTFDDI0MCyf9CV3K","EventManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this)||this;return t.name="Event Manager",cc.game.addPersistRootNode(t),t}return o(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.addEventListener=function(e,t,n,o){this.on.apply(this,arguments)},t.prototype.addOnceEventListener=function(e,t,n){this.once.apply(this,arguments)},t.prototype.offEventListener=function(e,t,n){this.off.apply(this,arguments)},t.prototype.emitEvent=function(e,t,n,o,r,i){this.emit.apply(this,arguments)},t.prototype.hasAddEventListener=function(e){return this.hasEventListener(e)},t}(cc.Node);n.default=r,cc._RF.pop()},{}],FireworkEmiter:[function(e,t,n){"use strict";cc._RF.push(t,"f1084A1ju1DVL2b/cfBf1k9","FireworkEmiter");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FireworkEmitter=void 0;var c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firework=null,t.light=null,t.ps=null,t.moveY=0,t.moveSpeed=0,t.playOnDelay=0,t._isMoving=!1,t}return o(t,e),t.prototype.emit=function(){return i(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return this.light.opacity=255,this.firework.position=new cc.Vec3(0,0,0),[4,new Promise(function(t){return setTimeout(t,1e3*e.playOnDelay)})];case 1:return t.sent(),this._isMoving=!0,[2]}})})},t.prototype._playExplode=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.ps.resetSystem(),[4,new Promise(function(e){return setTimeout(e,1e3)})];case 1:return e.sent(),this.onDead(),[2]}})})},t.prototype.onDead=function(){this.emit()},t.prototype.update=function(e){if(this._isMoving){var t=this.firework.position;t.y+=this.moveSpeed*e,this.firework.position=t,t.y>=this.moveY&&(this.light.opacity=0,this._isMoving=!1,this._playExplode())}},r([l(cc.Node)],t.prototype,"firework",void 0),r([l(cc.Node)],t.prototype,"light",void 0),r([l(cc.ParticleSystem)],t.prototype,"ps",void 0),r([l],t.prototype,"moveY",void 0),r([l],t.prototype,"moveSpeed",void 0),r([l],t.prototype,"playOnDelay",void 0),t=r([s],t)}(cc.Component);n.FireworkEmitter=u,cc._RF.pop()},{}],GameCertificatePanel:[function(e,t,n){"use strict";cc._RF.push(t,"b572ei2r6BOBrEYh8O0XCB0","GameCertificatePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/AudioManager"),c=e("../../../Scripts/Manager/EventManager"),s=e("../../../Scripts/Manager/UserManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.dateLabel=null,t}return o(t,e),t.prototype.start=function(){this._init()},t.prototype._init=function(){s.default.getInstance().isCurrentValid()||s.default.getInstance().loadTestUser(),this.nameLabel.string=s.default.getInstance().current.name;var e=new Date;this.dateLabel.string=cc.js.formatStr("%s\ub144 %s\uc6d4 %s\uc77c",e.getFullYear(),e.getMonth()+1,e.getDate())},t.prototype.onCreateQRClicked=function(){a.default.getInstance().playEffect("UI_BUTTON",!1),c.default.getInstance().emitEvent(i.LevelDesignEvent.CertificateEnded)},r([p(cc.Label)],t.prototype,"nameLabel",void 0),r([p(cc.Label)],t.prototype,"dateLabel",void 0),t=r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/UserManager":"UserManager"}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"c7e6bY+AfpOnI6fKPLcFkPx","GameConfig");var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Coord=n.Coordinate=void 0;var r=e("./Enum"),i=cc._decorator,a=i.ccclass,c=(i.property,function(){function e(){}return e.cellSize=new cc.Vec2(140,140),e.spacing=0,e.padding=0,e.availableTiles=[r.TileType.A,r.TileType.B,r.TileType.C,r.TileType.D],e.matchPoints=[{matchType:r.MatchType.Match_3,point:10},{matchType:r.MatchType.Match_4_Or_More,point:20}],e=o([a("GameConfig")],e)}());n.default=c;var s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.x=e[0],this.y=e[1]}var t;return t=e,e.prototype.set=function(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.x=e.y)},e.prototype.copy=function(){return new t(this.x,this.y)},e.prototype.compare=function(e,t){return"number"==typeof e?this.x===e&&this.y===t:this.x===e.x&&this.y===e.y},e.prototype.isAdjacent=function(e){return this.x===e.x&&(this.y===e.y+1||this.y===e.y-1)||this.y===e.y&&(this.x===e.x+1||this.x===e.x-1)},e.prototype.toString=function(){return"(x:"+this.x+", y: "+this.y+")"},e=t=o([a("Coordinate")],e)}();n.Coordinate=s,n.Coord=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),new s(e,t)},cc._RF.pop()},{"./Enum":"Enum"}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"768a9sMiK9CQ7BVu0zBCnpa","GameManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/EventManager"),s=e("../Enum"),l=e("./TileManager"),u=e("../Manager/ResManager"),p=e("../../Steps/Step2_PuzzleMapDesign/MapBox/MapBoxPreview"),f=e("./GameTimer"),d=e("../GameUtil"),h=e("../../Prefabs/Effects/Scripts/BaseEffect"),y=cc._decorator,g=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.timer=null,t.scoreLabel=null,t.scoreLabelOutline=null,t.tileManager=null,t.map=null,t._score=0,t.bgmAudio=null,t}var n;return o(t,e),n=t,Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.scoreLabelOutline.color=new cc.Color(62,52,50,255)},t.prototype.onEnable=function(){n.instance=this,cc.audioEngine.playMusic(this.bgmAudio,!0)},t.prototype.onDisable=function(){cc.audioEngine.stopMusic()},t.prototype.start=function(){this.scoreLabel.string="0",c.default.getInstance().addEventListener(s.GameEvent.GameStarted,this.startGame,this),c.default.getInstance().addEventListener(s.GameEvent.TileMatched,this.handleTileMatched,this)},t.prototype.onDestroy=function(){c.default.getInstance().offEventListener(s.GameEvent.GameStarted,this.startGame,this),c.default.getInstance().offEventListener(s.GameEvent.TileMatched,this.handleTileMatched,this)},t.prototype.init=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return"string"!=typeof e?[3,2]:[4,this._initWithURL(e)];case 1:return t.sent(),[3,4];case 2:return[4,this._initWithLevelDesign(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype._initWithURL=function(e){return i(this,void 0,void 0,function(){return a(this,function(e){return[2]})})},t.prototype._initWithLevelDesign=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return cc.log("GameManager::_initiWithLevelDesign",e),this.timer.reset(),this.background.spriteFrame=u.default.getInstance().getBackground(e.backgroundSettings.background),this.scoreLabelOutline.color=this._getScoreOutlineColor(e.backgroundSettings.background),this.map.mapSize=e.mapSettings.size,[4,this.tileManager.initializeLevel(e)];case 1:return t.sent(),c.default.getInstance().emitEvent(s.GameEvent.LevelLoaded),[2]}})})},t.prototype.startGame=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.tileManager.preprocessCombinations()];case 1:return e.sent(),this.timer.launch(),this.tileManager.gameBegan(),[2]}})})},t.prototype.pauseGame=function(){this.timer.pause(!0)},t.prototype.resumeGame=function(){this.timer.pause(!1)},t.prototype.stopGame=function(){this.timer.stop(),this.tileManager.gameEnded(),this._score=0,this._updateScore()},t.prototype.handleTileMatched=function(e){e.coords.length>3?(this._score+=20,this._playMatchEffect(s.MatchType.Match_4_Or_More,e)):(this._score+=10,this._playMatchEffect(s.MatchType.Match_3,e)),this._updateScore()},t.prototype._updateScore=function(){this._score=Math.min(this._score,9999999),this.scoreLabel.string=this._score.toLocaleString("en-US")},t.prototype._playMatchEffect=function(e,t){cc.log("match effect settings: ",l.default.instance.Design.matchEffectSettings),cc.log("match type: ",e,t);var n=l.default.instance.Design.matchEffectSettings.settings.find(function(t){return t.matchType===e}).effectType;cc.log("match effect: ",n);var o=u.default.getInstance().matchEffectPrefabs.find(function(e){return e.type===n});if(o)for(var r=0;r<t.coords.length;r++){var i=cc.instantiate(o.prefab);i.parent=l.default.instance.effectContainer,i.position=d.GameUtil.getTilePositionByCoordinate(t.coords[r]);var a=i.getComponent(h.BaseEffect);a.play(),0===r&&a.playEffectSound()}else cc.log("get match effect prefab - failed")},t.prototype._getScoreOutlineColor=function(e){cc.log("getScoreOutlineColor: ",e);var t=cc.Color.WHITE;switch(e){case 1:t=new cc.Color(62,52,50,255);break;case 2:t=new cc.Color(56,42,103,255);break;case 3:t=new cc.Color(77,66,51,255);break;case 4:t=new cc.Color(47,131,163,255);break;case 5:t=new cc.Color(56,42,103,255);break;case 6:t=new cc.Color(47,131,163,255);break;default:t=new cc.Color(62,52,50,255)}return t},t.instance=null,r([_(cc.Sprite)],t.prototype,"background",void 0),r([_(f.default)],t.prototype,"timer",void 0),r([_(cc.Label)],t.prototype,"scoreLabel",void 0),r([_(cc.LabelOutline)],t.prototype,"scoreLabelOutline",void 0),r([_(l.default)],t.prototype,"tileManager",void 0),r([_(p.default)],t.prototype,"map",void 0),r([_],t.prototype,"_score",void 0),r([_],t.prototype,"score",null),r([_(cc.AudioClip)],t.prototype,"bgmAudio",void 0),t=n=r([g],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Prefabs/Effects/Scripts/BaseEffect":"BaseEffect","../../Steps/Step2_PuzzleMapDesign/MapBox/MapBoxPreview":"MapBoxPreview","../Enum":"Enum","../GameUtil":"GameUtil","../Manager/EventManager":"EventManager","../Manager/ResManager":"ResManager","./GameTimer":"GameTimer","./TileManager":"TileManager"}],GameQRPanel:[function(e,t,n){"use strict";cc._RF.push(t,"c3b14GH40hBIo/XFwqYbxkf","GameQRPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Manager/UserManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qrSprite=null,t}return o(t,e),t.prototype.start=function(){this._loadQRImage()},t.prototype._loadQRImage=function(){var e=this,t=i.default.getInstance().current.qrCodeUrl;null===t&&""===t||cc.assetManager.loadRemote(t,function(t,n){if(t)cc.log("GameQRPanel::_loadQRImage",t.message||t);else{var o=new cc.SpriteFrame(n);e.qrSprite.spriteFrame=o,e.qrSprite.node.color=cc.Color.WHITE}})},t.prototype.onPrintClicked=function(){window.onbeforeprint=function(e){},window.onafterprint=function(e){},window.print()},r([s(cc.Sprite)],t.prototype,"qrSprite",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scripts/Manager/UserManager":"UserManager"}],GameReleasePanel:[function(e,t,n){"use strict";cc._RF.push(t,"ac3datRb1FOy5+HYs4Usc5z","GameReleasePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Base/SwitchButton"),a=e("../../../Scripts/Enum"),c=e("../../../Scripts/Manager/AudioManager"),s=e("../../../Scripts/Manager/EventManager"),l=e("../../../Scripts/Manager/UserManager"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.progressSprite=null,t.progressLabel=null,t.dots=[],t.lastNode=null,t.nameLabel=null,t.okBtn=null,t._index=0,t._progress=0,t._progressTo=0,t._loading=!1,t._levelHasUploaded=!1,t._qrcodeHasUploaded=!1,t}return o(t,e),t.prototype.start=function(){this._init(),this.schedule(this._logic,1,this.dots.length)},t.prototype._init=function(){this.dots.forEach(function(e){return e.active=!1}),this.lastNode.active=!1,this.okBtn.isOn=!1,this.okBtn.interactable=!1,this.progressSprite.fillRange=0,this.progressLabel.string="0%",this._index=0,this._progress=0,this._progressTo=0,this._loading=!0,this.titleLabel.string="\uac8c\uc784\uc744 \uc644\uc131\ud558\ub294 \uc911...",l.default.getInstance().isCurrentValid()||l.default.getInstance().loadTestUser(),this.nameLabel.string=l.default.getInstance().current.name,this._levelHasUploaded=!1,this._qrcodeHasUploaded=!1,l.default.getInstance().current.uploadDataToSever(this.handleLevelUploaded.bind(this)),l.default.getInstance().current.uploadQRCodeToServer(this.handleQRCodeUploaded.bind(this))},t.prototype.handleQRCodeUploaded=function(e){this._qrcodeHasUploaded=!0,l.default.getInstance().current.qrCodeUrl=e},t.prototype.handleLevelUploaded=function(e){this._levelHasUploaded=!0},t.prototype._logic=function(){this._progressTo=(this._index+1)/this.dots.length,this._index>0&&(this.dots[this._index-1].getComponentInChildren(cc.Label).string=this._getDotText(this._index-1,!0)),this._index===this.dots.length?(this.lastNode.active=!0,this.unschedule(this._logic)):(this.dots[this._index].active=!0,this.dots[this._index].getComponentInChildren(cc.Label).string=this._getDotText(this._index,!1),this._index++)},t.prototype._getDotText=function(e,t){var n="";switch(e){case 0:n=t?"\ube14\ub85d \ub9cc\ub4e4\uae30 \uc131\uacf5!":"\ube14\ub85d\uc744 \ub9cc\ub4dc\ub294 \uc911...";break;case 1:n=t?"\ub9f5 \ub9cc\ub4e4\uae30 \uc131\uacf5!":"\ub9f5\uc744 \ub9cc\ub4dc\ub294 \uc911...";break;case 2:n=t?"\ud6a8\uacfc \ub9cc\ub4e4\uae30 \uc131\uacf5!":"\ud6a8\uacfc\ub97c \ub9cc\ub4dc\ub294 \uc911...";break;case 3:n=t?"\ubc30\uacbd \ub9cc\ub4e4\uae30 \uc131\uacf5!":"\ubc30\uacbd\uc744 \ub9cc\ub4dc\ub294 \uc911...";break;case 4:n=t?"\uac8c\uc784\uc774 \uc644\uc131 \ub418\uc5c8\uc5b4\uc694.\n\uc774\uc81c \uac8c\uc784\uc744 \ud560 \uc218\uc788\uc5b4\uc694.":"\uac8c\uc784 \ub9cc\ub4e4\uae30\ub97c \uc644\ub8cc\ud558\ub294 \uc911..."}return n},t.prototype.onOkClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),s.default.getInstance().emitEvent(a.LevelDesignEvent.ReleaseEnded)},t.prototype.update=function(e){this._loading&&(this._progress<1?(this._progress+=(this._progressTo-this._progress)*e,this._progress=Math.min(this._progress,1),this.progressSprite.fillRange=this._progress,this.progressLabel.string=Math.floor(100*this._progress).toString()+"%"):this._levelHasUploaded&&this._qrcodeHasUploaded&&(this._loading=!1,cc.log("release completed"),this.titleLabel.string="\u200b\uac8c\uc784 \ub9cc\ub4e4\uae30 \uc644\ub8cc!",this.okBtn.isOn=!0,this.okBtn.interactable=!0))},r([f(cc.Label)],t.prototype,"titleLabel",void 0),r([f(cc.Sprite)],t.prototype,"progressSprite",void 0),r([f(cc.Label)],t.prototype,"progressLabel",void 0),r([f(cc.Node)],t.prototype,"dots",void 0),r([f(cc.Node)],t.prototype,"lastNode",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([f(i.default)],t.prototype,"okBtn",void 0),t=r([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/UserManager":"UserManager"}],GameTestPanel:[function(e,t,n){"use strict";cc._RF.push(t,"aa947TCUVBLZZnRUtWvY1OW","GameTestPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Base/PanelComponent"),s=e("../../../Scripts/Enum"),l=e("../../../Scripts/Game/GameManager"),u=e("../../../Scripts/Manager/AudioManager"),p=e("../../../Scripts/Manager/EventManager"),f=e("../../../Scripts/Manager/ResManager"),d=e("../../../Scripts/Manager/UserManager"),h=e("../Clear/ClearPopup"),y=e("../ReadyStart/ReadyStartPopup"),g=cc._decorator,_=g.ccclass,v=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pausePopup=null,t.readyStartPopup=null,t.clearPopup=null,t}return o(t,e),t.prototype.start=function(){this._init(),this.readyStartPopup.node.active=!1,this.pausePopup.active=!1,this.clearPopup.node.active=!1,p.default.getInstance().addEventListener(s.GameEvent.LevelLoaded,this.handleLevelLoaded,this),p.default.getInstance().addEventListener(s.GameEvent.TimerWarned,this.handleTimerWarned,this),p.default.getInstance().addEventListener(s.GameEvent.TimerEnded,this.handleTimerEnded,this)},t.prototype.onDestroy=function(){p.default.getInstance().offEventListener(s.GameEvent.LevelLoaded,this.handleLevelLoaded,this),p.default.getInstance().offEventListener(s.GameEvent.TimerWarned,this.handleTimerWarned,this),p.default.getInstance().offEventListener(s.GameEvent.TimerEnded,this.handleTimerEnded,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return null!==f.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return t.sent(),[3,0];case 2:return d.default.getInstance().isCurrentValid()||d.default.getInstance().loadTestUser(),e=d.default.getInstance().current.design,[4,l.default.instance.init(e)];case 3:return t.sent(),[2]}})})},t.prototype.handleLevelLoaded=function(){this.readyStartPopup.show()},t.prototype.handleTimerWarned=function(){cc.log("timer: warn")},t.prototype.handleTimerEnded=function(){this.clearPopup.show()},t.prototype.handleRetryClicked=function(){cc.director.loadScene("EndTestScene")},t.prototype.onPauseClicked=function(){u.default.getInstance().playEffect("UI_POPUP",!1),this.pausePopup.active=!0,l.default.instance.pauseGame()},t.prototype.onContinueClicked=function(){u.default.getInstance().playEffect("UI_BUTTON",!1),this.pausePopup.active=!1,l.default.instance.resumeGame()},t.prototype.onStopClicked=function(){u.default.getInstance().playEffect("UI_BUTTON",!1),l.default.instance.pauseGame(),cc.director.loadScene("HomeScene")},t.prototype.onCompleteClicked=function(){u.default.getInstance().playEffect("UI_BUTTON",!1),p.default.getInstance().emitEvent(s.LevelDesignEvent.TestEnded)},r([v(cc.Node)],t.prototype,"pausePopup",void 0),r([v(y.default)],t.prototype,"readyStartPopup",void 0),r([v(h.default)],t.prototype,"clearPopup",void 0),t=r([_],t)}(c.default);n.default=b,cc._RF.pop()},{"../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Enum":"Enum","../../../Scripts/Game/GameManager":"GameManager","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","../Clear/ClearPopup":"ClearPopup","../ReadyStart/ReadyStartPopup":"ReadyStartPopup"}],GameTimer:[function(e,t,n){"use strict";cc._RF.push(t,"4f934YvSP5Njqa0rlek8QP3","GameTimer");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Enum"),a=e("../Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t.secLabel=null,t.maxTime=99,t.warnTime=10,t.endAudio=null,t.warnAudio=null,t._sec=0,t._starting=!1,t._hasWarned=!1,t._warnAudioId=0,t}return o(t,e),t.prototype.onLoad=function(){this.secLabel.string=this.maxTime.toString()},t.prototype.launch=function(){this._starting=!0,this._hasWarned=!1,this._sec=this.maxTime,a.default.getInstance().emitEvent(i.GameEvent.TimerBegan)},t.prototype.pause=function(e){this._starting=!e,this._hasWarned&&(e?cc.audioEngine.pause(this._warnAudioId):cc.audioEngine.resume(this._warnAudioId))},t.prototype.stop=function(){this._hasWarned&&0!==this._warnAudioId&&cc.audioEngine.stop(this._warnAudioId),this._starting=!1,this._hasWarned=!1,this.reset()},t.prototype.reset=function(){this._starting=!1,this._hasWarned=!1,this._sec=this.maxTime,this._updateProgressBar()},t.prototype.update=function(e){this._starting&&(this._sec-=e,this._updateProgressBar(),this._sec<=this.warnTime&&(this._hasWarned||(this._hasWarned=!0,this._warnAudioId=cc.audioEngine.playEffect(this.warnAudio,!0),a.default.getInstance().emitEvent(i.GameEvent.TimerWarned))),0===this._sec&&(this._starting=!1,cc.audioEngine.stopEffect(this._warnAudioId),cc.audioEngine.playEffect(this.endAudio,!1),a.default.getInstance().emitEvent(i.GameEvent.TimerEnded)))},t.prototype._updateProgressBar=function(){this._sec=Math.max(0,this._sec),this.secLabel.string=cc.js.formatStr("%s",Math.ceil(this._sec)),this.progress.fillRange=this._sec/this.maxTime},r([l(cc.Sprite)],t.prototype,"progress",void 0),r([l(cc.Label)],t.prototype,"secLabel",void 0),r([l],t.prototype,"maxTime",void 0),r([l],t.prototype,"warnTime",void 0),r([l(cc.AudioClip)],t.prototype,"endAudio",void 0),r([l(cc.AudioClip)],t.prototype,"warnAudio",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Enum":"Enum","../Manager/EventManager":"EventManager"}],GameUtil:[function(e,t,n){"use strict";cc._RF.push(t,"cae00zTEy1AfrhluXOtuCDE","GameUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameUtil=n.ColorUtil=n.URLUtil=void 0;var o=e("./GameConfig"),r=e("./Enum"),i=e("./Game/TileManager"),a=e("./Combination"),c=function(){function e(){}return e.getRequest=function(){var e=window.location.search;cc.log(e);var t=new Object;if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),o=0;o<n.length;o++)t[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return t},e}();n.URLUtil=c;var s=function(){function e(){}return e.getColor=function(e){var t=cc.Color.WHITE;return t.fromHEX(e),t},e.getHex=function(e){return e.toHEX("#000000")},e}();n.ColorUtil=s;var l=function(){function e(){}return e.getTilePositionByCoordinate=function(e,t){return"number"==typeof e?new cc.Vec3(e*(o.default.cellSize.x+o.default.spacing)+o.default.cellSize.x/2+o.default.padding,-(t*(o.default.cellSize.y+o.default.spacing)+o.default.cellSize.y/2)+o.default.padding,0):new cc.Vec3(e.x*(o.default.cellSize.x+o.default.spacing)+o.default.cellSize.x/2+o.default.padding,-(e.y*(o.default.cellSize.y+o.default.spacing)+o.default.cellSize.y/2)+o.default.padding,0)},e.getRandomType=function(e){void 0===e&&(e=[]);for(var t=o.default.availableTiles.concat(),n=0;n<e.length;n++)t.splice(t.indexOf(e[n]),1);return t[Math.floor(t.length*Math.random())]},e.getCoordByDirection=function(e,t){switch(t){case r.SlidDirection.Left:return 0===e.x?null:o.Coord(e.x-1,e.y);case r.SlidDirection.Right:return e.x===i.default.instance.Design.Row-1?null:o.Coord(e.x+1,e.y);case r.SlidDirection.Bottom:return e.y===i.default.instance.Design.Col-1?null:o.Coord(e.x,e.y+1);case r.SlidDirection.Top:return 0===e.y?null:o.Coord(e.x,e.y-1)}},e.getCombinations=function(e,t,n){for(var r=[],i=0;i<t;i++)for(var c=0,s=null,l=0;l<e;l++)if(0==l)c=1,s=n[l][i].type;else if(n[l][i]&&n[l][i].type===s){if(c++,l===e-1&&c>=3){for(var u=[],p=0;p<c;p++)u.push(o.Coord(l-p,i));r.push(new a.Combination(u))}}else{if(c>=3){for(u=[],p=0;p<c;p++)u.push(o.Coord(l-1-p,i));r.push(new a.Combination(u))}c=1,s=n[l][i].type}for(l=0;l<e;l++)for(c=0,s=null,i=0;i<t;i++)if(0==i)c=1,s=n[l][i].type;else if(n[l][i]&&n[l][i].type===s){if(c++,i===t-1&&c>=3){for(u=[],p=0;p<c;p++)u.push(o.Coord(l,i-p));for(p=0;p<r.length;p++){(f=r[p].include(u))&&r[p].merge(u,f)}r.push(new a.Combination(u))}}else{if(c>=3){for(u=[],p=0;p<c;p++)u.push(o.Coord(l,i-1-p));for(p=0;p<r.length;p++){var f;(f=r[p].include(u))&&r[p].merge(u,f)}r.push(new a.Combination(u))}c=1,s=n[l][i].type}return r},e.getCoordsCanRemoveByOneStep=function(e){},e.hasValidCombo=function(e,t,n){try{for(var o=0;o<e;o++)for(var r=0;r<t;r++){if(r+3<=t-1){if(n[r][o].type===n[r+1][o].type&&n[r][o].type===n[r+3][o].type)return!0;if(n[r][o].type===n[r+2][o].type&&n[r][o].type===n[r+3][o].type)return!0}if(n[r][o].type===n[r+1][o].type){if(o-1>=0&&n[r][o].type===n[r+2][o-1].type)return!0;if(o+1<=e-1&&n[r][o].type===n[r+2][o+1].type)return!0}if(n[r][o].type===n[r+2][o].type){if(o-1>=0&&n[r][o].type===n[r+1][o-1].type)return!0;if(o+1<=e-1&&n[r][o].type===n[r+1][o+1].type)return!0}if(o-1>=0&&n[r][o].type===n[r+1][o-1].type&&n[r+1][o-1].type===n[r+2][o-1].type)return!0;if(o+1<=e-1&&n[r][o].type===n[r+1][o+1].type&&n[r+1][o+1].type===n[r+2][o+1].type)return!0;if(o+3<=e-1){if(n[r][o].type===n[r][o+1].type&&n[r][o].type===n[r][o+3].type)return!0;if(n[r][o].type===n[r][o+2].type&&n[r][o].type===n[r][o+3].type)return!0}if(n[r][o].type===n[r][o+1].type){if(r-1>=0&&n[r][o].type===n[r-1][o+2].type)return!0;if(r+1<=t-1&&n[r][o].type===n[r+1][o+2].type)return!0}if(n[r][o].type===n[r][o+2].type){if(r-1>=0&&n[r][o].type===n[r-1][o+1].type)return!0;if(r+1<=t-1&&n[r][o].type===n[r+1][o+1].type)return!0}if(r-1>=0&&n[r][o].type===n[r-1][o+1].type&&n[r-1][o+1].type===n[r-1][o+2].type)return!0;if(r+1<=t-1&&n[r][o].type===n[r+1][o+1].type&&n[r+1][o+1].type===n[r+1][o+2].type)return!0}}catch(e){return!0}return!1},e}();n.GameUtil=l,cc._RF.pop()},{"./Combination":"Combination","./Enum":"Enum","./Game/TileManager":"TileManager","./GameConfig":"GameConfig"}],HomeScene:[function(e,t,n){"use strict";cc._RF.push(t,"4c3409huIZNcZQeg6rN0fPH","HomeScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Scripts/Base/SceneComponent"),a=e("../Scripts/Enum"),c=e("../Scripts/Manager/AudioManager"),s=e("../Scripts/Manager/EventManager"),l=e("../Scripts/Manager/UserManager"),u=e("./StepButton"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.stepBtns=[],t}return o(t,e),t.prototype.onEnable=function(){s.default.getInstance().addEventListener(a.LevelDesignEvent.StepClick,this.handleStepButtonClicked,this)},t.prototype.onDisable=function(){s.default.getInstance().offEventListener(a.LevelDesignEvent.StepClick,this.handleStepButtonClicked,this)},t.prototype.onLoad=function(){this.stepBtns.forEach(function(e){return e.setStatus(3)});var e=a.GameDesignProgress.Step1_PuzzleBlockDesign;l.default.getInstance().isCurrentValid()||l.default.getInstance().loadTestUser(),this.nameLabel.string=l.default.getInstance().current.name,e=l.default.getInstance().current.getDesignProgress();for(var t=0;t<this.stepBtns.length;t++)t===e-1?this.stepBtns[t].setStatus(2):t<e-1?this.stepBtns[t].setStatus(1):this.stepBtns[t].setStatus(3)},t.prototype.handleStepButtonClicked=function(e){switch(c.default.getInstance().playEffect("UI_BUTTON",!1),e.step){case a.GameDesignProgress.Step1_PuzzleBlockDesign:cc.director.loadScene("PuzzleBlockDesignScene");break;case a.GameDesignProgress.Step2_PuzzleMapDesign:cc.director.loadScene("PuzzleMapDesignScene");break;case a.GameDesignProgress.Step3_InitialMapDesign:cc.director.loadScene("InitialMapSettingsScene");break;case a.GameDesignProgress.Step4_MatchEffectDesign:cc.director.loadScene("MatchEffectSettingScene");break;case a.GameDesignProgress.Step5_GameClearEffectDesign:cc.director.loadScene("ClearPlaySettingScene");break;case a.GameDesignProgress.Step6_BackgroundDesign:cc.director.loadScene("BackgroundSettingScene");break;case a.GameDesignProgress.Step7_TestAndRelease:cc.director.loadScene("EndTestScene")}},r([d(cc.Label)],t.prototype,"nameLabel",void 0),r([d(u.default)],t.prototype,"stepBtns",void 0),t=r([f],t)}(i.default);n.default=h,cc._RF.pop()},{"../Scripts/Base/SceneComponent":"SceneComponent","../Scripts/Enum":"Enum","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/EventManager":"EventManager","../Scripts/Manager/UserManager":"UserManager","./StepButton":"StepButton"}],HttpClient:[function(e,t,n){"use strict";cc._RF.push(t,"2b6eafrxexKVr3oVYXd2P9I","HttpClient"),Object.defineProperty(n,"__esModule",{value:!0}),n.HttpClient=void 0;var o=cc._decorator;o.ccclass,o.property;function r(e){void 0===e&&(e=5e3),this.xhr=new XMLHttpRequest,this.xhr.timeout=e}n.HttpClient=r,r.prototype.open=function(e,t,n){return this.xhr.open(e,t,n),this},r.prototype.error=function(e){return this.xhr.onerror=e,this},r.prototype.response=function(e){var t=this;return this.xhr.onreadystatechange=function(){4===t.xhr.readyState&&t.xhr.status>=200&&t.xhr.status<300?(console.log("success"),console.log(t.xhr.responseText),e(t.xhr.responseText)):console.log("fail")},this},r.prototype.setRequestHeader=function(e,t){return this.xhr.setRequestHeader(e,t),this},r.prototype.send=function(e){return e?this.xhr.send(e):this.xhr.send(),this},cc._RF.pop()},{}],InitialMapPreview:[function(e,t,n){"use strict";cc._RF.push(t,"2cd93MNUPRJy7Yl/Xl1yw7H","InitialMapPreview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/GameConfig"),c=e("../../../../Scripts/LevelDesign"),s=e("../../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview"),l=e("../../../../Scripts/Manager/ResManager"),u=e("../../../../Scripts/Manager/UserManager"),p=e("../../../../Scripts/Manager/EventManager"),f=e("../../../../Prefabs/Tile/TilePreview/TilePreview"),d=cc._decorator,h=d.ccclass,y=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._initialTiles=[],t._map=new Map,t._currentType=i.TileType.UNKNOWN,t._blockDesignSettings=null,t}return o(t,e),Object.defineProperty(t.prototype,"Current",{set:function(e){this._currentType=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.handleTouchEnded,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.handleTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.handleTouchEnded,this)},t.prototype.handleTouchBegan=function(e){},t.prototype.handleTouchMoved=function(e){if(this._currentType!=i.TileType.UNKNOWN){var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);this.fillTile(n)}},t.prototype.handleTouchEnded=function(e){if(this._currentType!=i.TileType.UNKNOWN){var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);this.fillTile(n)}},t.prototype.fillTile=function(e){var t=this.isContainRect(e);t.contain&&(this._map.has(t.coord)?this._map.get(t.coord).type!=this._currentType&&(this.deleteTile(t.coord),this.addTile(t.coord,this._currentType)):this.addTile(t.coord,this._currentType))},t.prototype.isContainRect=function(e){for(var t=0;t<this._initialTiles.length;t++)if(this._initialTiles[t].rect.contains(e))return{contain:!0,coord:this._initialTiles[t].coord};return{contain:!1}},t.prototype._notify=function(){e.prototype._notify.call(this);for(var t=0;t<this.mapSize;t++)for(var n=0;n<this.mapSize;n++){var o=new Object;o.coord=a.Coord(t,n),o.rect=new cc.Rect(t*this.slotSize,-(n+1)*this.slotSize,this.slotSize,this.slotSize),this._initialTiles.push(o)}this._blockDesignSettings=u.default.getInstance().current.design.blockDesignSettings},t.prototype.addTile=function(e,t){var n=this._blockDesignSettings.settings.find(function(e){return e.tileType===t});if(null!==n&&void 0!==n){var o=l.default.getInstance().tilePreviewPrefab,r=cc.instantiate(o);r.parent=this.node,r.active=!0,r.position=new cc.Vec3(e.x*this.slotSize+this.slotSize/2,-(e.y*this.slotSize+this.slotSize/2),0);var a=r.getComponent(f.default);a.setType(t),a.setCoord(e,!1),this._map.set(e,a),p.default.getInstance().emitEvent(i.LevelDesignEvent.InitialMapChange)}},t.prototype.deleteTile=function(e){this._map.get(e).node.destroy(),this._map.delete(e),p.default.getInstance().emitEvent(i.LevelDesignEvent.InitialMapChange)},t.prototype.deleteAllTiles=function(){for(var e=Array.from(this._map.values()),t=0;t<e.length;t++)e[t].node.destroy();this._map.clear(),p.default.getInstance().emitEvent(i.LevelDesignEvent.InitialMapChange)},t.prototype.isReady=function(){return this._map.size==this._initialTiles.length},t.prototype.getTileContents=function(){for(var e=[],t=0;t<this._initialTiles.length;t++){var n=this._initialTiles[t].coord,o=this._map.get(n).type,r=new c.TileContent(n,o);e.push(r)}return e},t=r([h],t)}(s.default));n.default=y,cc._RF.pop()},{"../../../../Prefabs/Tile/TilePreview/TilePreview":"TilePreview","../../../../Scripts/Enum":"Enum","../../../../Scripts/GameConfig":"GameConfig","../../../../Scripts/LevelDesign":"LevelDesign","../../../../Scripts/Manager/EventManager":"EventManager","../../../../Scripts/Manager/ResManager":"ResManager","../../../../Scripts/Manager/UserManager":"UserManager","../../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview":"MapBoxPreview"}],InitialMapSettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"59f3ekNeaBHL65SS8mJDr67","InitialMapSettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../../Scripts/Enum"),s=e("../../../../Scripts/Manager/EventManager"),l=e("./InitialMapPreview"),u=e("../../../../Scripts/Manager/ResManager"),p=e("../../../../Scripts/Base/PanelComponent"),f=e("./TileMenu"),d=e("../../../../Scripts/Base/SwitchButton"),h=e("../../../../Scripts/Manager/UserManager"),y=e("../../../../Scripts/Popups/Toast"),g=e("../../../../Scripts/Popups/ConfirmPopup"),_=e("../../../../Scripts/Manager/AudioManager"),v=cc._decorator,b=v.ccclass,m=v.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileMenus=[],t.mapPreview=null,t.okBtn=null,t.confirmPopup=null,t._isTutorialShowing=!1,t}return o(t,e),t.prototype.onLoad=function(){s.default.getInstance().addEventListener(c.LevelDesignEvent.TileMenuClick,this.handleTileMenuClicked,this),s.default.getInstance().addEventListener(c.LevelDesignEvent.InitialMapChange,this.handleInitialMapChanged,this),s.default.getInstance().addEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDestroy=function(){s.default.getInstance().offEventListener(c.LevelDesignEvent.TileMenuClick,this.handleTileMenuClicked,this),s.default.getInstance().offEventListener(c.LevelDesignEvent.InitialMapChange,this.handleInitialMapChanged,this),s.default.getInstance().offEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.start=function(){this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return null!==u.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return h.default.getInstance().isCurrentValid()||h.default.getInstance().loadTestUser(),h.default.getInstance().current.design.initialMapTileTypeSettings||(cc.log("show tutorial"),s.default.getInstance().emitEvent(c.TutorialEvent.TutorialShown)),this._initMapPreview(h.default.getInstance().current.design.mapSettings.size),this.tileMenus.forEach(function(e){return e.isChecking=!1}),this.tileMenus.forEach(function(e){e.isChecking=!1;var t=h.default.getInstance().current.design.blockDesignSettings.settings.find(function(t){return t.tileType===e.type});e.initialize(t)}),this.handleInitialMapChanged(),[2]}})})},t.prototype._initMapPreview=function(e){this.mapPreview.mapSize=e},t.prototype.onOkClicked=function(){if(!this.okBtn.isOn){var e=cc.instantiate(u.default.getInstance().toastPrefab);e.parent=this.node.parent;var t=e.getComponent(y.default);return t.destroyWhenHide=!0,t.setMessage("\ube14\ub85d\uc744 \ub354 \ucc44\uc6cc \uc8fc\uc138\uc694!"),void t.show()}_.default.getInstance().playEffect("UI_BUTTON",!1),s.default.getInstance().emitEvent(c.LevelDesignEvent.InitialMapEnded,this)},t.prototype.onRemoveClicked=function(){_.default.getInstance().playEffect("UI_BUTTON",!1),this.confirmPopup.show()},t.prototype.handleCleanConfirmReturn=function(e){this.confirmPopup.hide(),"yes"===e&&this.mapPreview.deleteAllTiles()},t.prototype.handleTileMenuClicked=function(e){_.default.getInstance().playEffect("UI_BUTTON",!1),this.tileMenus.forEach(function(t){t.isChecking=t===e}),this.mapPreview.Current=e.type},t.prototype.handleInitialMapChanged=function(){this.okBtn.isOn=this.mapPreview.isReady(),this._isTutorialShowing&&s.default.getInstance().emitEvent(c.TutorialEvent.TutorialClosed)},t.prototype.handleTutorialCompleted=function(e){var t=this.tileMenus.find(function(t){return t.type===e});t&&this.handleTileMenuClicked(t),this._isTutorialShowing=!0},r([m([f.default])],t.prototype,"tileMenus",void 0),r([m(l.default)],t.prototype,"mapPreview",void 0),r([m(d.default)],t.prototype,"okBtn",void 0),r([m(g.default)],t.prototype,"confirmPopup",void 0),t=r([b],t)}(p.default);n.default=E,cc._RF.pop()},{"../../../../Scripts/Base/PanelComponent":"PanelComponent","../../../../Scripts/Base/SwitchButton":"SwitchButton","../../../../Scripts/Enum":"Enum","../../../../Scripts/Manager/AudioManager":"AudioManager","../../../../Scripts/Manager/EventManager":"EventManager","../../../../Scripts/Manager/ResManager":"ResManager","../../../../Scripts/Manager/UserManager":"UserManager","../../../../Scripts/Popups/ConfirmPopup":"ConfirmPopup","../../../../Scripts/Popups/Toast":"Toast","./InitialMapPreview":"InitialMapPreview","./TileMenu":"TileMenu"}],InitialMapSettingsScene:[function(e,t,n){"use strict";cc._RF.push(t,"68157yi04JBBLmniCzzzFTw","InitialMapSettingsScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Manager/EventManager"),c=e("../../Scripts/Enum"),s=e("../../Scripts/Manager/UserManager"),l=e("../../Scripts/Manager/AudioManager"),u=cc._decorator,p=u.ccclass,f=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),a.default.getInstance().addEventListener(c.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),a.default.getInstance().addEventListener(c.LevelDesignEvent.InitialMapEnded,this.handleInitialMapSettingEnded,this),a.default.getInstance().addEventListener(c.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),a.default.getInstance().addEventListener(c.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this),a.default.getInstance().addEventListener(c.TutorialEvent.TutorialClosed,this.handleTutorialClosed,this)},t.prototype.onDestroy=function(){a.default.getInstance().offEventListener(c.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),a.default.getInstance().offEventListener(c.LevelDesignEvent.InitialMapEnded,this.handleInitialMapSettingEnded,this),a.default.getInstance().offEventListener(c.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),a.default.getInstance().offEventListener(c.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this),a.default.getInstance().offEventListener(c.TutorialEvent.TutorialClosed,this.handleTutorialClosed,this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleInitialMapSettingEnded=function(e){var t={settings:e.mapPreview.getTileContents()};s.default.getInstance().isCurrentValid()||s.default.getInstance().loadTestUser(),s.default.getInstance().current.design.initialMapTileTypeSettings=t,s.default.getInstance().current.save(),this.setPanelVisible("complete",!0),l.default.getInstance().playEffect("STEP_COMPLETE",!1)},t.prototype.handleNextButtonClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t.prototype.handleTutorialClosed=function(){this.setPanelVisible("tutorial",!1)},t=r([p],t)}(i.default));n.default=f,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager","../../Scripts/Manager/UserManager":"UserManager"}],LevelDesign:[function(e,t,n){"use strict";cc._RF.push(t,"92c0aiCM+NG/L2cPddNV1gq","LevelDesign"),Object.defineProperty(n,"__esModule",{value:!0}),n.LevelDesign=n.TileContent=n.getBlockDesign=void 0;var o=cc._decorator,r=(o.ccclass,o.property,e("./GameConfig")),i=e("./GameUtil");n.getBlockDesign=function(){var e={};return e.backgroundColor=i.ColorUtil.getHex(cc.Color.WHITE),e.characterMainColor=i.ColorUtil.getHex(cc.Color.WHITE),e.characterSubColor=i.ColorUtil.getHex(cc.Color.WHITE),e};var a=function(){function e(e,t){this.coord=e,this.type=t}return Object.defineProperty(e.prototype,"coord",{get:function(){return r.Coord(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y},enumerable:!1,configurable:!0}),e}();n.TileContent=a;var c=function(){function e(){this.blockDesignSettings=null,this.mapSettings=null,this.initialMapTileTypeSettings=null,this.matchEffectSettings=null,this.clearEffectSettings=null,this.backgroundSettings=null}return Object.defineProperty(e.prototype,"Row",{get:function(){return this.mapSettings.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Col",{get:function(){return this.mapSettings.size},enumerable:!1,configurable:!0}),e.prototype.getTileContentWithCoord=function(e,t){return"number"==typeof e?this.initialMapTileTypeSettings.settings.find(function(n){return n.x===e&&n.y===t}):this.initialMapTileTypeSettings.settings.find(function(t){return t.x===e.x&&t.y===e.y})},e}();n.LevelDesign=c,cc._RF.pop()},{"./GameConfig":"GameConfig","./GameUtil":"GameUtil"}],LevelPlayPlayPanel:[function(e,t,n){"use strict";cc._RF.push(t,"fb2b8I3jNFGfLYxEtZClfTH","LevelPlayPlayPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Scripts/Enum"),s=e("../Scripts/Game/GameManager"),l=e("../Scripts/Manager/AudioManager"),u=e("../Scripts/Manager/EventManager"),p=e("../Scripts/Manager/UserManager"),f=e("../Steps/Step7_EndTest/Clear/ClearPopup"),d=e("../Steps/Step7_EndTest/ReadyStart/ReadyStartPopup"),h=cc._decorator,y=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pausePopup=null,t.readyStartPopup=null,t.clearPopup=null,t}return o(t,e),t.prototype.onEnable=function(){u.default.getInstance().addEventListener(c.GameEvent.LevelLoaded,this.handleLevelLoaded,this),u.default.getInstance().addEventListener(c.GameEvent.TimerWarned,this.handleTimerWarned,this),u.default.getInstance().addEventListener(c.GameEvent.TimerEnded,this.handleTimerEnded,this)},t.prototype.onDisable=function(){u.default.getInstance().offEventListener(c.GameEvent.LevelLoaded,this.handleLevelLoaded,this),u.default.getInstance().offEventListener(c.GameEvent.TimerWarned,this.handleTimerWarned,this),u.default.getInstance().offEventListener(c.GameEvent.TimerEnded,this.handleTimerEnded,this)},t.prototype.startLevel=function(){this._init(),this.readyStartPopup.node.active=!1,this.pausePopup.active=!1,this.clearPopup.node.active=!1},t.prototype.stopLevel=function(){s.default.instance.stopGame(),this.readyStartPopup.node.active=!1,this.pausePopup.active=!1,this.clearPopup.node.active=!1},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=p.default.getInstance().current.design,[4,s.default.instance.init(e)];case 1:return t.sent(),[2]}})})},t.prototype.handleLevelLoaded=function(){this.readyStartPopup.show()},t.prototype.handleTimerWarned=function(){cc.log("timer: warn")},t.prototype.handleTimerEnded=function(){this.clearPopup.show()},t.prototype.onPauseClicked=function(){l.default.getInstance().playEffect("UI_POPUP",!1),this.pausePopup.active=!0,s.default.instance.pauseGame()},t.prototype.onContinueClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),this.pausePopup.active=!1,s.default.instance.resumeGame()},t.prototype.onCompleteClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),s.default.instance.stopGame(),u.default.getInstance().emitEvent(c.GameEvent.GameEnded)},t.prototype.handleClearPopupClosed=function(e){"retry"===e?(this.stopLevel(),this.startLevel()):"complete"===e&&u.default.getInstance().emitEvent(c.GameEvent.GameEnded)},r([g(cc.Node)],t.prototype,"pausePopup",void 0),r([g(d.default)],t.prototype,"readyStartPopup",void 0),r([g(f.default)],t.prototype,"clearPopup",void 0),t=r([y],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../Scripts/Enum":"Enum","../Scripts/Game/GameManager":"GameManager","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/EventManager":"EventManager","../Scripts/Manager/UserManager":"UserManager","../Steps/Step7_EndTest/Clear/ClearPopup":"ClearPopup","../Steps/Step7_EndTest/ReadyStart/ReadyStartPopup":"ReadyStartPopup"}],LevelPlayScene:[function(e,t,n){"use strict";cc._RF.push(t,"807c9Wypx9DaI5iXnHbL+5H","LevelPlayScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Scripts/Base/SceneComponent"),s=e("../Scripts/Enum"),l=e("../Scripts/Manager/AudioManager"),u=e("../Scripts/Manager/EventManager"),p=e("../Scripts/Manager/ResManager"),f=e("../Scripts/Manager/UserManager"),d=e("./LevelPlayPlayPanel"),h=cc._decorator,y=h.ccclass,g=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),this._init(),u.default.getInstance().addEventListener(s.GameEvent.ResourcesLoaded,this.handleResourceLoaded,this),u.default.getInstance().addEventListener(s.GameEvent.GameEnded,this.handleGameEnded,this),u.default.getInstance().addEventListener(s.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this)},t.prototype.onDestroy=function(){u.default.getInstance().offEventListener(s.GameEvent.ResourcesLoaded,this.handleResourceLoaded,this),u.default.getInstance().offEventListener(s.GameEvent.GameEnded,this.handleGameEnded,this),u.default.getInstance().offEventListener(s.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this)},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return p.default.getInstance()&&l.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return u.default.getInstance().emitEvent(s.GameEvent.ResourcesLoaded),f.default.getInstance().isCurrentValid()||f.default.getInstance().loadTestUser(),[2]}})})},t.prototype.handleResourceLoaded=function(){this.setPanelVisible("title",!0)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("play",!0),this.getPanel("play").getComponent(d.default).startLevel()},t.prototype.handleGameEnded=function(){this.setPanelVisible("play",!1),this.setPanelVisible("title",!0)},t=r([y],t)}(c.default));n.default=g,cc._RF.pop()},{"../Scripts/Base/SceneComponent":"SceneComponent","../Scripts/Enum":"Enum","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/EventManager":"EventManager","../Scripts/Manager/ResManager":"ResManager","../Scripts/Manager/UserManager":"UserManager","./LevelPlayPlayPanel":"LevelPlayPlayPanel"}],LevelPlayTilePanel:[function(e,t,n){"use strict";cc._RF.push(t,"22456tiIgxAf60WTx2zR6kG","LevelPlayTilePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Prefabs/Tile/TilePreview/TilePreview"),s=e("../Scripts/Enum"),l=e("../Scripts/Manager/AudioManager"),u=e("../Scripts/Manager/EventManager"),p=e("../Scripts/Manager/ResManager"),f=e("../Scripts/Manager/UserManager"),d=e("../Steps/Step2_PuzzleMapDesign/MapBox/MapBoxPreview"),h=cc._decorator,y=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.nameLabel=null,t.map=null,t.logoSprite=null,t.logoFrames=[],t}return o(t,e),t.prototype.start=function(){this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return null!==p.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return f.default.getInstance().isCurrentValid()||f.default.getInstance().loadTestUser(),this.nameLabel.string=f.default.getInstance().current.name,this._initializeMap(),[2]}})})},t.prototype._initLogo=function(e){switch(e){case 1:this.logoSprite.spriteFrame=this.logoFrames[0];break;case 2:this.logoSprite.spriteFrame=this.logoFrames[1];break;case 3:case 4:this.logoSprite.spriteFrame=this.logoFrames[0];break;case 5:this.logoSprite.spriteFrame=this.logoFrames[1];break;case 6:this.logoSprite.spriteFrame=this.logoFrames[0]}},t.prototype._initializeMap=function(){var e=f.default.getInstance().current.design;this.background.spriteFrame=p.default.getInstance().backgroundSources.find(function(t){return t.index===e.backgroundSettings.background}).frame,this._initLogo(e.backgroundSettings.background),this.map.mapSize=e.mapSettings.size;for(var t=e.initialMapTileTypeSettings.settings,n=this.map.slotSize,o=0;o<t.length;o++){var r=t[o];if(r.x<e.mapSettings.size&&r.y<e.mapSettings.size){var i=p.default.getInstance().tilePreviewPrefab,a=cc.instantiate(i);a.parent=this.map.node,a.active=!0,a.position=new cc.Vec3(r.x*n+n/2,-(r.y*n+n/2),0);var s=a.getComponent(c.default);s.setType(r.type),s.setCoord(r.coord,!1)}}},t.prototype.onOkClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),u.default.getInstance().emitEvent(s.LevelDesignEvent.TitlePanelEnded)},r([g(cc.Sprite)],t.prototype,"background",void 0),r([g(cc.Label)],t.prototype,"nameLabel",void 0),r([g(d.default)],t.prototype,"map",void 0),r([g(cc.Sprite)],t.prototype,"logoSprite",void 0),r([g(cc.SpriteFrame)],t.prototype,"logoFrames",void 0),t=r([y],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../Prefabs/Tile/TilePreview/TilePreview":"TilePreview","../Scripts/Enum":"Enum","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/EventManager":"EventManager","../Scripts/Manager/ResManager":"ResManager","../Scripts/Manager/UserManager":"UserManager","../Steps/Step2_PuzzleMapDesign/MapBox/MapBoxPreview":"MapBoxPreview"}],LoadingScene:[function(e,t,n){"use strict";cc._RF.push(t,"eca5dpQ4tBBX7F2psJJKUla","LoadingScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Scripts/API"),s=e("../Scripts/Manager/AudioManager"),l=e("../Scripts/Manager/ResManager"),u=e("../Scripts/Manager/UserManager"),p=cc._decorator,f=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._goToLevelPlayScene=!1,t._hasDownloadLevelData=!1,t}return o(t,e),t.prototype.start=function(){this._goToLevelPlayScene=!1;var e=new Object,t=(e=this._getRequest()).admin;if(null!==t&&void 0!==t)cc.log("go to admin scene"),cc.director.loadScene("AdminScene");else{this._initGameResources();var n=e.id;null===n||void 0===n?cc.log("go to title scene"):(this._goToLevelPlayScene=!0,this._requestLevelData(n,this.handleLevelUrlRequested.bind(this)),cc.log("go to level play scene"))}},t.prototype._initGameResources=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return l.default.getInstance()&&s.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return this._goToLevelPlayScene?[3,3]:(cc.director.loadScene("TitleScene"),[3,6]);case 3:return this._hasDownloadLevelData?[3,5]:[4,new Promise(function(e){return setTimeout(e,100)})];case 4:return e.sent(),[3,3];case 5:cc.director.loadScene("LevelPlayScene"),e.label=6;case 6:return[2]}})})},t.prototype._requestLevelData=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState&&n.status>=200&&n.status<400){var e=JSON.parse(n.responseText);t(e)}};var o=cc.js.formatStr(c.API.PATH_GET_LEVEL,e),r=cc.js.formatStr("%s%s",c.API.HOST,o);n.open("GET",r),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send()},t.prototype.handleLevelUrlRequested=function(e){cc.log(e);var t=e.levelUrl;this._downloadLevelData(t)},t.prototype._downloadLevelData=function(e){var t=cc.loader.getXMLHttpRequest();t.open("GET",e),t.onreadystatechange=function(){4===t.readyState&&t.status>=200&&t.status<400?u.default.getInstance().createNewUserWithJson(t.responseText)&&(this._hasDownloadLevelData=!0):cc.log("level data not exist: ",e)}.bind(this),t.send()},t.prototype._getRequest=function(){var e=location.search,t=new Object;if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),o=0;o<n.length;o++)t[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return t},t=r([f],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../Scripts/API":"API","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/ResManager":"ResManager","../Scripts/Manager/UserManager":"UserManager"}],LoginScene:[function(e,t,n){"use strict";cc._RF.push(t,"4a877/8TgRKl7PoiCQaqZZT","LoginScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Scripts/Base/OutlineTextButton"),s=e("../Scripts/Base/SceneComponent"),l=e("../Scripts/Manager/AudioManager"),u=e("../Scripts/Manager/UserManager"),p=e("../Scripts/Popups/Toast"),f=cc._decorator,d=f.ccclass,h=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameEditBox=null,t.ageLabel=null,t.confirmPopup=null,t.nameLengthOverToast=null,t.confirmNameLabel=null,t.confirmAgeLabel=null,t.startBtn=null,t._userAge=0,t}var n;return o(t,e),n=t,Object.defineProperty(t.prototype,"userName",{get:function(){return this.nameEditBox.string},set:function(e){this.nameEditBox.string=e,this.updateName()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userAge",{get:function(){return this._userAge},set:function(e){this._userAge=e,this.updateAge()},enumerable:!1,configurable:!0}),t.prototype.start=function(){n._instance=this,this.confirmPopup.active=!1,this.startBtn.setTouchEnable(!1);for(var e=0;e<this.panels.length;e++)this.panels[e].node.active=!1;this._agePickerView=new PickerView({selector:"agePicker",title:"\ub098\uc774",cols:[{curVal:6,values:[4,5,6,7,8,9,10,11,12,13,14,15]}],onConfirm:function(e){n._instance.userAge=e[0]},onCancel:function(){}})},t.prototype.onStartClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),this.checkNameLength()?this.showConfirmPopup():this.nameLengthOverToast.show()},t.prototype.onAgeClicked=function(){this._agePickerView.show()},t.prototype.updateName=function(){this.nameEditBox.string=this.userName},t.prototype.updateAge=function(){this.ageLabel.string=this.userAge.toString()+"\uc138",this.checkValid()},t.prototype.handleNameEditBoxReturn=function(){this.checkNameLength()?this.checkValid():this.nameLengthOverToast.show()},t.prototype.handleNameEditBoxDidEnded=function(){this.checkNameLength()?this.checkValid():this.nameLengthOverToast.show()},t.prototype.checkValid=function(){""!=this.userName&&this.userAge>0?this.startBtn.setTouchEnable(!0):this.startBtn.setTouchEnable(!1)},t.prototype.submitUser=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return l.default.getInstance().playEffect("UI_BUTTON",!1),[4,u.default.getInstance().submitUser(this.userName,this.userAge,this.handleUserCreated)];case 1:return e.sent()&&cc.director.loadScene("HomeScene"),[2]}})})},t.prototype.handleUserCreated=function(e){console.log("handleUserCreated: ",e),u.default.getInstance().createNewUser(e.item),cc.director.loadScene("HomeScene")},t.prototype.showConfirmPopup=function(){this.confirmNameLabel.string=this.userName,this.confirmAgeLabel.string=this.userAge.toString()+"\uc138",this.confirmPopup.active=!0,l.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.hideConfirmPopup=function(){this.confirmPopup.active=!1,l.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.checkNameLength=function(){return!((new TextEncoder).encode(this.nameEditBox.string).length>12)},t._instance=null,r([h(cc.EditBox)],t.prototype,"nameEditBox",void 0),r([h(cc.Label)],t.prototype,"ageLabel",void 0),r([h(cc.Node)],t.prototype,"confirmPopup",void 0),r([h(p.default)],t.prototype,"nameLengthOverToast",void 0),r([h(cc.Label)],t.prototype,"confirmNameLabel",void 0),r([h(cc.Label)],t.prototype,"confirmAgeLabel",void 0),r([h(c.default)],t.prototype,"startBtn",void 0),t=n=r([d],t)}(s.default);n.default=y,cc._RF.pop()},{"../Scripts/Base/OutlineTextButton":"OutlineTextButton","../Scripts/Base/SceneComponent":"SceneComponent","../Scripts/Manager/AudioManager":"AudioManager","../Scripts/Manager/UserManager":"UserManager","../Scripts/Popups/Toast":"Toast"}],MapBoxPreview:[function(e,t,n){"use strict";cc._RF.push(t,"8bc64tR83ZPkrf8H2ab3yk0","MapBoxPreview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.box=null,t.parent=null,t._size=0,t._mapBoxSize=140,t._scaleBy5=1.4,t._scaleBy6=1.15,t._scaleBy7=1,t}return o(t,e),Object.defineProperty(t.prototype,"mapSize",{get:function(){return this._size},set:function(e){this._size=e,this._notify()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slotSize",{get:function(){return this._mapBoxSize},enumerable:!1,configurable:!0}),t.prototype._notify=function(){switch(this.box.scale=1,this.box.width=this.mapSize*this._mapBoxSize,this.box.height=this.mapSize*this._mapBoxSize,this.box.position=new cc.Vec3(this.box.width/-2,this.box.height/2,0),this.mapSize){case 5:this.parent.scale=this._scaleBy5;break;case 6:this.parent.scale=this._scaleBy6;break;case 7:this.parent.scale=this._scaleBy7;break;default:this.parent.scale=0}},r([c(cc.Node)],t.prototype,"box",void 0),r([c(cc.Node)],t.prototype,"parent",void 0),r([c],t.prototype,"_size",void 0),r([c],t.prototype,"mapSize",null),t=r([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],MapSizeSelection:[function(e,t,n){"use strict";cc._RF.push(t,"fc57cG/GE5JBKX3wkeBdLQb","MapSizeSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Base/SwitchButton"),a=e("../../../Scripts/Enum"),c=e("../../../Scripts/Manager/EventManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sizeType=a.MapSizeType.Size_5,t._btn=null,t}return o(t,e),t.prototype.onLoad=function(){this._btn=this.getComponent(i.default);var e=new cc.Component.EventHandler;e.target=this.node,e.component="MapSizeSelection",e.handler="onClicked",e.customEventData="",this._btn.clickEvents=[],this._btn.clickEvents.push(e)},t.prototype.onClicked=function(){this._btn.isOn=!1,c.default.getInstance().emitEvent(a.LevelDesignEvent.MapSizeSelect,this)},r([u({type:cc.Enum(a.MapSizeType),displayName:"Map Size Type"})],t.prototype,"sizeType",void 0),t=r([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],MapSizeSettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"da463YtPWpFS6Gj0R8WE+vK","MapSizeSettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Base/PanelComponent"),a=e("../../../Scripts/Base/SwitchButton"),c=e("../../../Scripts/Enum"),s=e("../../../Scripts/Manager/AudioManager"),l=e("../../../Scripts/Manager/EventManager"),u=e("../../../Scripts/Manager/UserManager"),p=e("../MapBox/MapBoxPreview"),f=e("./MapSizeSelection"),d=cc._decorator,h=d.ccclass,y=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapPreview=null,t.selections=[],t.okBtn=null,t._mapSize=null,t}return o(t,e),Object.defineProperty(t.prototype,"mapSize",{get:function(){return this._mapSize},enumerable:!1,configurable:!0}),t.prototype.start=function(){if(this._mapSize=null,u.default.getInstance().isCurrentValid()||u.default.getInstance().loadTestUser(),u.default.getInstance().current.design.mapSettings){var e=u.default.getInstance().current.design.mapSettings;this._mapSize=e.size}else cc.log("show tutorial"),l.default.getInstance().emitEvent(c.TutorialEvent.TutorialShown);this._updateMapPreview(),l.default.getInstance().addEventListener(c.LevelDesignEvent.MapSizeSelect,this.handleMapSizeSelectionClicked,this),l.default.getInstance().addEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.onDestroy=function(){l.default.getInstance().offEventListener(c.LevelDesignEvent.MapSizeSelect,this.handleMapSizeSelectionClicked,this),l.default.getInstance().offEventListener(c.TutorialEvent.TutorialCompleted,this.handleTutorialCompleted,this)},t.prototype.handleMapSizeSelectionClicked=function(e){var t=this;this._mapSize=e.sizeType,this._updateMapPreview(),this._checkDesignStatus(),this.selections.forEach(function(e){var n=e.sizeType!==t._mapSize,o=e.getComponent(a.default);o.isOn=n,o.interactable=n}),s.default.getInstance().playEffect("UI_BUTTON",!1)},t.prototype.onOkClicked=function(){this.okBtn.isOn?(s.default.getInstance().playEffect("UI_BUTTON",!1),l.default.getInstance().emitEvent(c.LevelDesignEvent.MapSizeDesignFinished,this)):cc.log("map still not setting")},t.prototype._updateMapPreview=function(){var e=null===this._mapSize?0:this._mapSize;this.mapPreview.mapSize=e},t.prototype._checkDesignStatus=function(){this.okBtn.isOn=null!==this._mapSize},t.prototype.handleTutorialCompleted=function(e){cc.log("handleTutorialCompleted: ",e);var t=this.selections.find(function(t){return t.sizeType===e});t&&this.handleMapSizeSelectionClicked(t)},r([y(p.default)],t.prototype,"mapPreview",void 0),r([y(f.default)],t.prototype,"selections",void 0),r([y(a.default)],t.prototype,"okBtn",void 0),t=r([h],t)}(i.default);n.default=g,cc._RF.pop()},{"../../../Scripts/Base/PanelComponent":"PanelComponent","../../../Scripts/Base/SwitchButton":"SwitchButton","../../../Scripts/Enum":"Enum","../../../Scripts/Manager/AudioManager":"AudioManager","../../../Scripts/Manager/EventManager":"EventManager","../../../Scripts/Manager/UserManager":"UserManager","../MapBox/MapBoxPreview":"MapBoxPreview","./MapSizeSelection":"MapSizeSelection"}],MatchEffectPreview:[function(e,t,n){"use strict";cc._RF.push(t,"ed27aZpnuVD77kadVdQw3iH","MatchEffectPreview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=cc._decorator,c=a.ccclass,s=a.property,l=(function(){function e(){this.effectType=1,this.url=""}r([s({type:cc.Enum(i.MatchEffectType)})],e.prototype,"effectType",void 0),r([s({type:cc.String})],e.prototype,"url",void 0),e=r([c("Clip")],e)}(),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoPlayer=null,t.effectType=0,t}return o(t,e),t.prototype.onEnable=function(){this.videoPlayer.currentTime=0,this.videoPlayer.play()},t.prototype.setVisible=function(e){this.node.active=e,e&&this.videoPlayer.play()},t.prototype.handleVideoPlayEvent=function(e,t,n){t===cc.VideoPlayer.EventType.COMPLETED&&e.play()},r([s(cc.VideoPlayer)],t.prototype,"videoPlayer",void 0),r([s({type:cc.Enum(i.MatchEffectType)})],t.prototype,"effectType",void 0),t=r([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../../Scripts/Enum":"Enum"}],MatchEffectSettingScene:[function(e,t,n){"use strict";cc._RF.push(t,"6cfe5AQvRFHhLOKAjStgs3/","MatchEffectSettingScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Enum"),c=e("../../Scripts/Manager/AudioManager"),s=e("../../Scripts/Manager/EventManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),s.default.getInstance().addEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.MatchEffectDesignFinished,this.handleMatchEffectEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.onDestroy=function(){s.default.getInstance().offEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.MatchEffectDesignFinished,this.handleMatchEffectEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().offEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleMatchEffectEnded=function(){c.default.getInstance().playEffect("STEP_COMPLETE",!1),this.setPanelVisible("complete",!0)},t.prototype.handleNextButtonClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t=r([u],t)}(i.default));n.default=p,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager"}],MiniBlock:[function(e,t,n){"use strict";cc._RF.push(t,"3d0f6kh6C5LZ7l/opd5QCJt","MiniBlock");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("../../../../Scripts/Enum"),c=e("../../../../Scripts/Manager/EventManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=s.executeInEditMode;(function(e){e[e.Normal=0]="Normal",e[e.Active=1]="Active",e[e.Inactive=2]="Inactive"})(i||(i={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._blockType=a.BlockType.Rabbit,t.normalFrame=null,t.activeFrame=null,t.inactiveFrame=null,t._status=i.Normal,t}return o(t,e),Object.defineProperty(t.prototype,"blockType",{get:function(){return this._blockType},set:function(e){this._blockType=e,this.node.name=cc.js.formatStr("MiniBlock %s",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockStatus",{get:function(){return this._status},set:function(e){this._status=e,this._notifyStatus()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._notifyStatus()},t.prototype._notifyStatus=function(){var e=this.target.getComponent(cc.Sprite);switch(this.blockStatus){case i.Normal:e.spriteFrame=this.normalFrame;break;case i.Active:e.spriteFrame=this.activeFrame;break;case i.Inactive:e.spriteFrame=this.inactiveFrame}this.interactable=this.blockStatus===i.Normal},t.prototype.onClicked=function(){c.default.getInstance().emitEvent(a.LevelDesignEvent.IconSelect,this)},r([u({type:cc.Enum(a.BlockType)})],t.prototype,"_blockType",void 0),r([u({displayName:"Type",type:cc.Enum(a.BlockType)})],t.prototype,"blockType",null),r([u(cc.SpriteFrame)],t.prototype,"normalFrame",void 0),r([u(cc.SpriteFrame)],t.prototype,"activeFrame",void 0),r([u(cc.SpriteFrame)],t.prototype,"inactiveFrame",void 0),r([u({type:cc.Enum(i)})],t.prototype,"_status",void 0),r([u({type:cc.Enum(i),displayName:"Status"})],t.prototype,"blockStatus",null),t=r([l,p],t)}(cc.Button);n.default=f,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/Manager/EventManager":"EventManager"}],MiniTileSlider:[function(e,t,n){"use strict";cc._RF.push(t,"33a11xwG+BDcbj5293otT/B","MiniTileSlider");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slider=null,t.preProgress=0,t._count=0,t}return o(t,e),Object.defineProperty(t.prototype,"Count",{get:function(){return this._count},set:function(e){this._count=Math.min(Math.max(e,0),this._max),this.updateSlider()},enumerable:!1,configurable:!0}),t.prototype.setup=function(e){this._max=e,this._count=0,this.preProgress=0,this.slider.progress=0},t.prototype.handleSlideEvent=function(e){var t=Math.ceil(this._max*this.slider.progress);e<=0&&t>this.Count?this.slider.progress=this.preProgress:(this.preProgress=this.slider.progress,this.Count=t)},t.prototype.updateSlider=function(){var e=this.Count/this._max;this.slider.progress=e},r([c(cc.Slider)],t.prototype,"slider",void 0),t=r([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],OutlineTextButton:[function(e,t,n){"use strict";cc._RF.push(t,"e73c3lOnTxLjJk4KbaJQePX","OutlineTextButton");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.outline=null,t.outlineNormalColor=cc.Color.WHITE,t.outlineDisabledColor=cc.Color.WHITE,t}return o(t,e),t.prototype.setTouchEnable=function(e){this.interactable=e,this.outline.color=e?this.outlineNormalColor:this.outlineDisabledColor},r([c(cc.LabelOutline)],t.prototype,"outline",void 0),r([c(cc.Color)],t.prototype,"outlineNormalColor",void 0),r([c(cc.Color)],t.prototype,"outlineDisabledColor",void 0),t=r([a],t)}(cc.Button);n.default=s,cc._RF.pop()},{}],Palette:[function(e,t,n){"use strict";cc._RF.push(t,"e9036LBNuJLArcKo3xSBYTP","Palette");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./ColorButton"),a=cc._decorator,c=a.ccclass,s=a.property,l=a.executeInEditMode,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t._map=new Map,t}return o(t,e),t.prototype.initialize=function(e){this._map.forEach(function(e,t){e&&e.node.destroy()}),this._map.clear();for(var t=0;t<e.length;t++){var n=cc.instantiate(this.prefab);n.parent=this.node;var o=n.getComponent(i.default);o.color=e[t],this._map.set(e[t],o)}},t.prototype.setUsedColors=function(e){this._map.forEach(function(t,n){e.find(function(e){return e.equals(n)})?t.hasUsed=!0:t.hasUsed=!1})},t.prototype.setSelectedColorButton=function(e){this._map.forEach(function(t,n){t===e?t.isCheck=!0:t.hasUsed||(t.isCheck=!1)})},t.prototype.getColorButton=function(e){return this._map.has(e)?this._map.get(e):null},r([s(cc.Prefab)],t.prototype,"prefab",void 0),t=r([c,l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./ColorButton":"ColorButton"}],PanelComponent:[function(e,t,n){"use strict";cc._RF.push(t,"bd9acOCT5dAdr94VNXlWHws","PanelComponent");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Panel=void 0;var i=cc._decorator,a=i.ccclass,c=i.property,s=function(){function e(){this.name="",this.node=null}return r([c()],e.prototype,"name",void 0),r([c(cc.Node)],e.prototype,"node",void 0),e=r([a("Panel")],e)}();n.Panel=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(cc.Component);n.default=l,cc._RF.pop()},{}],ParticleEffect:[function(e,t,n){"use strict";cc._RF.push(t,"738dcfT1CRINrkLo+z7FK06","ParticleEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./BaseEffect"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.particleSystem=null,t}return o(t,e),t.prototype.onLoad=function(){this.particleSystem.playOnLoad=this.playOnAwake,this.particleSystem.autoRemoveOnFinish=this.destroyOnFinish},t.prototype.play=function(){this.particleSystem.resetSystem()},t.prototype.playEffectSound=function(){cc.audioEngine.playEffect(this.awakeAudio,!1)},r([s(cc.ParticleSystem)],t.prototype,"particleSystem",void 0),t=r([c],t)}(i.BaseEffect);n.default=l,cc._RF.pop()},{"./BaseEffect":"BaseEffect"}],PuzzleBlockDesignScene:[function(e,t,n){"use strict";cc._RF.push(t,"f71eaO9yzRI0ZdIrePR+zAk","PuzzleBlockDesignScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Manager/EventManager"),c=e("../../Scripts/Enum"),s=e("../../Scripts/Manager/UserManager"),l=e("../../Scripts/Manager/AudioManager"),u=cc._decorator,p=u.ccclass,f=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.loadManagers(),this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),a.default.getInstance().addEventListener(c.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),a.default.getInstance().addEventListener(c.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),a.default.getInstance().addEventListener(c.LevelDesignEvent.BlockDesignFinished,this.handleBlockDesignFinished,this),a.default.getInstance().addEventListener(c.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.onDestroy=function(){a.default.getInstance().offEventListener(c.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),a.default.getInstance().offEventListener(c.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),a.default.getInstance().offEventListener(c.LevelDesignEvent.BlockDesignFinished,this.handleBlockDesignFinished,this),a.default.getInstance().offEventListener(c.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleBlockDesignFinished=function(e){var t=e.map,n={settings:[]};n.settings=Array.from(t.values()),s.default.getInstance().isCurrentValid()||s.default.getInstance().loadTestUser(),s.default.getInstance().current.design.blockDesignSettings=n,s.default.getInstance().current.save(),this.setPanelVisible("complete",!0),l.default.getInstance().playEffect("STEP_COMPLETE",!1)},t.prototype.handleNextButtonClicked=function(){l.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t=r([p],t)}(i.default));n.default=f,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager","../../Scripts/Manager/UserManager":"UserManager"}],PuzzleMapDesignScene:[function(e,t,n){"use strict";cc._RF.push(t,"e20ee7Lf6xKIJ2AuP+0RsYW","PuzzleMapDesignScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/Base/SceneComponent"),a=e("../../Scripts/Enum"),c=e("../../Scripts/Manager/AudioManager"),s=e("../../Scripts/Manager/EventManager"),l=e("../../Scripts/Manager/UserManager"),u=cc._decorator,p=u.ccclass,f=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.panels.forEach(function(e){return e.node.active=!1}),this.setPanelVisible("title",!0),s.default.getInstance().addEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.MapSizeDesignFinished,this.handleMapSizeFinished,this),s.default.getInstance().addEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.onDestroy=function(){s.default.getInstance().offEventListener(a.LevelDesignEvent.TitlePanelEnded,this.handleTitlePanelEnded,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.MapSizeDesignFinished,this.handleMapSizeFinished,this),s.default.getInstance().offEventListener(a.LevelDesignEvent.NextClick,this.handleNextButtonClicked,this),s.default.getInstance().addEventListener(a.TutorialEvent.TutorialShown,this.handleTutorialShown.bind(this),this)},t.prototype.handleTitlePanelEnded=function(){this.setPanelVisible("title",!1),this.setPanelVisible("design",!0)},t.prototype.handleMapSizeFinished=function(e){var t={size:e.mapSize};l.default.getInstance().isCurrentValid()||l.default.getInstance().loadTestUser(),l.default.getInstance().current.design.mapSettings=t,l.default.getInstance().current.save(),this.setPanelVisible("complete",!0),c.default.getInstance().playEffect("STEP_COMPLETE",!1)},t.prototype.handleNextButtonClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.handleTutorialShown=function(){this.setPanelVisible("tutorial",!0)},t=r([p],t)}(i.default));n.default=f,cc._RF.pop()},{"../../Scripts/Base/SceneComponent":"SceneComponent","../../Scripts/Enum":"Enum","../../Scripts/Manager/AudioManager":"AudioManager","../../Scripts/Manager/EventManager":"EventManager","../../Scripts/Manager/UserManager":"UserManager"}],ReadyStartPopup:[function(e,t,n){"use strict";cc._RF.push(t,"6603c1kBNhN4p75mwBt3f8X","ReadyStartPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animator=null,t.goAudio=null,t}return o(t,e),t.prototype.show=function(){this.node.active=!0,this.animator.play()},t.prototype.hide=function(){this.node.active=!1,a.default.getInstance().emitEvent(i.GameEvent.GameStarted)},t.prototype.handleAnimationEvent=function(e){"end"===e?this.hide():"go"===e&&cc.audioEngine.playEffect(this.goAudio,!1)},r([l(cc.Animation)],t.prototype,"animator",void 0),r([l(cc.AudioClip)],t.prototype,"goAudio",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],ResManager:[function(e,t,n){"use strict";cc._RF.push(t,"13c8d+d5stAOrYgRWFa8jFQ","ResManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundSource=n.BlockPrefab=n.TileEffect=void 0;var i=cc._decorator,a=i.ccclass,c=i.property,s=e("../Enum"),l=function(){function e(){this.type=1,this.prefab=null}return r([c({displayName:"Tile Effect",type:cc.Enum(s.MatchEffectType)})],e.prototype,"type",void 0),r([c(cc.Prefab)],e.prototype,"prefab",void 0),e=r([a("Match Effect")],e)}();n.TileEffect=l;var u=function(){function e(){this.type=s.BlockType.Bear,this.prefab=null}return r([c({displayName:"Type",type:cc.Enum(s.BlockType)})],e.prototype,"type",void 0),r([c(cc.Prefab)],e.prototype,"prefab",void 0),e=r([a("BlockPrefab")],e)}();n.BlockPrefab=u;var p=function(){function e(){this.index=1,this.frame=null}return r([c(cc.Integer)],e.prototype,"index",void 0),r([c(cc.SpriteFrame)],e.prototype,"frame",void 0),e=r([a("BackgroundSource")],e)}();n.BackgroundSource=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toastPrefab=null,t.tilePreviewPrefab=null,t.bigBlockPrefabs=[],t.middleBlockPrefabs=[],t.smallBlockPrefabs=[],t.backgroundSources=[],t.matchEffectPrefabs=[],t}var n;return o(t,e),n=t,t.getInstance=function(){return n.instance||n.isLoaded||(n.isLoaded=!0,cc.loader.loadRes("prefabs/ResManager",function(e,t){var n=cc.instantiate(t);cc.director.getScene().addChild(n)})),n.instance},t.prototype.onLoad=function(){cc.log("ResManager was initialized"),n.instance=this,cc.game.addPersistRootNode(this.node)},t.prototype.getBigBlockPrefab=function(e){var t=this.bigBlockPrefabs.find(function(t){return t.type===e});return t?t.prefab:null},t.prototype.getMiddleBlockPrefab=function(e){var t=this.middleBlockPrefabs.find(function(t){return t.type===e});return t?t.prefab:null},t.prototype.getSmallBlockPrefab=function(e){var t=this.smallBlockPrefabs.find(function(t){return t.type===e});return t?t.prefab:null},t.prototype.getBackground=function(e){return this.backgroundSources.find(function(t){return t.index===e}).frame},t.isLoaded=!1,t.instance=null,r([c(cc.Prefab)],t.prototype,"toastPrefab",void 0),r([c(cc.Prefab)],t.prototype,"tilePreviewPrefab",void 0),r([c(u)],t.prototype,"bigBlockPrefabs",void 0),r([c(u)],t.prototype,"middleBlockPrefabs",void 0),r([c(u)],t.prototype,"smallBlockPrefabs",void 0),r([c(p)],t.prototype,"backgroundSources",void 0),r([c(l)],t.prototype,"matchEffectPrefabs",void 0),t=n=r([a],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Enum":"Enum"}],ScaleUI:[function(e,t,n){"use strict";cc._RF.push(t,"47996PDQyZIUIsvqwm/uibQ","ScaleUI");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleOnIphoneX=.6,t.scaleOnIphone6=.75,t}return o(t,e),t.prototype.start=function(){var e=cc.view.getCanvasSize(),t=Math.min(e.width,e.height)/Math.max(e.width,e.height);t<=.5?this.node.scale=this.scaleOnIphoneX:t<.75&&(this.node.scale=this.scaleOnIphone6)},r([c],t.prototype,"scaleOnIphoneX",void 0),r([c],t.prototype,"scaleOnIphone6",void 0),t=r([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],SceneComponent:[function(e,t,n){"use strict";cc._RF.push(t,"eca7bquJAhGv6f+3OCpk+j5","SceneComponent");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/AudioManager"),s=e("../Manager/ResManager"),l=e("./PanelComponent"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panels=[],t}return o(t,e),t.prototype.getPanel=function(e){try{var t=this.panels.filter(function(t){return t.name===e});return null!==t&&void 0!==t&&t.length>0?t[0].node:null}catch(e){return console.error(e),null}},t.prototype.setPanelVisible=function(e,t){var n=this.getPanel(e);n?n.active=t:cc.log("panel [%s] not found",e)},t.prototype.loadManagers=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return s.default.getInstance()&&c.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return[2]}})})},r([f(l.Panel)],t.prototype,"panels",void 0),t=r([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Manager/AudioManager":"AudioManager","../Manager/ResManager":"ResManager","./PanelComponent":"PanelComponent"}],SlotSelection:[function(e,t,n){"use strict";cc._RF.push(t,"8647c9e5rRLBpNSCi3xyvz5","SlotSelection");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/Manager/EventManager"),c=e("./Block"),s=cc._decorator,l=s.ccclass,u=s.property,p=s.executeInEditMode,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=i.TileType.A,t.check=null,t._isChecking=!1,t.slotNode=null,t._btn=null,t._middleBlock=null,t}return o(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.node.name=cc.js.formatStr("Slot %s",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChecking",{get:function(){return this._isChecking},set:function(e){this._isChecking=e,this._notifyCheck()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._btn=this.getComponent(cc.Button),this.slotNode.active=!1},t.prototype.initializeBlock=function(e,t){this.isChecking=!1,this._middleBlock&&(this._middleBlock.node.destroy(),this._middleBlock=null);var n=cc.instantiate(t);n.parent=this.node,n.position=new cc.Vec3(112.5,-112.5,0),n.active=!0;var o=n.getComponent(c.default);o.initialize(e),this._middleBlock=o,this.slotNode.active=!0},t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.SlotSelect,this)},t.prototype._notifyCheck=function(){this._btn.interactable=!this._isChecking,this.check.active=this._isChecking,this._isChecking?this.slotNode.active=!0:this.slotNode.active=!!this._middleBlock},r([u({type:cc.Enum(i.TileType)})],t.prototype,"_type",void 0),r([u({displayName:"Tile Type",type:cc.Enum(i.TileType)})],t.prototype,"type",null),r([u(cc.Node)],t.prototype,"check",void 0),r([u],t.prototype,"_isChecking",void 0),r([u],t.prototype,"isChecking",null),r([u(cc.Node)],t.prototype,"slotNode",void 0),t=r([l,p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/Manager/EventManager":"EventManager","./Block":"Block"}],StepBar:[function(e,t,n){"use strict";cc._RF.push(t,"e7f983Bxc5N3Yhd6Pvk7af4","StepBar");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.barLength=1048,t._progress=0,t._step=i.GameDesignProgress.Step1_PuzzleBlockDesign,t.circles=[],t}return o(t,e),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},set:function(e){this._progress=e,this._notifyBar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e,this._notify()},enumerable:!1,configurable:!0}),t.prototype._notify=function(){this.progress=(this._step-1)/(this.circles.length-1);for(var e=0;e<this.circles.length;e++)this.circles[e].active=e===this.step-1},t.prototype._notifyBar=function(){var e=this.barLength*this.progress;this.progressBar.width=e},r([s(cc.Node)],t.prototype,"progressBar",void 0),r([s],t.prototype,"barLength",void 0),r([s()],t.prototype,"_progress",void 0),r([s({displayName:"Progress Value",slide:!0,max:1})],t.prototype,"progress",null),r([s({type:cc.Enum(i.GameDesignProgress)})],t.prototype,"_step",void 0),r([s({displayName:"Step",type:cc.Enum(i.GameDesignProgress)})],t.prototype,"step",null),r([s(cc.Node)],t.prototype,"circles",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scripts/Enum":"Enum"}],StepButton:[function(e,t,n){"use strict";cc._RF.push(t,"16238rojYpGEZuP1q9ZsZq7","StepButton");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("../Scripts/Enum"),c=e("../Scripts/Manager/EventManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=s.executeInEditMode;(function(e){e[e.Finished=1]="Finished",e[e.Doing=2]="Doing",e[e.Unfinished=3]="Unfinished"})(i||(i={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.nameLabel=null,t.selectedNode=null,t._step=a.GameDesignProgress.Step1_PuzzleBlockDesign,t._status=i.Unfinished,t}return o(t,e),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e,this._notifyStep()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(e){this._status=e,this._notifyStatus()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="StepButton",e.handler="onClicked",e.customEventData="";var t=this.getComponent(cc.Button);t.clickEvents=[],t.clickEvents.push(e)},t.prototype.setStatus=function(e){this.status=e,this.updateButton()},t.prototype.updateButton=function(){switch(this.status){case i.Finished:case i.Doing:case i.Unfinished:}},t.prototype.onClicked=function(){c.default.getInstance().emitEvent(a.LevelDesignEvent.StepClick,this)},t.prototype._notifyStep=function(){switch(null!==this.titleLabel&&(this.titleLabel.string=cc.js.formatStr("STEP %d",this.step)),this.step){case a.GameDesignProgress.Step1_PuzzleBlockDesign:this.nameLabel.string="\ube14\ub85d \ub9cc\ub4e4\uae30";break;case a.GameDesignProgress.Step2_PuzzleMapDesign:this.nameLabel.string="\ub9f5 \ub9cc\ub4e4\uae30";break;case a.GameDesignProgress.Step3_InitialMapDesign:this.nameLabel.string="\ube14\ub85d \ucc44\uc6b0\uae30";break;case a.GameDesignProgress.Step4_MatchEffectDesign:this.nameLabel.string="\ub9de\ucd94\uae30 \ud6a8\uacfc \uc815\ud558\uae30";break;case a.GameDesignProgress.Step5_GameClearEffectDesign:this.nameLabel.string="\ub05d\ub0a0 \ub54c \ud6a8\uacfc \uc815\ud558\uae30";break;case a.GameDesignProgress.Step6_BackgroundDesign:this.nameLabel.string="\ubc30\uacbd \uc815\ud558\uae30";break;case a.GameDesignProgress.Step7_TestAndRelease:this.nameLabel.string="TEST"}},t.prototype._notifyStatus=function(){var e=this.nameLabel.getComponent(cc.LabelOutline),t=this.nameLabel.getComponent(cc.LabelShadow);switch(this.status){case i.Unfinished:this.interactable=!1,this.selectedNode.active=!1,e.color=new cc.Color(57,57,60,255),t.color=new cc.Color(57,57,60,255);break;case i.Finished:this.interactable=!0,this.selectedNode.active=!1,e.color=new cc.Color(73,54,40,255),t.color=new cc.Color(73,54,40,255);break;case i.Doing:this.interactable=!0,this.selectedNode.active=!0,e.color=new cc.Color(73,54,40,255),t.color=new cc.Color(73,54,40,255)}},r([u(cc.Label)],t.prototype,"titleLabel",void 0),r([u(cc.Label)],t.prototype,"nameLabel",void 0),r([u(cc.Node)],t.prototype,"selectedNode",void 0),r([u({type:cc.Enum(a.GameDesignProgress)})],t.prototype,"_step",void 0),r([u({displayName:"Step",type:cc.Enum(a.GameDesignProgress)})],t.prototype,"step",null),r([u({type:cc.Enum(i)})],t.prototype,"_status",void 0),r([u({displayName:"Status",type:cc.Enum(i)})],t.prototype,"status",null),t=r([l,p],t)}(cc.Button);n.default=f,cc._RF.pop()},{"../Scripts/Enum":"Enum","../Scripts/Manager/EventManager":"EventManager"}],SwitchButton:[function(e,t,n){"use strict";cc._RF.push(t,"5e4cbD4cdJMQKjPw/a47fM2","SwitchButton");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./OutlineTextButton"),a=cc._decorator,c=a.ccclass,s=a.property,l=a.executeInEditMode,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFrame=null,t.offFrame=null,t._isOn=!0,t}return o(t,e),Object.defineProperty(t.prototype,"isOn",{get:function(){return this._isOn},set:function(e){this._isOn=e,this._notify()},enumerable:!1,configurable:!0}),t.prototype._notify=function(){this.target&&(this.target.getComponent(cc.Sprite).spriteFrame=this.isOn?this.onFrame:this.offFrame),this.outline&&(this.outline.color=this.isOn?this.outlineNormalColor:this.outlineDisabledColor)},r([s(cc.SpriteFrame)],t.prototype,"onFrame",void 0),r([s(cc.SpriteFrame)],t.prototype,"offFrame",void 0),r([s],t.prototype,"_isOn",void 0),r([s],t.prototype,"isOn",null),t=r([c,l],t)}(i.default);n.default=u,cc._RF.pop()},{"./OutlineTextButton":"OutlineTextButton"}],TileCountSettings:[function(e,t,n){"use strict";cc._RF.push(t,"8d92cw6OqNFbalGStWs3YZ3","TileCountSettings");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("../Scripts/SettingPanel/InitialMapSettingPanel"),s=e("./MiniTileSlider"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.TileType.A,t.slider=null,t.label=null,t._initialCount=0,t}return o(t,e),Object.defineProperty(t.prototype,"Count",{get:function(){return this._initialCount+this.slider.Count},enumerable:!1,configurable:!0}),t.prototype.setup=function(e,t,n){this._initialCount=t,this.slider.setup(n),this.label.string=(this._initialCount+this.slider.Count).toString()},t.prototype.onMinusBtnClicked=function(){this.slider.Count>0&&(this.slider.Count-=1,this.handleValueChanged())},t.prototype.onPlusBtnClicked=function(){c.default.Instance.AvailableCount>0&&(this.slider.Count+=1,this.handleValueChanged())},t.prototype.handleSlideEvent=function(e){this.slider.handleSlideEvent(c.default.Instance.AvailableCount),this.handleValueChanged()},t.prototype.handleValueChanged=function(){this.label.string=(this._initialCount+this.slider.Count).toString(),a.default.getInstance().emitEvent(i.LevelDesignEvent.TileCountChange)},r([p({type:cc.Enum(i.TileType),displayName:"Tile Type"})],t.prototype,"type",void 0),r([p(s.default)],t.prototype,"slider",void 0),r([p(cc.Label)],t.prototype,"label",void 0),t=r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","../Scripts/SettingPanel/InitialMapSettingPanel":"InitialMapSettingPanel","./MiniTileSlider":"MiniTileSlider"}],TileManager:[function(e,t,n){"use strict";cc._RF.push(t,"8db80NzMD5B24sGJCae8tlC","TileManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,u=e("../GameConfig"),p=e("../Enum"),f=e("../GameUtil"),d=e("../Manager/EventManager"),h=e("../../Prefabs/Tile/Tile/Tile"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileContainer=null,t.tilePrefab=null,t.effectContainer=null,t.matchSuccessAudio=null,t.matchFailAudio=null,t.switchBlockAudio=null,t.comboAudios=[],t._tileMap=null,t._design=null,t._waiting=!1,t._comboCount=0,t}var n;return o(t,e),n=t,Object.defineProperty(t.prototype,"Design",{get:function(){return this._design},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){n.instance=this,d.default.getInstance().addEventListener(p.TileEvent.SlidBegan,this.handleTileSlidBeganEvent,this)},t.prototype.onDestroy=function(){d.default.getInstance().offEventListener(p.TileEvent.SlidBegan,this.handleTileSlidBeganEvent,this)},t.prototype.initializeLevel=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return this._design=e,this._generateTileMap(),[2]})})},t.prototype.initializeLevelAndShuffle=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this._design=e,this._generateTileMap(),[4,this.shuffle()];case 1:return t.sent(),[2]}})})},t.prototype.gameBegan=function(){this._waiting=!0},t.prototype.gameEnded=function(){this._waiting=!1},t.prototype._generateTileMap=function(){this._tileMap=[];for(var e=0;e<this._design.Row;e++){for(var t=[],n=0;n<this._design.Col;n++){var o=u.Coord(e,n),r=this._design.getTileContentWithCoord(o),i=this._getNewTile(o,r.type);t.push(i)}this._tileMap.push(t)}cc.log(this._tileMap)},t.prototype.shuffle=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(o){for(e=[].concat.apply([],this._tileMap),t=function(){var t=e[Math.floor(e.length*Math.random())],o=(e=e.filter(function(e){return e!=t}))[Math.floor(e.length*Math.random())];e=e.filter(function(e){return e!=o});var r=t.coord,i=o.coord;t.setCoord(i,!0),o.setCoord(r,!0),n._tileMap[r.x][r.y]=o,n._tileMap[i.x][i.y]=t},n=this;e.length>=2;)t();return f.GameUtil.getCombinations(this.Design.Row,this.Design.Col,this._tileMap).length>0&&this.shuffle(),f.GameUtil.hasValidCombo(this.Design.Row,this.Design.Col,this._tileMap)||this.shuffle(),[2]})})},t.prototype.handleTileSlidBeganEvent=function(e,t){return i(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return this._waiting?(this._waiting=!1,n=f.GameUtil.getCoordByDirection(e,t),[4,this.slid(e,n)]):[2];case 1:return o.sent(),this._combinations=f.GameUtil.getCombinations(this.Design.Row,this.Design.Col,this._tileMap),this._combinations.length>0?(cc.audioEngine.playEffect(this.matchSuccessAudio,!1),[4,this.keepCheckingUntilNoMoreCombination()]):[3,3];case 2:return o.sent(),[3,5];case 3:return cc.audioEngine.playEffect(this.matchFailAudio,!1),[4,this.slid(e,n)];case 4:o.sent(),o.label=5;case 5:return this._waiting=!0,[2]}})})},t.prototype.preprocessCombinations=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this._combinations=f.GameUtil.getCombinations(this.Design.Row,this.Design.Col,this._tileMap),this._combinations.length>0?[4,this.keepCheckingUntilNoMoreCombination()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.slid=function(e,t){return i(this,void 0,void 0,function(){var n,o;return a(this,function(r){switch(r.label){case 0:return t?(n=this._tileMap[e.x][e.y],o=this._tileMap[t.x][t.y],n.setCoord(t,!1),o.setCoord(e,!1),this._tileMap[e.x][e.y]=o,this._tileMap[t.x][t.y]=n,n.unbindTouchEvents(),cc.audioEngine.playEffect(this.switchBlockAudio,!1),cc.tween(n.node).to(.1,{position:f.GameUtil.getTilePositionByCoordinate(t)}).start(),cc.tween(o.node).to(.1,{position:f.GameUtil.getTilePositionByCoordinate(e)}).start(),[4,new Promise(function(e){return setTimeout(e,100)})]):[3,2];case 1:r.sent(),n.bindTouchEvents(),r.label=2;case 2:return[2]}})})},t.prototype.keepCheckingUntilNoMoreCombination=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:this._comboCount=0,e.label=1;case 1:return this._combinations.length>0?(this.eliminateCombinations(),[4,new Promise(function(e){return setTimeout(e,250)})]):[3,9];case 2:e.sent(),e.label=3;case 3:return this.hasEmptyTile()?[4,this.fallDown()]:[3,6];case 4:return e.sent(),[4,this.fillEmpty()];case 5:return e.sent(),[3,3];case 6:return[4,new Promise(function(e){return setTimeout(e,250)})];case 7:return e.sent(),this._combinations=f.GameUtil.getCombinations(this.Design.Row,this.Design.Col,this._tileMap),[4,new Promise(function(e){return setTimeout(e,250)})];case 8:return e.sent(),[3,1];case 9:return f.GameUtil.hasValidCombo(this.Design.Row,this.Design.Col,this._tileMap)||this.shuffle(),[2]}})})},t.prototype.eliminateCombinations=function(){this._comboCount>0&&cc.audioEngine.playEffect(this.comboAudios[this._comboCount>=5?4:this._comboCount],!1);for(var e=0;e<this._combinations.length;e++){d.default.getInstance().emitEvent(p.GameEvent.TileMatched,this._combinations[e]);for(var t=0;t<this._combinations[e].coords.length;t++){var n=this._combinations[e].coords[t];this._tileMap[n.x][n.y]&&this._tileMap[n.x][n.y].eliminate(this._combinations[e]),this._tileMap[n.x][n.y]=null}}this._combinations=[],this._comboCount++},t.prototype.fallDown=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(o){switch(o.label){case 0:for([],e=this._design.Row-1;e>=0;e--)for(t=this._design.Col-1;t>=0;t--)if(!this._tileMap[e][t])for(n=t-1;n>=0;n--)if(this._tileMap[e][n]){this._tileMap[e][t]=this._tileMap[e][n],this._tileMap[e][t].setCoord(u.Coord(e,t),!1),this._tileMap[e][n]=null,this._tileMap[e][t].fallDown();break}return[4,new Promise(function(e){return setTimeout(e,.1)})];case 1:return o.sent(),[2]}})})},t.prototype.fillEmpty=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(o){switch(o.label){case 0:for(e=this._design.Row-1;e>=0;e--)for(t=this._design.Col-1;t>=0;t--)if(!this._tileMap[e][t]){n=this._getNewTile(u.Coord(e,0),f.GameUtil.getRandomType()),this._tileMap[e][0]=n,d.default.getInstance().emitEvent(p.TileEvent.OnAwake,u.Coord(e,t));break}return[4,new Promise(function(e){return setTimeout(e,.1)})];case 1:return o.sent(),[2]}})})},t.prototype.hasEmptyTile=function(){return null===[].concat.apply([],this._tileMap).find(function(e){return null===e})},t.prototype._getNewTile=function(e,t){var n=cc.instantiate(this.tilePrefab);n.parent=this.tileContainer,n.active=!0;var o=n.getComponent(h.default);return o.setup(e,t),o},t.instance=null,r([l(cc.Node)],t.prototype,"tileContainer",void 0),r([l(cc.Prefab)],t.prototype,"tilePrefab",void 0),r([l(cc.Node)],t.prototype,"effectContainer",void 0),r([l(cc.AudioClip)],t.prototype,"matchSuccessAudio",void 0),r([l(cc.AudioClip)],t.prototype,"matchFailAudio",void 0),r([l(cc.AudioClip)],t.prototype,"switchBlockAudio",void 0),r([l(cc.AudioClip)],t.prototype,"comboAudios",void 0),t=n=r([s],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Prefabs/Tile/Tile/Tile":"Tile","../Enum":"Enum","../GameConfig":"GameConfig","../GameUtil":"GameUtil","../Manager/EventManager":"EventManager"}],TileMenu:[function(e,t,n){"use strict";cc._RF.push(t,"e0e70cyS3xBobOXvqK1/HBF","TileMenu");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../Scripts/Enum"),a=e("../../../../Scripts/Manager/EventManager"),c=e("../../../../Scripts/Manager/ResManager"),s=e("../../../Step1_PuzzleBlockDesign/BlockDesignPanel/Scripts/Block"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=i.TileType.A,t.blockContainer=null,t.checkMark=null,t._isChecking=!1,t._block=null,t}return o(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._notifyTile()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChecking",{get:function(){return this._isChecking},set:function(e){this._isChecking=e,this._notifyStatus()},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._block&&(this._block.node.destroy(),this._block=null);var t=cc.instantiate(c.default.getInstance().getMiddleBlockPrefab(e.blockType));t.parent=this.blockContainer,t.position=new cc.Vec3(0,0,0);var n=t.getComponent(s.default);n.initialize(e),this._block=n},t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.LevelDesignEvent.TileMenuClick,this)},t.prototype._notifyTile=function(){},t.prototype._notifyStatus=function(){this.checkMark.active=this.isChecking},r([p],t.prototype,"_type",void 0),r([p({displayName:"Type",type:cc.Enum(i.TileType)})],t.prototype,"type",null),r([p(cc.Node)],t.prototype,"blockContainer",void 0),r([p(cc.Node)],t.prototype,"checkMark",void 0),r([p],t.prototype,"_isChecking",void 0),r([p],t.prototype,"isChecking",null),t=r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../Scripts/Enum":"Enum","../../../../Scripts/Manager/EventManager":"EventManager","../../../../Scripts/Manager/ResManager":"ResManager","../../../Step1_PuzzleBlockDesign/BlockDesignPanel/Scripts/Block":"Block"}],TilePreview:[function(e,t,n){"use strict";cc._RF.push(t,"27c3fNrxmtF/YDFQvVDdere","TilePreview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/GameUtil"),c=e("../../../Scripts/Manager/ResManager"),s=e("../../../Scripts/Manager/UserManager"),l=e("../../../Steps/Step1_PuzzleBlockDesign/BlockDesignPanel/Scripts/Block"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=i.TileType.A,t.iconNode=null,t._coord=null,t}return o(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._notifyType()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coord",{get:function(){return this._coord},set:function(e){this._coord=e},enumerable:!1,configurable:!0}),t.prototype.setup=function(e,t){this.setType(t),this.setCoord(e)},t.prototype.setType=function(e){this.type=e},t.prototype.setCoord=function(e,t){void 0===t&&(t=!0),this.coord=e,t&&(this.node.position=a.GameUtil.getTilePositionByCoordinate(e))},t.prototype._notifyType=function(){this._initializeBlock()},t.prototype._initializeBlock=function(){var e=this,t=this.iconNode.getComponentInChildren(l.default);t&&(t.node.destroy(),t=null);var n=s.default.getInstance().current.design.blockDesignSettings.settings.find(function(t){return t.tileType===e.type}),o=c.default.getInstance().getSmallBlockPrefab(n.blockType),r=cc.instantiate(o);r.parent=this.iconNode,r.position=new cc.Vec3(0,0,0),(t=r.getComponent(l.default)).initialize(n)},r([f({type:cc.Enum(i.TileType)})],t.prototype,"_type",void 0),r([f({displayName:"Tile Type",type:cc.Enum(i.TileType)})],t.prototype,"type",null),r([f(cc.Node)],t.prototype,"iconNode",void 0),t=r([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/GameUtil":"GameUtil","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","../../../Steps/Step1_PuzzleBlockDesign/BlockDesignPanel/Scripts/Block":"Block"}],Tile:[function(e,t,n){"use strict";cc._RF.push(t,"e7028DGbiFM7ZY6anMaG4yA","Tile");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Enum"),s=e("../../../Scripts/GameUtil"),l=e("../../../Scripts/Manager/EventManager"),u=e("../TilePreview/TilePreview"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animator=null,t._touchStartPosition=cc.Vec2.ZERO,t}return o(t,e),t.prototype.onLoad=function(){this.bindTouchEvents(),l.default.getInstance().addEventListener(c.TileEvent.OnAwake,this.handleAwakeEvent,this),l.default.getInstance().addEventListener(c.TileEvent.OnLanding,this.handleLandingEvent,this),l.default.getInstance().addEventListener(c.TileEvent.OnDestroying,this.handleDestroyEvent,this)},t.prototype.onDestroy=function(){this.unbindTouchEvents(),l.default.getInstance().offEventListener(c.TileEvent.OnAwake,this.handleAwakeEvent,this),l.default.getInstance().offEventListener(c.TileEvent.OnLanding,this.handleLandingEvent,this),l.default.getInstance().offEventListener(c.TileEvent.OnDestroying,this.handleDestroyEvent,this)},t.prototype.fallDown=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=s.GameUtil.getTilePositionByCoordinate(this.coord),cc.tween(this.node).to(.1,{position:e}).start(),[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return t.sent(),l.default.getInstance().emitEvent(c.TileEvent.OnLanding,this.coord),[2]}})})},t.prototype.eliminate=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return l.default.getInstance().emitEvent(c.TileEvent.OnDestroying,this.coord,e),[2]})})},t.prototype.onTouchStart=function(e){this._touchStartPosition=e.getLocation(),this.animator.play("TouchBegan")},t.prototype.onTouchMove=function(e){e.stopPropagationImmediate();var t=e.getLocation(),n=t.x-this._touchStartPosition.x,o=t.y-this._touchStartPosition.y;Math.abs(n)>Math.abs(o)&&n>0?this.slidTo(c.SlidDirection.Right):Math.abs(n)>Math.abs(o)&&n<0?this.slidTo(c.SlidDirection.Left):Math.abs(n)<Math.abs(o)&&o<0?this.slidTo(c.SlidDirection.Bottom):Math.abs(n)<Math.abs(o)&&o>0&&this.slidTo(c.SlidDirection.Top)},t.prototype.onTouchEnd=function(e){this.animator.play("TouchEnd")},t.prototype.onTouchCancel=function(e){this.animator.play("TouchEnd")},t.prototype.slidTo=function(e){l.default.getInstance().emitEvent(c.TileEvent.SlidBegan,this.coord.copy(),e),this.animator.play("TouchEnd")},t.prototype.handleAwakeEvent=function(e){this.coord.compare(e)&&this.animator.play("Awake")},t.prototype.handleLandingEvent=function(e){this.coord.compare(e)&&this.animator.play("Landing")},t.prototype.handleDestroyEvent=function(e,t){this.coord.compare(e)&&this.node.destroy()},t.prototype.bindTouchEvents=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchcancel",this.onTouchCancel,this),this.node.on("touchend",this.onTouchEnd,this)},t.prototype.unbindTouchEvents=function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchcancel",this.onTouchCancel,this),this.node.off("touchend",this.onTouchEnd,this)},r([d(cc.Animation)],t.prototype,"animator",void 0),t=r([f],t)}(u.default);n.default=h,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/GameUtil":"GameUtil","../../../Scripts/Manager/EventManager":"EventManager","../TilePreview/TilePreview":"TilePreview"}],TitlePanel_Step5:[function(e,t,n){"use strict";cc._RF.push(t,"43889C01nZA64AclV2sFwJz","TitlePanel_Step5");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scripts/Panels/TitlePanel"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return this.skeleton.clearTracks(),[4,new Promise(function(e){return setTimeout(e,500)})];case 1:return t.sent(),this._playAnimation("animation",!1,function(){return e._playAnimation("idle",!0,function(){})}),[2]}})})},t.prototype._playAnimation=function(e,t,n){this.skeleton.setAnimation(0,e,t)&&this.skeleton.setCompleteListener(function(t,o){(t.animation?t.animation.name:"")===e&&n()})},r([u(sp.Skeleton)],t.prototype,"skeleton",void 0),t=r([l],t)}(c.default);n.default=p,cc._RF.pop()},{"../../../Scripts/Panels/TitlePanel":"TitlePanel"}],TitlePanel_Step7:[function(e,t,n){"use strict";cc._RF.push(t,"41c9e0ZIZdIp5vg9/U8gw4r","TitlePanel_Step7");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Prefabs/Tile/TilePreview/TilePreview"),s=e("../../../Scripts/Manager/ResManager"),l=e("../../../Scripts/Manager/UserManager"),u=e("../../../Scripts/Panels/TitlePanel"),p=e("../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview"),f=cc._decorator,d=f.ccclass,h=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.map=null,t}return o(t,e),t.prototype.start=function(){this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return null!==s.default.getInstance()?[3,2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 1:return e.sent(),[3,0];case 2:return l.default.getInstance().isCurrentValid()||l.default.getInstance().loadTestUser(),this._initializeMap(),[2]}})})},t.prototype._initializeMap=function(){var e=l.default.getInstance().current.design;this.background.spriteFrame=s.default.getInstance().backgroundSources.find(function(t){return t.index===e.backgroundSettings.background}).frame,this.map.mapSize=e.mapSettings.size;for(var t=e.initialMapTileTypeSettings.settings,n=this.map.slotSize,o=0;o<t.length;o++){var r=t[o];if(r.x<e.mapSettings.size&&r.y<e.mapSettings.size){var i=s.default.getInstance().tilePreviewPrefab,a=cc.instantiate(i);a.parent=this.map.node,a.active=!0,a.position=new cc.Vec3(r.x*n+n/2,-(r.y*n+n/2),0);var u=a.getComponent(c.default);u.setType(r.type),u.setCoord(r.coord,!1)}}},r([h(cc.Sprite)],t.prototype,"background",void 0),r([h(p.default)],t.prototype,"map",void 0),t=r([d],t)}(u.default);n.default=y,cc._RF.pop()},{"../../../Prefabs/Tile/TilePreview/TilePreview":"TilePreview","../../../Scripts/Manager/ResManager":"ResManager","../../../Scripts/Manager/UserManager":"UserManager","../../../Scripts/Panels/TitlePanel":"TitlePanel","../../Step2_PuzzleMapDesign/MapBox/MapBoxPreview":"MapBoxPreview"}],TitlePanel:[function(e,t,n){"use strict";cc._RF.push(t,"132bbATxxlKab9qZfalqadO","TitlePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Prefabs/UIs/StepBar/StepBar"),a=e("../Enum"),c=e("../Manager/AudioManager"),s=e("../Manager/EventManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stepBar=null,t.step=a.GameDesignProgress.Step1_PuzzleBlockDesign,t}return o(t,e),t.prototype.onLoad=function(){this.stepBar.step=this.step},t.prototype.onHomeClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),cc.director.loadScene("HomeScene")},t.prototype.onStarClicked=function(){c.default.getInstance().playEffect("UI_BUTTON",!1),s.default.getInstance().emitEvent(a.LevelDesignEvent.TitlePanelEnded)},r([p(i.default)],t.prototype,"stepBar",void 0),r([p({type:cc.Enum(a.GameDesignProgress),displayName:"Step"})],t.prototype,"step",void 0),t=r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Prefabs/UIs/StepBar/StepBar":"StepBar","../Enum":"Enum","../Manager/AudioManager":"AudioManager","../Manager/EventManager":"EventManager"}],TitleScene:[function(e,t,n){"use strict";cc._RF.push(t,"2ba23ZVELJOxZr3JPJtTSwj","TitleScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Scripts/Base/SceneComponent"),s=e("../Scripts/Manager/AudioManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.okBtn=null,t}return o(t,e),t.prototype.start=function(){this._init()},t.prototype._init=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.okBtn.interactable=!0,[2]})})},t.prototype.onStartClicked=function(){cc.director.loadScene("LoginScene"),s.default.getInstance().playEffect("UI_BUTTON",!1)},r([p(cc.Button)],t.prototype,"okBtn",void 0),t=r([u],t)}(c.default);n.default=f,cc._RF.pop()},{"../Scripts/Base/SceneComponent":"SceneComponent","../Scripts/Manager/AudioManager":"AudioManager"}],Toast:[function(e,t,n){"use strict";cc._RF.push(t,"c28eePwBURB6bdJ6cKhOGP4","Toast");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Manager/AudioManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.destroyWhenHide=!1,t}return o(t,e),t.prototype.setMessage=function(e){this.label.string=e},t.prototype.show=function(){this.node.active=!0,this.scheduleOnce(this.hide,1.5),i.default.getInstance().playEffect("UI_POPUP",!1)},t.prototype.hide=function(){this.destroyWhenHide?this.node.destroy():this.node.active=!1},r([s(cc.Label)],t.prototype,"label",void 0),r([s],t.prototype,"destroyWhenHide",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../Manager/AudioManager":"AudioManager"}],TutorialCircle_Step5:[function(e,t,n){"use strict";cc._RF.push(t,"6886aSW8SdHlZJlFXwXYo8c","TutorialCircle_Step5");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./TutorialCircle"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.handleAnimationEvent=function(e){if("character_hint"===e)(t=this.animator.play("tutorial_step5_hand_characterselect")).wrapMode=cc.WrapMode.Loop,t.repeatCount=1/0;else if("effect_hint"===e){var t;(t=this.animator.play("tutorial_step5_hand_effectselect")).wrapMode=cc.WrapMode.Loop,t.repeatCount=1/0}},t=r([c],t)}(i.default));n.default=s,cc._RF.pop()},{"./TutorialCircle":"TutorialCircle"}],TutorialCircle:[function(e,t,n){"use strict";cc._RF.push(t,"3d2dcZ9125HFLiH4X3FCRVP","TutorialCircle");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animator=null,t.playOnAwake=!0,t.loop=!0,t}return o(t,e),t.prototype.onEnable=function(){var e=this.getComponentsInChildren(cc.Button);null!==e&&void 0!==e&&e.forEach(function(e){return e.node.opacity=0}),this.playOnAwake&&this.play()},t.prototype.onLoad=function(){var e=this.node.getChildByName("tutorial_hand");if(e){var t=e.getComponent(cc.Sprite);t&&(t.sizeMode=cc.Sprite.SizeMode.RAW,t.trim=!1)}},t.prototype.play=function(){var e=this.animator.play();e.wrapMode=this.loop?cc.WrapMode.Normal:cc.WrapMode.Loop,e.repeatCount=this.loop?1/0:1},t.prototype.stop=function(){this.animator.stop()},t.prototype.onClicked=function(){a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCircleClicked),stop()},r([l(cc.Animation)],t.prototype,"animator",void 0),r([l],t.prototype,"playOnAwake",void 0),r([l],t.prototype,"loop",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],TutorialStep1:[function(e,t,n){"use strict";cc._RF.push(t,"9e8b8YIxH1I4oxl2IwE4Bq+","TutorialStep1");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tutorials=[],t._currentIndex=0,t}return o(t,e),t.prototype.start=function(){this.tutorials.forEach(function(e){return e.active=!1}),this._currentIndex=0,this._logic(),a.default.getInstance().addEventListener(i.TutorialEvent.TutorialCircleClicked,this.handleTutorialCircleClicked,this)},t.prototype.onDestroy=function(){a.default.getInstance().offEventListener(i.TutorialEvent.TutorialCircleClicked,this.handleTutorialCircleClicked,this)},t.prototype._logic=function(){this._currentIndex<this.tutorials.length?this.tutorials[this._currentIndex].active=!0:(cc.log("close tutorial"),a.default.getInstance().emitEvent(i.TutorialEvent.TutorialClosed),this.node.active=!1)},t.prototype.onMiniBlockClicked=function(e,t){this.tutorials[this._currentIndex].active=!1,a.default.getInstance().emit(i.TutorialEvent.TutorialCompleted,this._currentIndex,t),this._currentIndex++,this._logic()},t.prototype.onColorClicked=function(e,t){this.tutorials[this._currentIndex].active=!1,a.default.getInstance().emit(i.TutorialEvent.TutorialCompleted,this._currentIndex,t),this._currentIndex++,this._logic()},t.prototype.onSlotClicked=function(e,t){this.tutorials[this._currentIndex].active=!1,a.default.getInstance().emit(i.TutorialEvent.TutorialCompleted,this._currentIndex,t),this._currentIndex++,this._logic()},t.prototype.handleTutorialCircleClicked=function(){this.tutorials[this._currentIndex].active=!1,a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,this._currentIndex),this._currentIndex++,this._logic()},r([l(cc.Node)],t.prototype,"tutorials",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager"}],TutorialStep2:[function(e,t,n){"use strict";cc._RF.push(t,"fef02tIRcZONLGcwwEKovin","TutorialStep2");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("./TutorialStep1"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onBtnClicked=function(e,t){switch(t){case"5":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.MapSizeType.Size_5);break;case"6":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.MapSizeType.Size_6);break;case"7":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.MapSizeType.Size_7)}this.tutorials[this._currentIndex].active=!1,this._currentIndex++,this._logic()},t=r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","./TutorialStep1":"TutorialStep1"}],TutorialStep3:[function(e,t,n){"use strict";cc._RF.push(t,"9aac2qXMfRHJKCzUx0gw8m6","TutorialStep3");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("./TutorialStep1"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t}return o(t,e),t.prototype.onBtnClicked=function(e,t){switch(t){case"1":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.TileType.A);break;case"2":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.TileType.B);break;case"3":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.TileType.C);break;case"4":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,i.TileType.D)}this.background.active=!1,this.tutorials[this._currentIndex].active=!1,this._currentIndex++,this._logic()},r([u(cc.Node)],t.prototype,"background",void 0),t=r([l],t)}(c.default);n.default=p,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","./TutorialStep1":"TutorialStep1"}],TutorialStep4:[function(e,t,n){"use strict";cc._RF.push(t,"88fd3wEnK5Bbb8R39u9tAIz","TutorialStep4");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("./TutorialStep1"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onEffectClicked=function(e,t){this.tutorials[this._currentIndex].active=!1,a.default.getInstance().emit(i.TutorialEvent.TutorialCompleted,this._currentIndex,t),this._currentIndex++,this._logic()},t=r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","./TutorialStep1":"TutorialStep1"}],TutorialStep5:[function(e,t,n){"use strict";cc._RF.push(t,"19cd0YRJU1El5oyS93+0+S9","TutorialStep5");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Enum"),a=e("../../../Scripts/Manager/EventManager"),c=e("./TutorialStep1"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onPlayClicked=function(e,t){a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"play_preview"),this.handleTutorialCircleClicked()},t.prototype.handleTutorialCircleClicked=function(){this.tutorials[this._currentIndex].active=!1,this._currentIndex===this.tutorials.length-1&&a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"ok_clicked"),this._currentIndex++,this._logic()},t.prototype.onCharacterClicked=function(e,t){switch(t){case"1":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"rabbit");break;case"2":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"bear");break;case"3":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"sheep")}this.handleTutorialCircleClicked()},t.prototype.onEffectClicked=function(e,t){switch(t){case"1":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"effect_ballon");break;case"2":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"effect_bubble");break;case"3":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"effect_firework");break;case"4":a.default.getInstance().emitEvent(i.TutorialEvent.TutorialCompleted,"effect_flower")}this.handleTutorialCircleClicked()},t=r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../../../Scripts/Enum":"Enum","../../../Scripts/Manager/EventManager":"EventManager","./TutorialStep1":"TutorialStep1"}],UIDDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"79a2cOSNwpJKbKKNt2/Yths","UIDDisplay");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Scripts/Manager/UserManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return o(t,e),t.prototype.start=function(){this.label.string=null!==i.default.getInstance().current?i.default.getInstance().current.uid:"\uac1c\ubc1c\uc790 \uacc4\uc815 \uc5c6\uc2b5\ub2c8\ub2e4"},r([s(cc.Label)],t.prototype,"label",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scripts/Manager/UserManager":"UserManager"}],UserManager:[function(e,t,n){"use strict";cc._RF.push(t,"84443VYQARBcoSJGZkevBvF","UserManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../API"),c=e("./User"),s=function(e){function t(){var t=e.call(this)||this;return t._current=null,t.name="UserManager",cc.game.addPersistRootNode(t),t}return o(t,e),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.getFormatDate=function(e){var t=e.getFullYear(),n=e.getMonth()+1,o=n>=10?n:"0"+n,r=e.getDate();return t+""+o+(r>=10?r:"0"+r)},t.prototype.submitUser=function(e,t,n){return r(this,void 0,void 0,function(){var o,r,s,l,u;return i(this,function(i){return null!==(o=cc.sys.localStorage.getItem("latest_user"))&&void 0!==o&&(r=Object.assign(new c.default,JSON.parse(o)),e===r.name&&t===r.age)?(cc.log("loaded latest user from local storage."),this._current=new c.default(r.uid,r.name,r.age,r.design),[2,!0]):(s={body:{name:e,age:t,date:this.getFormatDate(new Date)}},(l=new XMLHttpRequest).onreadystatechange=function(){if(4===l.readyState&&l.status>=200&&l.status<400){var e=JSON.parse(l.responseText);n(e)}},u=cc.js.formatStr("%s%s",a.API.HOST,a.API.PATH_CREATE_USER),l.open("POST",u),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.send(JSON.stringify(s)),cc.log("request http to create user account"),[2])})})},t.prototype.isCurrentValid=function(){return null!==this._current&&void 0!==this._current},t.prototype.loadTestUser=function(){var e=cc.sys.localStorage.getItem("latest_user");return this.createNewUserWithJson(e)},t.prototype.createNewUserWithJson=function(e){if(null!==e&&void 0!==e){var t=Object.assign(new c.default,JSON.parse(e));return this._current=new c.default(t.uid,t.name,t.age,t.design),!0}return!1},t.prototype.createNewUser=function(e){var t=e.id,n=e.usrName,o=e.usrAge;this._current=new c.default(t,n,o),this._current.save(),cc.log("create new user: ",this._current)},t}(cc.Node);n.default=s,cc._RF.pop()},{"../API":"API","./User":"User"}],UserTableRow:[function(e,t,n){"use strict";cc._RF.push(t,"ab3c31M+5FGm7ZMT48obm2b","UserTableRow");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../AdminAccountManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowBgSprite=null,t.rowBgFrames=[],t._indexOnPage=0,t.orderLabel=null,t.uidLabel=null,t.createDataLabel=null,t.userNameLabel=null,t.deleteBtn=null,t._onCertificationEvent=null,t._onQrCodeEvent=null,t._onDeleteEvent=null,t._createdOnDate=0,t}return o(t,e),Object.defineProperty(t.prototype,"indexOnPage",{get:function(){return this._indexOnPage},set:function(e){this._indexOnPage=e,this._notifyIndexOnPage()},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){try{this.deleteBtn.interactable=i.default.getInstance().current.permission===i.AccountPermission.Administrator,this.deleteBtn.getComponent(cc.Label).node.color=this.deleteBtn.interactable?new cc.Color(102,102,102,255):new cc.Color(171,171,171,255)}catch(e){}},t.prototype.setItemData=function(e,t,n,o,r,i,a){this.orderLabel.string=e,this.uidLabel.string=t,this._createdOnDate=n,this.createDataLabel.string=this._getFormateDate(n),this.userNameLabel.string=o,this._onCertificationEvent=r,this._onQrCodeEvent=i,this._onDeleteEvent=a},t.prototype._notifyIndexOnPage=function(){var e=(this._indexOnPage+1)%2==0;this.rowBgSprite.spriteFrame=this.rowBgFrames[e?1:0]},t.prototype.onCertificationClicked=function(){this._onCertificationEvent(this.getRowData())},t.prototype.onQRCodeClicked=function(){this._onQrCodeEvent(this.getRowData())},t.prototype.onDeleteClicked=function(){this._onDeleteEvent({uid:this.uidLabel.string,name:this.userNameLabel.string})},t.prototype._getFormateDate=function(e){var t=new Date(e),n=t.getFullYear(),o=function(e){return e<10?"0"+e:e}(t.getMonth()+1),r=t.getDate();return cc.js.formatStr("%s.%s.%s",n,o,r)},t.prototype.getRowData=function(){return{order:this.orderLabel.string,uid:this.uidLabel.string,date:this.createDataLabel.string,name:this.userNameLabel.string,createdOnDate:this._createdOnDate}},r([s(cc.Sprite)],t.prototype,"rowBgSprite",void 0),r([s(cc.SpriteFrame)],t.prototype,"rowBgFrames",void 0),r([s],t.prototype,"_indexOnPage",void 0),r([s({displayName:"Index On Page"})],t.prototype,"indexOnPage",null),r([s(cc.Label)],t.prototype,"orderLabel",void 0),r([s(cc.Label)],t.prototype,"uidLabel",void 0),r([s(cc.Label)],t.prototype,"createDataLabel",void 0),r([s(cc.Label)],t.prototype,"userNameLabel",void 0),r([s(cc.Button)],t.prototype,"deleteBtn",void 0),t=r([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../AdminAccountManager":"AdminAccountManager"}],User:[function(e,t,n){"use strict";cc._RF.push(t,"693a4ZqV+FN1JVBh8qreb6t","User");var o=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../API"),a=e("../Enum"),c=e("../LevelDesign"),s=function(){function e(e,t,n,o){void 0===o&&(o=null),this.uid=e,this.name=t,this.age=n,this.design=null===o?new c.LevelDesign:Object.assign(new c.LevelDesign,o),cc.log("create user: ",this)}return e.prototype.getDesignProgress=function(){return null===this.design.blockDesignSettings?a.GameDesignProgress.Step1_PuzzleBlockDesign:null===this.design.mapSettings?a.GameDesignProgress.Step2_PuzzleMapDesign:null===this.design.initialMapTileTypeSettings?a.GameDesignProgress.Step3_InitialMapDesign:null===this.design.matchEffectSettings?a.GameDesignProgress.Step4_MatchEffectDesign:null===this.design.clearEffectSettings?a.GameDesignProgress.Step5_GameClearEffectDesign:null===this.design.backgroundSettings?a.GameDesignProgress.Step6_BackgroundDesign:a.GameDesignProgress.Step7_TestAndRelease},e.prototype.printJson=function(){var e=JSON.stringify(this);cc.log("print user:",this.uid,e)},e.prototype.save=function(){var e=JSON.stringify(this);cc.sys.localStorage.setItem("latest_user",e),cc.log("save latest user >",e)},e.prototype.uploadDataToSever=function(e){return o(this,void 0,void 0,function(){var t,n,o,a;return r(this,function(r){return t=JSON.stringify(this),n={body:{id:this.uid,levelData:t}},(o=new XMLHttpRequest).onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<400){cc.log("uploaded level data to server");var t=o.responseText;e(t)}},a=cc.js.formatStr("%s%s",i.API.HOST,i.API.PATH_UPLOAD_LEVEL),o.open("POST",a),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n)),cc.log("request http to upload level data"),[2]})})},e.prototype.uploadQRCodeToServer=function(e,t){return void 0===t&&(t=256),o(this,void 0,void 0,function(){var n,o,a;return r(this,function(r){return n={body:{id:this.uid,url:cc.js.formatStr("%s?id=%s",i.API.GAME_URL,this.uid),width:t}},(o=new XMLHttpRequest).onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<400){var t=JSON.parse(o.responseText);e(t.qrCodeImgUrl)}},a=cc.js.formatStr("%s%s",i.API.HOST,i.API.PATH_UPLOAD_QRCODE),o.open("POST",a),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n)),[2]})})},e}();n.default=s,cc._RF.pop()},{"../API":"API","../Enum":"Enum","../LevelDesign":"LevelDesign"}]},{},["AdminAccountManager","AdminScene","AdminLoginPanel","AdminPanel","AdminQRCodePopup","CertificationPopup","DeleteUserConfirmPopup","UserTableRow","HomeScene","StepButton","LevelPlayPlayPanel","LevelPlayScene","LevelPlayTilePanel","LoadingScene","LoginScene","FireworkEmiter","AnimationEffect","BaseClearEffect","BaseEffect","ClearEffect_CharacterAnimation","ClearEffect_Firework","ParticleEffect","Tile","TilePreview","TutorialCircle","TutorialCircle_Step5","TutorialStep1","TutorialStep2","TutorialStep3","TutorialStep4","TutorialStep5","StepBar","UIDDisplay","API","OutlineTextButton","PanelComponent","ScaleUI","SceneComponent","SwitchButton","Combination","Enum","GameManager","GameTimer","TileManager","GameConfig","GameUtil","HttpClient","LevelDesign","AppManager","AudioManager","EventManager","ResManager","User","UserManager","CompletionPanel","TitlePanel","ConfirmPopup","Toast","BigBlockPreview","BigBlockTouchLayer","Block","BlockDesignPanel","BlockLayer","ColorButton","MiniBlock","Palette","SlotSelection","PuzzleBlockDesignScene","MapBoxPreview","PuzzleMapDesignScene","MapSizeSelection","MapSizeSettingPanel","MiniTileSlider","TileCountSettings","InitialMapSettingsScene","InitialMapPreview","InitialMapSettingPanel","TileMenu","MatchEffectSettingScene","EffectEditPanel","EffectSelection","EffectSettingPanel","EffectSlot","MatchEffectPreview","ClearPlaySettingScene","ClearCharacterSelection","ClearEffectPreivew","ClearEffectSelection","ClearSettingPanel","TitlePanel_Step5","BackgroundSettingScene","BackgroundSelection","BackgroundSettingPanel","CompletionPanel_Step6","ClearEffect","ClearPopup","EndTestScene","ReadyStartPopup","GameCertificatePanel","GameQRPanel","GameReleasePanel","GameTestPanel","TitlePanel_Step7","TitleScene"]);